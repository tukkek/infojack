<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="./infojack-topmenu.html">
<link rel="import" href="./infojack-mainmenu.html">
<link rel="import" href="./infojack-style.html">
<link rel="import" href="./infojack-controller.html">

<dom-module id="infojack-app">
  <style include='infojack-style'></style>
  <template>
    <infojack-topmenu></infojack-topmenu>
    <infojack-mainmenu hidden="[[hide(gamestate,'mainmenu')]]"></infojack-mainmenu>
  </template>

  <script>
    class InfojackApp extends Polymer.Element {
      static get is() { return 'infojack-app'; }
      
      static get properties() {
        return {
            gamestate: {//keeps track of the current view to be show
                type: String,
                value: state.MAINMENU   ,
                observer:'changestate',
            }
        }
      }
      
      hide(gamestate,targets){
        return targets.indexOf(gamestate)<0;
      }
      
      ready(){
        super.ready();
        ui.register(this);
      }
      
      changestate(newvalue,oldvalue){
        if(ui['infojack-topmenu']){
            ui['infojack-topmenu'].gamestate=newvalue;
        }
      }
    }

    window.customElements.define(InfojackApp.is, InfojackApp);
  </script>
</dom-module>
