define("app",["exports"],function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});e.App=function e(){t(this,e)}}),define("empty",["exports"],function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});e.Example=function e(){t(this,e)}}),define("environment",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={debug:!1,testing:!1,nodesize:4,fullattributes:!1,ccskills:!1,playeravatars:17}}),define("infojack-cyberspace",["exports","./modules/cyberspace/system","./modules/cyberspace/avatar/player","./modules/cyberspace/console","aurelia-framework","aurelia-event-aggregator","./modules/sound","./messages","./environment","./modules/character/character"],function(e,t,n,i,r,o,a,s,c,l){"use strict";function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Cyberspace=void 0;var d,p,h=function(e){return e&&e.__esModule?e:{default:e}}(c),f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.Cyberspace=(d=(0,r.inject)(a.Sound,o.EventAggregator))(p=function(){function e(t,n){u(this,e),this.showconsole=!1;var i=this;n.subscribe(s.ShowView,function(e){"Cyberspace"==e.view&&i.init()})}return e.prototype.init=function(){this.showconsole=!0,this.map=document.querySelector("#cyberspace"),this.map.innerHTML="",this.console=document.querySelector("#console"),this.console.innerHTML="",this.system=new t.System(h.default.systemlevel||l.hero.level),this.player=new n.Player(this.system),this.tiles=[],this.drawn=[],this.draw()},e.prototype.clicktile=function(e){"IMG"==e.tagName&&(e=e.parentNode);var t=this.system.nodes[e.nodeid],n=t==this.player.node&&t.getavatar(e.nodex,e.nodey);n?n.click():(this.player.enter(t),this.placenode(t,!0)),this.refresh()},e.prototype.placetile=function(e,t,n){var i=document.createElement("div");this.tiles.push(i),i.classList.add("tile"),i.nodeid=n.id,i.nodex=e,i.nodey=t;var r=this;i.onclick=function(){r.clicktile(this)};var o=i.style;return o.width="2.5em",o.height="2.5em",o.left=2.5*(1.1*n.x*h.default.nodesize+e)+"em",o.top=2.5*(1.1*n.y*h.default.nodesize+t)+"em",i},e.prototype.placespacer=function(){for(var e=0,t=0,n=this.tiles,i=Array.isArray(n),r=0,n=i?n:n[Symbol.iterator]();;){var o;if(i){if(r>=n.length)break;o=n[r++]}else{if(r=n.next(),r.done)break;o=r.value}var a=o;a.offsetLeft>e&&(e=a.offsetLeft),a.offsetTop>t&&(t=a.offsetTop)}var s=document.createElement("div");s.classList.add("spacer"),s.style.top=document.body.scrollTop+t+"px",s.style.left=document.body.scrollLeft+e+"px",this.map.appendChild(s)},e.prototype.placenode=function(e,t){if(this.drawn.indexOf(e)<0){this.drawn.push(e);for(var n=0;n<h.default.nodesize;n++)for(var i=0;i<h.default.nodesize;i++)this.map.appendChild(this.placetile(n,i,e))}if(t)for(var r=e.getneighbors(),o=Array.isArray(r),a=0,r=o?r:r[Symbol.iterator]();;){var s;if(o){if(a>=r.length)break;s=r[a++]}else{if(a=r.next(),a.done)break;s=a.value}var c=s;this.placenode(c,!1)}var l=this;setTimeout(function(){l.placespacer()},500)},e.prototype.draw=function(){i.console.system=this.system,i.console.print("You enter the system..."),this.placenode(this.system.entrance,!0),this.player.enter(this.system.entrance),this.refresh(),this.scroll()},e.prototype.scroll=function(){var e=this;e:for(var t=this.tiles,n=Array.isArray(t),i=0,t=n?t:t[Symbol.iterator]();;){var r,o=function(){if(n){if(i>=t.length)return"break";r=t[i++]}else{if(i=t.next(),i.done)return"break";r=i.value}var o=r;if(o.nodeid==e.player.node.id&&o.nodex==e.player.x&&o.nodey==e.player.y)return setTimeout(function(){o.scrollIntoView()},250),{v:void 0}}();switch(o){case"break":break e;default:if("object"===(void 0===o?"undefined":f(o)))return o.v}}},e.prototype.addimage=function(e,t){e.avatar=t,e.scanned=t.scanned;var n=document.createElement("img");n.src=t.image,n.title=t.tooltip,e.appendChild(n),e.image=n},e.prototype.removeimage=function(e){e.avatar=null,e.image.style.opacity=0;var t=e.image;e.image=null,setTimeout(function(){e.removeChild(t)},2e3)},e.prototype.printmessages=function(){for(var e=i.console.pop();e;e=i.console.pop()){var t=!1;if(0==e.alert)t="white";else if(1==e.alert)t="yellow";else{if(2!=e.alert)throw"Unknown alert level";t="red"}var n=document.createElement("div");n.style.color=t,n.appendChild(document.createTextNode(e.text)),this.console.appendChild(n)}this.console.scrollTop=this.console.scrollHeight},e.prototype.refresh=function(){var e=this;if(this.printmessages(),this.system.revealed)for(var t=this.system.nodes,n=Array.isArray(t),i=0,t=n?t:t[Symbol.iterator]();;){var r;if(n){if(i>=t.length)break;r=t[i++]}else{if(i=t.next(),i.done)break;r=i.value}var o=r;this.placenode(o,!1)}e:for(var a=this.tiles,s=Array.isArray(a),c=0,a=s?a:a[Symbol.iterator]();;){var l,u=function(){if(s){if(c>=a.length)return"break";l=a[c++]}else{if(c=a.next(),c.done)return"break";l=c.value}var t=l,n=e.system.nodes[t.nodeid];if(0==t.style.opacity&&setTimeout(function(){t.classList.add("discovered")},1),!n.visited)return"continue";t.style.border||t.classList.add("visited");var i=n.getavatar(t.nodex,t.nodey);!t.image||i&&i==t.avatar&&t.scanned==i.scanned||e.removeimage(t),i&&i!=t.avatar&&e.addimage(t,i)}();switch(u){case"break":break e;case"continue":continue}}},e}())||p}),define("infojack-mainmenu",["exports","aurelia-framework","aurelia-event-aggregator","./modules/sound","./modules/save","./messages","./environment"],function(e,t,n,i,r,o,a){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.MainMenu=void 0;var c,l,u=function(e){return e&&e.__esModule?e:{default:e}}(a);e.MainMenu=(c=(0,t.inject)(i.Sound,n.EventAggregator))(l=function(){function e(t,n){if(s(this,e),this.sound=t,this.show=!0,this.messaging=n,this.hassave=0!=r.save.checkload(),u.default.view){var i=this;setTimeout(function(){i.close(u.default.view)},1)}}return e.prototype.showpending=function(){this.sound.play(this.sound.ERROR),setTimeout(function(){alert("Operation pending!")},100)},e.prototype.startgame=function(){this.hassave&&!confirm("Are you sure you want to start a new game? Any previous progress will be lost!")||(r.save.clear(),this.close("CharacterScreen"))},e.prototype.loadgame=function(){this.hassave?(r.save.load(),this.close("CharacterScreen")):(this.sound.play(this.sound.ERROR),alert("No save found!"))},e.prototype.close=function(e){this.show=!1,this.messaging.publish(new o.ShowView(e))},e.prototype.openrepository=function(){window.open("https://github.com/tukkek/infojack")},e}())||l}),define("infojack-radio",["exports"],function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});e.Radio=function(){function e(){t(this,e),this.active=!1}return e.prototype.play=function(){return this.audio.play(),this.active?this.audio.pause():this.audio.play(),!0},e}()}),define("infojack-topmenu",["exports"],function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});e.TopMenu=function(){function e(){t(this,e),this.hideradio=!0}return e.prototype.open=function(){this.hideradio=!this.hideradio},e}()}),define("main",["exports","./environment"],function(e,t){"use strict";function n(e){e.use.standardConfiguration().feature("resources"),i.default.debug&&e.use.developmentLogging(),i.default.testing&&e.use.plugin("aurelia-testing"),e.start().then(function(){return e.setRoot()})}Object.defineProperty(e,"__esModule",{value:!0}),e.configure=n;var i=function(e){return e&&e.__esModule?e:{default:e}}(t);Promise.config({warnings:{wForgottenReturn:!1}})}),define("messages",["exports"],function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});e.ShowView=function e(n){t(this,e),this.view=n}}),define("character/character-abilities",["exports","../modules/character/character","../environment"],function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.CharacterAbilities=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n);e.CharacterAbilities=function(){function e(){i(this,e)}return e.prototype.attached=function(){this.full=r.default.fullattributes,this.strength=t.hero.strength,this.dexterity=t.hero.dexterity,this.constitution=t.hero.constitution,this.intelligence=t.hero.intelligence,this.wisdom=t.hero.wisdom,this.charisma=t.hero.charisma,this.pointbuy=t.hero.pointbuy,this.pointextra=t.hero.pointextra},e.prototype.save=function(){var e={};Object.assign(e,this),delete e.full,t.hero.assign(e)},e.prototype.upgrade=function(e){var n=this[e];if(18!=n){var i=this[e]+1;if(this.pointextra>0)this.pointextra-=1,this[e]=i;else{if(!this.buy(n))return;this[e]=i}"intelligence"==e&&i%2==0&&(t.hero.ranks+=1==t.hero.level?4:1),this.save()}},e.prototype.buy=function(e){var n=e+1,i=t.costs[n]-t.costs[e];return this.pointbuy>=i&&(this.pointbuy-=i,!0)},e}()}),define("character/character-deck",["exports","../modules/deck","../modules/character/character"],function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.CharacterDeck=void 0;var r=["Ã˜","I","II","III","IV"];e.CharacterDeck=function(){function e(){i(this,e)}return e.prototype.attached=function(){this.refresh()},e.prototype.refresh=function(){this.memory=t.deck.memory,this.storage=t.deck.storage,this.name=n.hero.name,this.name+="s"==this.name[this.name.lenght-1]?"'":"'s",this.wealth=(0,n.sign)(n.hero.wealth),this.electronics=(0,n.sign)(n.hero.getelectronics()),this.deckgrade=t.deck.deckgrade,this.memorygrade=t.deck.memorygrade,this.storagegrade=t.deck.storagegrade,this.stealthgrade=t.deck.stealthgrade,this.canupgradedeck=t.deck.upgradedeck(!1),this.canupgradememory=t.deck.upgradememory(!1),this.canupgradestorage=t.deck.upgradestorage(!1),this.canupgradestealth=t.deck.upgradestealth(!1)},e.prototype.grade=function(e){return r[e]},e.prototype.upgradedeck=function(){t.deck.upgradedeck(!0),this.refresh()},e.prototype.upgradememory=function(){t.deck.upgradememory(!0),this.refresh()},e.prototype.upgradestorage=function(){t.deck.upgradestorage(!0),this.refresh()},e.prototype.upgradestealth=function(){t.deck.upgradestealth(!0),this.refresh()},e}()}),define("character/character-details",["exports","../modules/character/character","../modules/character/skill","../modules/character/class/class"],function(e,t,n,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.CharacterDetails=void 0;e.CharacterDetails=function(){function e(){r(this,e),this.abilities=["Strength","Dexterity","Constitution","Intelligence","Wisdom","Charisma"],this.saves=["Fortitude","Reflexes","Will"],this.skills=n.skills,this.classes=i.Class.classes}return e.prototype.bind=function(){this.avatar=t.hero.connect()},e.prototype.getmodifier=function(e){return e=e.toLowerCase(),e=this.avatar.getmodifier(this.avatar[e]),(0,t.sign)(e)},e.prototype.getsave=function(e){return e=e.toLowerCase(),(0,t.sign)(this.avatar["get"+e]())},e.prototype.getskill=function(e){return e=e.name.replace(" ","").toLowerCase(),(0,t.sign)(this.avatar["get"+e]())},e}()}),define("character/character-feats",["exports","../modules/character/feat","../modules/character/character","aurelia-framework","aurelia-templating-resources"],function(e,t,n,i,r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.CharacterFeats=void 0;var a,s;e.CharacterFeats=(a=(0,i.inject)(r.BindingSignaler))(s=function(){function e(t){o(this,e),this.signals=t,this.viewname="Feats"}return e.prototype.bind=function(){this.points=n.hero.newfeats},e.prototype.add=function(e){0!=this.points&&(this.points-=1,n.hero.newfeats-=1,e.apply(n.hero),this.signals.signal("update"))},e.prototype.validate=function(e){return this.points>0&&e.validate(n.hero)},e.prototype.getcurrent=function(){for(var e=[],t=n.hero.feats,i=Array.isArray(t),r=0,t=i?t:t[Symbol.iterator]();;){var o;if(i){if(r>=t.length)break;o=t[r++]}else{if(r=t.next(),r.done)break;o=r.value}var a=o;a.talent||e.push(a)}return e},e.prototype.getall=function(){return t.feats},e}())||s}),define("character/character-general",["exports","../modules/character/character","../environment"],function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.CharacterGeneral=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n);e.CharacterGeneral=function(){function e(){i(this,e),this.hero=t.hero,this.avatar=t.hero.image,this.avatars=r.default.playeravatars}return e.prototype.attached=function(){this.name.focus()},e.prototype.select=function(e){this.avatar=e,t.hero.image=e},e}()}),define("character/character-screen",["exports","aurelia-framework","aurelia-event-aggregator","../messages","../modules/save"],function(e,t,n,i,r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.CharacterScreen=void 0;var a,s;e.CharacterScreen=(a=(0,t.inject)(n.EventAggregator))(s=function(){function e(t){o(this,e),this.show=!1,this.showgeneral=!0,this.showabilities=!1,this.showskills=!1,this.showfeats=!1,this.showtalents=!1,this.showdetails=!1,this.showdeck=!1,this.messaging=t;var n=this;t.subscribe(i.ShowView,function(e){"CharacterScreen"==e.view&&(n.show=!0)})}return e.prototype.select=function(e){for(var t=e.target.id,n=this.charactermenu.childNodes,i=Array.isArray(n),r=0,n=i?n:n[Symbol.iterator]();;){var o;if(i){if(r>=n.length)break;o=n[r++]}else{if(r=n.next(),r.done)break;o=r.value}var a=o,s=a.classList;if(s){var c=a.id==t;this["show"+a.id.replace("character-","")]=c,c?s.add("highlightbg"):s.remove("highlightbg")}}},e.prototype.close=function(){r.save.save(),this.show=!1,this.messaging.publish(new i.ShowView("Cyberspace"))},e}())||s}),define("character/character-skills",["exports","../modules/character/skill","../modules/character/character","aurelia-framework","../environment"],function(e,t,n,i,r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.CharacterSkills=void 0;var a=function(e){return e&&e.__esModule?e:{default:e}}(r);e.CharacterSkills=function(){function e(){o(this,e),this.skills=t.skills}return e.prototype.bind=function(){this.hero=n.hero,this.ranks={};for(var e=t.skills.values(),i=Array.isArray(e),r=0,e=i?e:e[Symbol.iterator]();;){var o;if(i){if(r>=e.length)break;o=e[r++]}else{if(r=e.next(),r.done)break;o=r.value}var a=o;this.ranks[a.name]=n.hero.getranks(a.name)}},e.prototype.iscrossclass=function(e){return a.default.ccskills&&!n.hero.classskills.includes(e)},e.prototype.buy=function(e){return this.iscrossclass(e)?2:1},e.prototype.upgrade=function(e){if(this.canupgrade(this.ranks[e],e)){var t=this.buy(e);n.hero.ranks-=t,this.ranks[e]+=1,n.hero.setranks(e,this.ranks[e]),"Profession"==e&&1==n.hero.level&&1==this.ranks[e]&&(n.hero.wealth+=1)}},e.prototype.canupgrade=function(e,t){var i=this.buy(t);return n.hero.ranks>=i&&e<3+n.hero.level},e.prototype.getability=function(e){return e.ability.substring(0,3).toUpperCase()},e}()}),define("character/character-talents",["exports","aurelia-framework","../modules/character/character","../modules/character/class/class","aurelia-templating-resources"],function(e,t,n,i,r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.CharacterTalents=void 0;var a,s,c;e.CharacterTalents=(a=(0,t.useView)("./character-feats.html"),s=(0,t.inject)(r.BindingSignaler),a(c=s(c=function(){function e(t){o(this,e),this.signals=t,this.viewname="Talents"}return e.prototype.bind=function(){this.points=n.hero.talent,this.talents=new Map;for(var e in n.hero.classes)for(var t=i.Class.classes.get(e).talents,r=Array.isArray(t),o=0,t=r?t:t[Symbol.iterator]();;){var a;if(r){if(o>=t.length)break;a=t[o++]}else{if(o=t.next(),o.done)break;a=o.value}var s=a,c=s[0],l=s[1];this.talents.set(c,l)}},e.prototype.add=function(e){0!=this.points&&(this.points-=1,n.hero.talent-=1,e.apply(n.hero),this.signals.signal("update"))},e.prototype.validate=function(e){return this.points>0&&e.validate(n.hero)},e.prototype.getcurrent=function(){for(var e=[],t=n.hero.feats,i=Array.isArray(t),r=0,t=i?t:t[Symbol.iterator]();;){var o;if(i){if(r>=t.length)break;o=t[r++]}else{if(r=t.next(),r.done)break;o=r.value}var a=o;a.talent&&e.push(a)}return e},e.prototype.getall=function(){return this.talents},e}())||c)||c)}),define("modules/deck",["exports","./character/character"],function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.deck=void 0;var i=[10,5,5,5],r=function(){function e(){n(this,e),this.memory=10,this.storage=20,this.deckgrade=1,this.memorygrade=0,this.storagegrade=0,this.stealthgrade=0}return e.prototype.upgrade=function e(n,i,r,o,a){if(4==i)return"Already at maximum grade.";var e=i+1;return n&&e>this.deckgrade?"Requires a deck upgrade.":(r+=2*(e-1),t.hero.wealth<r-10?"Requires wealth "+(0,t.sign)(r-10)+".":(o+=1*(e-1),t.hero.getelectronics()<o-10?"Requires electronics "+(0,t.sign)(o-10)+".":a&&!t.hero.buy(r)?"Unexpected not buy error.":""))},e.prototype.upgradedeck=function(e){var t=this.upgrade(!1,this.deckgrade,10,12,e);return""==t&&e&&(this.deckgrade+=1),t},e.prototype.upgradememory=function(e){var t=this.upgrade(!0,this.memorygrade,9,14,e);return""==t&&e&&(this.memory+=i[this.memorygrade],this.memorygrade+=1),t},e.prototype.upgradestorage=function(e){var t=this.upgrade(!0,this.storagegrade,8,14,e);return""==t&&e&&(this.storage+=10,this.storagegrade+=1),t},e.prototype.upgradestealth=function(e){var t=this.upgrade(!0,this.stealthgrade,10,12,e);return""==t&&e&&(this.stealthgrade+=1),t},e.prototype.assign=function(e){for(var t in e)t in this&&(this[t]=e[t])},e}();e.deck=new r}),define("modules/rpg",["exports"],function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function e(){t(this,e)}return e.prototype.r=function(e,t){return Math.floor(Math.random()*(t+1)+e)},e.prototype.d=function(e,t){for(var n=0,i=0;i<e;i++)n+=this.r(1,t);return n},e.prototype.choose=function(e){return e[this.r(0,e.length-1)]},e.prototype.chancein=function(e){return(e=Math.floor(e))>=1&&1==this.r(1,e)},e.prototype.shuffle=function(e){for(var t=e.length-1;t>0;t--){var n=this.r(0,t),i=e[t];e[t]=e[n],e[n]=i}return e},e.prototype.randomize=function(e){return this.r(1,e)-this.r(1,e)},e}();e.rpg=new n}),define("modules/save",["exports","./character/character","../environment","./deck"],function(e,t,n,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.save=void 0;var o=function(e){return e&&e.__esModule?e:{default:e}}(n),a=function(){function e(){r(this,e)}return e.prototype.checkload=function(){return localStorage.getItem("infojack-save")},e.prototype.debug=function(){if(o.default.printsave){var e=this.checkload();e&&alert(e)}},e.prototype.save=function(){var e={};e.hero=t.hero,e.deck=i.deck,localStorage.setItem("infojack-save",JSON.stringify(e)),this.debug()},e.prototype.load=function(){var e=this.checkload();return!!e&&(e=JSON.parse(e),this.populate(e),this.initialize(),!0)},e.prototype.populate=function(e){t.hero.assign(e.hero),i.deck.assign(e.deck),this.debug()},e.prototype.initialize=function(){},e.prototype.clear=function(){localStorage.setItem("infojack-save","")},e}();e.save=new a}),define("modules/sound",["exports"],function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});e.Sound=function(){function e(){t(this,e),this.ERROR="Computer Error Alert-SoundBible.com-783113881.mp3"}return e.prototype.play=function(e){new Audio("./sounds/"+e).play()},e}()}),define("resources/index",["exports"],function(e){"use strict";function t(e){}Object.defineProperty(e,"__esModule",{value:!0}),e.configure=t}),define("modules/character/character",["exports","./occupation","./class/webcrawler","./skill","../rpg","../../environment"],function(e,t,n,i,r,o){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e){return e>=0?"+"+e:e}Object.defineProperty(e,"__esModule",{value:!0}),e.hero=e.Character=e.costs=void 0,e.sign=s;var c=function(e){return e&&e.__esModule?e:{default:e}}(o),l=Math.round(39/(c.default.fullattributes?1:2)),u=(e.costs={7:-4,8:-2,9:-1,10:0,11:1,12:2,13:3,14:5,15:7,16:10,17:13,18:17},e.Character=function(){function e(t){a(this,e),this.name=t,this.image=r.rpg.r(0,c.default.playeravatars-1),this.hp=0,this.maxhp=0,this.strength=7,this.dexterity=7,this.constitution=7,this.intelligence=7,this.wisdom=7,this.charisma=7,this.pointbuy=l,this.pointextra=0,this.wealth=5,this.classskills=[],this.classes={},this.level=0,this.ranks=0,this.bab=0,this.edgedice=[0,0],this.edge=0,this.fort=0,this.ref=0,this.will=0,this.defence=0,this.init=0,this.speed=30,this.talent=0,c.default.extratalents&&(this.talent+=c.default.extratalents),this.contacts=0,this.feats=[],this.newfeats=2;for(var n=i.skills.values(),o=Array.isArray(n),s=0,n=o?n:n[Symbol.iterator]();;){var u;if(o){if(s>=n.length)break;u=n[s++]}else{if(s=n.next(),s.done)break;u=s.value}this[u.name.replace(" ","").toLowerCase()]=0}}return e.prototype.assign=function(e){for(var t in e)t in this&&(this[t]=e[t])},e.prototype.setoccupation=function(e){this.wealth+=e.wealth;for(var t=e.skills,n=Array.isArray(t),i=0,t=n?t:t[Symbol.iterator]();;){var r;if(n){if(i>=t.length)break;r=t[i++]}else{if(i=t.next(),i.done)break;r=i.value}var o=r;this.addclassskill(o)}},e.prototype.addclassskill=function(e){this.classskills.indexOf(e)<0&&this.classskills.push(e)},e.prototype.connect=function(){var t=new e;return Object.assign(t,this),this.classes.Webcrawler&&this.enhancecrawler(t),t},e.prototype.enhancecrawler=function(e){e.strength=Math.max(e.strength,e.intelligence),e.dexterity=Math.max(e.dexterity,e.wisdom),e.constitution=Math.max(e.constitution,e.charisma);var t=this.classes.Webcrawler;e.bab-=[0,1,1,2,2,3,3,4,4,5][t-1],e.bab+=t},e.prototype.getmodifier=function(e){return e%2==1&&(e-=1),(e-10)/2},e.prototype.getranks=function(e){return this[e.replace(" ","").toLowerCase()]},e.prototype.setranks=function(e,t){this[e.replace(" ","").toLowerCase()]=t},e.prototype.hasfeat=function(e){e=e.name||e;for(var t=this.feats,n=Array.isArray(t),i=0,t=n?t:t[Symbol.iterator]();;){var r;if(n){if(i>=t.length)break;r=t[i++]}else{if(i=t.next(),i.done)break;r=i.value}var o=r;if(o.name.toLowerCase()==e.toLowerCase())return o}return!1},e.prototype.addfeat=function(e){this.feats.push(e)},e.prototype.getskill=function(e,t,n,i){return n&&this.hasfeat(n)&&(e+=i),e+=this.getmodifier(t)},e.prototype.getbluff=function(){return this.getskill(this.bluff,this.charisma,"power of belief",1)},e.prototype.getconcentration=function(){return this.getskill(this.concentration,this.constitution,!1,0)},e.prototype.getdecryption=function(){var e=this.getskill(this.decryption,this.intelligence,"studious",2);return this.hasfeat("power of belief")&&(e+=1),e},e.prototype.getelectronics=function(){return this.getskill(this.electronics,this.intelligence,!1,0)},e.prototype.getforgery=function(){return this.getskill(this.forgery,this.intelligence,"meticulous",2)},e.prototype.getinformation=function(){return this.getskill(this.information,this.charisma,"trustworthy",3)},e.prototype.gethacking=function(){return this.getskill(this.hacking,this.intelligence,"specialized equipment",1)},e.prototype.getperceive=function(){return this.getskill(this.perceive,this.wisdom,!1,0)},e.prototype.getmedicine=function(){return this.getskill(this.medicine,this.wisdom,!1,0)},e.prototype.getstealth=function(){var e=this.getskill(this.stealth,this.dexterity,"stealthy",3);return this.hasfeat("power of belief")&&(e+=1),e},e.prototype.getprofession=function(){return this.getskill(this.profession,this.wisdom,!1,0)},e.prototype.getresearch=function(){return this.getskill(this.research,this.intelligence,"studious",2)},e.prototype.getsearch=function(){var e=this.getskill(this.search,this.intelligence,"meticulous",2);return this.hasfeat("power of belief")&&(e+=1),e},e.prototype.gettechnology=function(){return this.getskill(this.technology,this.intelligence,"educated",3)},e.prototype.getfortitude=function(){return this.fort+this.getmodifier(this.constitution)},e.prototype.getreflexes=function(){return this.ref+this.getmodifier(this.dexterity)},e.prototype.getwill=function(){return this.will+this.getmodifier(this.wisdom)},e.prototype.getinitiative=function(){var e=this.init+this.getmodifier(this.dexterity);return this.hasfeat("improved initiative")&&(e+=4),e},e.prototype.getdefence=function(){return 10+this.defence+this.getmodifier(this.dexterity)},e.prototype.getmelee=function(){return this.bab+this.getmodifier(this.strength)},e.prototype.getranged=function(){return this.bab+this.getmodifier(this.dexterity)},e.prototype.price=function e(t){var e=t>=15?1:0,n=t-this.wealth;return n<1?e:n<=10?e+1:(e+=n-10,e>12?12:e)},e.prototype.buy=function(e){return!(10+this.wealth<e)&&(this.wealth-=this.price(e),this.wealth<0&&(this.wealth=0),!0)},e.prototype.sell=function(e){var t=this.price(e-6);return this.wealth+=t,t},e.prototype.upgradewealth=function(){var e=10+this.getprofession();if(e<this.wealth)return 0;var t=1;for(e-=this.wealth;e>=5;)t+=1,e-=5;return t},e}()),d=e.hero=new u("Player1");d.setoccupation(t.occupations.adventurer),n.webcrawler.advance(d),console.log("Initial wealth: "+d.wealth),console.log("Purchase deck: "+d.price(10)),console.log("Purchase flicker: "+d.price(14)),console.log("Purchase blade: "+d.price(9)),console.log("Purchase cloak: "+d.price(9)),d.buy(10),d.buy(9),d.buy(9),d.buy(14),console.log("Final wealth: "+d.wealth)}),define("modules/character/feat",["exports"],function(e){"use strict";function t(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});for(var r=e.feats=new Map,o=e.Feat=function(){function e(t,n){i(this,e),this.name=t,this.description=n,this.talent=!1}return e.prototype.validate=function(e){return!e.hasfeat(this)},e.prototype.apply=function(e){e.addfeat(this)},e}(),a=(e.Talent=function(e){function r(n,o){i(this,r);var a=t(this,e.call(this,n,o));return a.talent=!0,a}return n(r,e),r}(o),function(e){function r(){return i(this,r),t(this,e.call(this,"Educated","+3 to Techonology rolls"))}return n(r,e),r}(o)),s=function(e){function r(){return i(this,r),t(this,e.call(this,"Meticulous","+2 to Forgery and Search rolls"))}return n(r,e),r}(o),c=function(e){function r(){return i(this,r),t(this,e.call(this,"Stealthy","+3 to Stealth rolls"))}return n(r,e),r}(o),l=function(e){function r(){return i(this,r),t(this,e.call(this,"Studious","+2 to Decrypt and Research rolls"))}return n(r,e),r}(o),u=function(e){function r(){return i(this,r),t(this,e.call(this,"Trustworthy","+3 to Information rolls"))}return n(r,e),r}(o),d=function(e){function r(){return i(this,r),t(this,e.call(this,"Improved initiative","+4 to initiative rolls"))}return n(r,e),r}(o),p=function(e){function r(){return i(this,r),t(this,e.call(this,"Windfall","+3 wealth (may be taken multiple times)"))}return n(r,e),r.prototype.validate=function(e){return!0},r.prototype.apply=function(e){e.wealth+=3},r}(o),h=[new a,new d,new s,new c,new c,new l,new u,new p],f=0;f<h.length;f++){var v=h[f];r.set(v.name.toLowerCase(),v)}}),define("modules/character/occupation",["exports","./skill"],function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.occupations=void 0;var i=function e(i,r){n(this,e),this.wealth=i,this.skills=r,(0,t.checkskills)(r)};(e.occupations={}).adventurer=new i(1,["Bluff","Technology","Stealth","Perceive","Medicine"])}),define("modules/character/skill",["exports"],function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e){for(var t=e,n=Array.isArray(t),i=0,t=n?t:t[Symbol.iterator]();;){var o;if(n){if(i>=t.length)break;o=t[i++]}else{if(i=t.next(),i.done)break;o=i.value}var a=o;r.get(a)||alert("Unknown skill: "+a)}return e}Object.defineProperty(e,"__esModule",{value:!0}),e.checkskills=n;for(var i=function e(n,i,r){t(this,e),this.name=n,this.ability=i,this.description=r},r=e.skills=new Map,o=[new i("Bluff","Charisma","Convince ICE you're not an intruder"),new i("Concentration","Constitution","Focus your mind while in danger"),new i("Decryption","Intelligence","Break into protected data"),new i("Electronics","Intelligence","Build and install hardware"),new i("Forgery","Intelligence","Forge authentication credentials"),new i("Hacking","Intelligence","Act on the Web"),new i("Information","Charisma","Find more shopping items and missions"),new i("Medicine","Wisdom","Treat your injuries"),new i("Perceive","Wisdom","Basic processing of Web stimuli."),new i("Profession","Wisdom","Earn more money per contract"),new i("Research","Intelligence","Do perimeter checks on Frames"),new i("Search","Intelligence","Scan avatars for more information."),new i("Stealth","Dexterity","Avoid being detected on the Web"),new i("Technology","Intelligence","Create your own programs")],a=0;a<o.length;a++){var s=o[a];r.set(s.name,s)}}),define("modules/cyberspace/console",["exports"],function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function e(n,i){t(this,e),this.text=n,this.alert=i.alert},i=function(){function e(){t(this,e),this.messages=[],this.system=!1}return e.prototype.print=function(e){if(!this.system)throw"System not set";this.messages.push(new n(e,this.system))},e.prototype.pop=function(){return this.messages.pop()},e}();e.console=new i}),define("modules/cyberspace/system",["exports","../rpg","./node/node","./node/datastore","./node/cpu","./node/portal","./node/interface","../../environment"],function(e,t,n,i,r,o,a,s){"use strict";function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.System=void 0
;var l=function(e){return e&&e.__esModule?e:{default:e}}(s);e.System=function(){function e(t){c(this,e),this.revealed=!1,this.level=t,this.level<1?this.level=1:this.level>20&&(this.level=20),this.alert=0,this.nodes=[],this.ice=[],this.entrance=null,this.generatemap(),this.definenodes();for(var n=this.nodes,i=Array.isArray(n),r=0,n=i?n:n[Symbol.iterator]();;){var o;if(i){if(r>=n.length)break;o=n[r++]}else{if(r=n.next(),r.done)break;o=r.value}o.generate()}this.player=!1,this.debug()}return e.prototype.debug=function(){if(l.default.revealmap&&this.reveal(),l.default.scannodes)for(var e=this.nodes,t=Array.isArray(e),n=0,e=t?e:e[Symbol.iterator]();;){var i;if(t){if(n>=e.length)break;i=e[n++]}else{if(n=e.next(),n.done)break;i=n.value}for(var r=i,o=r.avatars,a=Array.isArray(o),s=0,o=a?o:o[Symbol.iterator]();;){var c;if(a){if(s>=o.length)break;c=o[s++]}else{if(s=o.next(),s.done)break;c=s.value}var u=c;u.scan(),u.scanned=!0}}},e.prototype.getnode=function(e,t){for(var n=this.nodes,i=Array.isArray(n),r=0,n=i?n:n[Symbol.iterator]();;){var o;if(i){if(r>=n.length)break;o=n[r++]}else{if(r=n.next(),r.done)break;o=r.value}var a=o;if(e==a.x&&t==a.y)return a}return null},e.prototype.generatemap=function(){this.nodes.push(new r.Cpu(0,0,this));for(var e=t.rpg.r(3,7)+this.level,i=0,o=0;this.nodes.length<e;){var a=t.rpg.choose(this.nodes),s=a.x,c=a.y;t.rpg.chancein(2)?s+=t.rpg.chancein(2)?1:-1:c+=t.rpg.chancein(2)?1:-1,this.getnode(s,c)||(this.nodes.push(new n.Node(s,c,this)),s<i&&(i=s),c<o&&(o=c))}for(var l=this.nodes,u=Array.isArray(l),d=0,l=u?l:l[Symbol.iterator]();;){var p;if(u){if(d>=l.length)break;p=l[d++]}else{if(d=l.next(),d.done)break;p=d.value}var h=p;h.x-=i,h.y-=o}},e.prototype.replacenode=function(e,t){var n=this.nodes[t];e.id=n.id,e.x=n.x,e.y=n.y,this.nodes[t]=e},e.prototype.findentrance=function(e){var n=this.nodes.filter(function(t){return 0!=t.id&&t.getneighbors().length==e});return 0==n.length?-1:this.nodes.indexOf(t.rpg.choose(n))},e.prototype.generatenode=function(){return t.rpg.chancein(10)?new r.Cpu(-1,-1,this):t.rpg.chancein(4)?new a.Interface(-1,-1,this):new i.Datastore(-1,-1,this)},e.prototype.definenodes=function(){this.nodes[0].setmain();for(var e=-1,n=1;e==-1;n++)e=this.findentrance(n);this.entrance=new o.Portal(-1,-1,this),this.replacenode(this.entrance,e);for(var i=1;i<this.nodes.length;i++)if(i!=e){var r=this.nodes[i].getneighbors().length,a=r>1&&t.rpg.chancein(6-r);a||this.replacenode(this.generatenode(),i)}},e.prototype.reveal=function(){this.revealed=!0;for(var e=this.nodes,t=Array.isArray(e),n=0,e=t?e:e[Symbol.iterator]();;){var i;if(t){if(n>=e.length)break;i=e[n++]}else{if(n=e.next(),n.done)break;i=n.value}i.visited=!0}},e.prototype.raisealert=function(){this.alert<2&&(this.alert+=1)},e.prototype.cancelalert=function(){this.alert>0&&(this.alert-=1)},e}()}),define("modules/character/class/class",["exports","../skill","../../rpg","./webcrawler"],function(e,t,n,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Class=void 0,(e.Class=function(){function e(){r(this,e),this.talents=new Map}return e.prototype.advance=function(e){var t=e.classes[this.name];if(t||(t=0),(t+=1)>10)throw"Cannot advance past level 10!";e.level+=1,this.levelup(e,t),e.classes[this.name]=t},e.prototype.upgradehp=function(e){if(1==e.level)e.maxhp=this.hd,e.hp=e.maxhp;else{var t=Math.round((1+this.hd)/2);e.maxhp+=t,e.hp+=t}},e.prototype.upgraderanks=function(e,t){var n=this.ranks+e.getmodifier(e.intelligence);if(e.ranks+=Math.max(1,n),1==e.level&&(e.ranks*=4),1==t)for(var i=this.skills,r=Array.isArray(i),o=0,i=r?i:i[Symbol.iterator]();;){var a;if(r){if(o>=i.length)break;a=i[o++]}else{if(o=i.next(),o.done)break;a=o.value}var s=a;e.addclassskill(s)}},e.prototype.levelup=function(e,t){for(var n=["bab","fort","ref","will","defence"],i=0;i<n.length;i++){var r=n[i];this.upgradestat(t,r,e)}this.upgradeedgedice(t,e),this.upgradereputation(e,t),this.upgradehp(e),this.upgraderanks(e,t),e.level%3==0&&(e.newfeats+=1),e.level%4==0&&(e.pointextra+=1),e.level>1&&e.upgradewealth()},e.prototype.upgradestat=function(e,t,n){var i=e>1?this[t][e-2]:0,r=this[t][e-1];n[t]+=r-i},e.prototype.upgradeedgedice=function(e,t){var n=this.edgedice[e-1].split("d");n=[parseInt(n[0]),parseInt(n[1])],(n[0]>t.edgedice[0]||n[0]==t.edgedice[0]&&n[1]>=t.edgedice[1])&&(t.edgedice[0]=n[0]),t.edgedice[1]=n[1],1==t.level&&(t.edge+=t.edgedice[0])},e.prototype.upgradereputation=function(e,t){1==t?this.reputation[0]:(this.reputation[t-1],this.reputation[t-2])},e.prototype.check=function(e){return(0,t.checkskills)(e)},e}()).classes=new Map}),define("modules/character/class/webcrawler",["exports","../feat","./class"],function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.webcrawler=void 0;var a=function(e){function t(){return i(this,t),r(this,e.call(this,"The web is alive","Adds Will to Perception rolls (requires level 3 and Power of Belief)"))}return o(t,e),t.prototype.validate=function(t){return e.prototype.validate.call(this,t)&&t.level>=3&&t.hasfeat("power of belief")},t}(t.Talent),s=function(e){function t(){return i(this,t),r(this,e.call(this,"Specialized equipment","+1 to hacking rolls, +5 speed, safe disconnections (requires 4 in hacking, electronics and technology)"))}return o(t,e),t.prototype.validate=function(t){return e.prototype.validate.call(this,t)&&t.hacking>=4&&t.electronics>=4&&t.technology>=4},t.prototype.apply=function(t){e.prototype.apply.call(this,t),t.speed+=5},t}(t.Talent),c=function(e){function n(){i(this,n);var o=r(this,e.call(this));o.name="Webcrawler",o.skills=o.check(["Hacking","Electronics","Decryption","Forgery","Technology","Profession","Research","Technology","Search"]),o.hd=4,o.ranks=7,o.bab=[0,1,1,2,2,3,3,4,4,5],o.fort=[0,0,1,1,1,2,2,2,3,3],o.ref=[1,2,2,2,3,3,4,4,4,5],o.will=[1,2,2,2,3,3,4,4,4,5],o.defence=[1,1,2,2,2,3,3,3,4,4],o.reputation=[0,1,1,2,2,3,3,4,4,5],o.edgedice=["1d4","1d4","2d4","2d6","2d6","3d6","3d8","3d8","4d8","4d10"];for(var c=[new t.Talent("Hackmastery","+2 to all damage inflicted"),new t.Talent("Phreakmastery","Safe connections, +1 against traces"),new t.Talent("Power of belief","+1 to bluff, decryption, search and stealth"),new s,new a],l=c,u=Array.isArray(l),d=0,l=u?l:l[Symbol.iterator]();;){var p;if(u){if(d>=l.length)break;p=l[d++]}else{if(d=l.next(),d.done)break;p=d.value}var h=p;o.talents.set(h.name,h)}return o}return o(n,e),n.prototype.levelup=function(t,n){e.prototype.levelup.call(this,t,n);var i=t.level;1==i||3==i||6==i||9==i?t.talent+=1:4==i||7==i?t.ranks+=1:5==i||8==i?t.contacts+=1:10==i&&(t.wealth+=5)},n}(n.Class),l=e.webcrawler=new c;n.Class.classes.set(l.name,l)}),define("modules/cyberspace/avatar/alarm",["exports","./avatar"],function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Alarm=void 0;e.Alarm=function(e){function t(r){n(this,t);var o=i(this,e.call(this,"nodes/core.png",r));return o.tooltip="Process",o}return r(t,e),t.prototype.scan=function(){this.setimage("nodes/alarm.bmp"),this.tooltip="Alarm"},t.prototype.click=function(){e.prototype.click.call(this)},t}(t.Avatar)}),define("modules/cyberspace/avatar/avatar",["exports","../system","../../rpg","../console"],function(e,t,n,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Avatar=void 0;e.Avatar=function(){function e(i,o){if(r(this,e),this.setimage(i),!(o instanceof t.System))throw"system type: "+o.constructor.name;this.system=o,this.node=null,this.x=-1,this.y=-1,this.tooltip=this.constructor.name,this.scanned=!1,this.scandc=this.system+n.rpg.randomize(10),this.scandc<1&&(this.scandc=1)}return e.prototype.setimage=function(e){this.image="./images/"+e},e.prototype.enter=function(e){var t=this.node;return e!=t&&(t&&t.getneighbors().indexOf(e)<0?(i.console.print("Can only access adjacent nodes..."),!1):e.enter(this))},e.prototype.click=function(){alert("Unimplemented.")},e.prototype.scan=function(){return!0},e}()}),define("modules/cyberspace/avatar/backdoor",["exports","./avatar"],function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Backdoor=void 0;e.Backdoor=function(e){function t(r){n(this,t);var o=i(this,e.call(this,"nodes/core.png",r));return o.tooltip="Process",o}return r(t,e),t.prototype.scan=function(){this.setimage("nodes/backdoor.bmp"),this.tooltip="Backdoor"},t}(t.Avatar)}),define("modules/cyberspace/avatar/control",["exports","./avatar","../../rpg"],function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Control=void 0;var a=2;e.Control=function(e){function t(o){i(this,t);var s=r(this,e.call(this,"nodes/core.png",o));return s.tooltip="Process",s.memory=n.rpg.chancein(a),s.privilege=n.rpg.chancein(a),s}return o(t,e),t.prototype.scan=function(){this.memory||this.privilege||this.node.remove(this),this.setimage("nodes/control.png"),this.tooltip="Control"},t}(t.Avatar)}),define("modules/cyberspace/avatar/entry",["exports","./avatar"],function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Entry=void 0;e.Entry=function(e){function t(r){n(this,t);var o=i(this,e.call(this,"nodes/core.png",r));return o.tooltip="Process",o}return r(t,e),t.prototype.scan=function(){this.setimage("nodes/entry.png"),this.tooltip="ICE entry"},t.prototype.click=function(){e.prototype.click.call(this)},t}(t.Avatar)}),define("modules/cyberspace/avatar/file",["exports","./avatar","../../rpg"],function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.File=void 0;e.File=function(e){function t(o){i(this,t);var a=r(this,e.call(this,"nodes/fileunscanned.png",o));return a.tooltip="Data",a.level=o.level+n.rpg.randomize(4),a.worthless=a.level<1||n.rpg.chancein(o.level+1),a.trap=!a.worthless&&n.rpg.chancein(60/o.level),a.protected=!a.worthless&&!a.trap&&n.rpg.chancein(21/o.level),a.worthless?a.level=0:a.protected&&a.level<o.level&&(a.level=o.level),a}return o(t,e),t.prototype.click=function(){e.prototype.click.call(this)},t.prototype.scan=function(){this.worthless?this.node.remove(this):this.protected?(this.setimage("nodes/fileprotected.png"),this.tooltip="Protected data"):this.trap?(this.setimage("nodes/filetrap.png"),this.tooltip="Trap data"):this.setimage("nodes/file.png")},t}(t.Avatar)}),define("modules/cyberspace/avatar/gateway",["exports","./avatar"],function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Gateway=void 0;e.Gateway=function(e){function t(r){n(this,t);var o=i(this,e.call(this,"nodes/gateway.png",r));return o.scanned=!0,o}return r(t,e),t}(t.Avatar)}),define("modules/cyberspace/avatar/map",["exports","./avatar"],function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Map=void 0;e.Map=function(e){function t(r){n(this,t);var o=i(this,e.call(this,"nodes/core.png",r));return o.tooltip="Process",o}return r(t,e),t.prototype.scan=function(){this.setimage("nodes/map.bmp"),this.tooltip="Map"},t.prototype.click=function(){this.system.reveal(),this.node.remove(this)},t}(t.Avatar)}),define("modules/cyberspace/avatar/player",["exports","./avatar","../console","../../character/character"],function(e,t,n,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Player=void 0;e.Player=function(e){function t(n){r(this,t);var a=o(this,e.call(this,"characters/"+i.hero.image+".png",n));return a.hero=i.hero.connect(),a.scanned=!0,a.tooltip=a.hero.name,n.player=a,a}return a(t,e),t.prototype.enter=function(t){return!!e.prototype.enter.call(this,t)&&(t.visited=!0,t.scan(),!0)},t}(t.Avatar)}),define("modules/cyberspace/avatar/terminal",["exports","./avatar"],function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Terminal=void 0;e.Terminal=function(e){function t(r){n(this,t);var o=i(this,e.call(this,"nodes/core.png",r));return o.tooltip="Process",o}return r(t,e),t.prototype.scan=function(){this.setimage("nodes/terminal.png"),this.tooltip="Terminal"},t.prototype.click=function(){e.prototype.click.call(this)},t}(t.Avatar)}),define("modules/cyberspace/node/cpu",["exports","../../rpg","./node","../avatar/alarm","../avatar/entry","../avatar/map","../avatar/terminal"],function(e,t,n,i,r,o,a){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Cpu=void 0;e.Cpu=function(e){function n(t,i,r){s(this,n);var o=c(this,e.call(this,t,i,r));return o.priority=2,o}return l(n,e),n.prototype.setmain=function(){this.enter(new i.Alarm(this.system)),this.enter(new r.Entry(this.system)),this.enter(new o.Map(this.system)),this.enter(new a.Terminal(this.system))},n.prototype.generate=function(){for(;0==this.avatars.length;)t.rpg.chancein(4)&&this.enter(new i.Alarm(this.system)),t.rpg.chancein(4)&&this.enter(new r.Entry(this.system)),t.rpg.chancein(4)&&this.enter(new o.Map(this.system)),t.rpg.chancein(4)&&this.enter(new a.Terminal(this.system))},n}(n.Node)}),define("modules/cyberspace/node/datastore",["exports","./node","../avatar/file","../../rpg"],function(e,t,n,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Datastore=void 0;e.Datastore=function(e){function t(n,i,a){r(this,t);var s=o(this,e.call(this,n,i,a));return s.priority=1,s}return a(t,e),t.prototype.generate=function(){for(var e=i.rpg.r(1,4),t=0;t<e;t++)this.enter(new n.File(this.system))},t}(t.Node)}),define("modules/cyberspace/node/interface",["exports","./node","../avatar/backdoor","../avatar/control","../../rpg"],function(e,t,n,i,r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Interface=void 0;e.Interface=function(e){function t(n,i,r){o(this,t);var s=a(this,e.call(this,n,i,r));return s.priority=1,s}return s(t,e),t.prototype.generate=function(){for(;0==this.avatars.length;)r.rpg.chancein(4)&&this.enter(new i.Control(this.system)),r.rpg.chancein(6)&&this.enter(new n.Backdoor(this.system))},t}(t.Node)}),define("modules/cyberspace/node/node",["exports","../../rpg","../../../environment"],function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Node=void 0;for(var r=function(e){return e&&e.__esModule?e:{default:e}}(n),o=[],a=0;a<r.default.nodesize;a++)for(var s=0;s<r.default.nodesize;s++)o.push([a,s]);e.Node=function(){function e(t,n,r){i(this,e),this.x=t,this.y=n,this.id=r.nodes.length,this.priority=0,this.system=r,this.avatars=[],this.visited=!1}return e.prototype.generate=function(){},e.prototype.getneighbors=function(){for(var e=[],t=[[-1,0],[1,0],[0,1],[0,-1]],n=0;n<t.length;n++){var i=t[n],r=this.system.getnode(this.x+i[0],this.y+i[1]);r&&e.push(r)}return e},e.prototype.getavatar=function(e,t){for(var n=this.avatars,i=Array.isArray(n),r=0,n=i?n:n[Symbol.iterator]();;){var o;if(i){if(r>=n.length)break;o=n[r++]}else{if(r=n.next(),r.done)break;o=r.value}var a=o;if(a.x==e&&a.y==t)return a}return null},e.prototype.remove=function(e){this.avatars.splice(this.avatars.indexOf(e),1)},e.prototype.enter=function(e){t.rpg.shuffle(o),console.log("#nodetiles "+JSON.stringify(o));for(var n=o,i=Array.isArray(n),r=0,n=i?n:n[Symbol.iterator]();;){var a;if(i){if(r>=n.length)break;a=n[r++]}else{if(r=n.next(),r.done)break;a=r.value}var s=a;if(!this.getavatar(s[0],s[1]))return e.node&&e.node.remove(e),e.x=s[0],e.y=s[1],e.node=this,this.avatars.push(e),!0}return!1},e.prototype.scan=function(){for(var e=t.rpg.shuffle(this.avatars.slice()),n=e,i=Array.isArray(n),r=0,n=i?n:n[Symbol.iterator]();;){var o;if(i){if(r>=n.length)break;o=n[r++]}else{if(r=n.next(),r.done)break;o=r.value}var a=o;a||alert(JSON.stringify(e)),a.scanned||(a.scan(),a.scanned=!0)}return!0},e}()}),define("modules/cyberspace/node/portal",["exports","./node","../avatar/gateway"],function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Portal=void 0;e.Portal=function(e){function t(n,o,a){i(this,t);var s=r(this,e.call(this,n,o,a));return s.priority=2,s}return o(t,e),t.prototype.generate=function(){this.enter(new n.Gateway(this.system))},t}(t.Node)}),define("aurelia-templating-resources/compose",["exports","aurelia-dependency-injection","aurelia-task-queue","aurelia-templating","aurelia-pal"],function(e,t,n,i,r){"use strict";function o(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function a(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}function s(e,t){return Object.assign(t,{bindingContext:e.bindingContext,overrideContext:e.overrideContext,owningView:e.owningView,container:e.container,viewSlot:e.viewSlot,viewResources:e.viewResources,currentController:e.currentController,host:e.element,swapOrder:e.swapOrder})}function c(e,t){e.currentInstruction=null,e.compositionEngine.compose(t).then(function(t){e.currentController=t,e.currentViewModel=t?t.viewModel:null})}Object.defineProperty(e,"__esModule",{value:!0}),e.Compose=void 0;var l,u,d,p,h,f,v,g;e.Compose=(l=(0,i.customElement)("compose"),u=(0,t.inject)(r.DOM.Element,t.Container,i.CompositionEngine,i.ViewSlot,i.ViewResources,n.TaskQueue),l(d=(0,i.noView)(d=u((p=function(){function e(e,t,n,i,r,a){o(this,"model",h,this),o(this,"view",f,this),o(this,"viewModel",v,this),o(this,"swapOrder",g,this),this.element=e,this.container=t,this.compositionEngine=n,this.viewSlot=i,this.viewResources=r,this.taskQueue=a,this.currentController=null,this.currentViewModel=null}return e.prototype.created=function(e){this.owningView=e},e.prototype.bind=function(e,t){this.bindingContext=e,this.overrideContext=t,c(this,s(this,{view:this.view,viewModel:this.viewModel,model:this.model}))},e.prototype.unbind=function(e,t){this.bindingContext=null,this.overrideContext=null;this.viewSlot.removeAll(!0,!0)},e.prototype.modelChanged=function(e,t){var n=this;if(this.currentInstruction)return void(this.currentInstruction.model=e);this.taskQueue.queueMicroTask(function(){if(n.currentInstruction)return void(n.currentInstruction.model=e);var t=n.currentViewModel;t&&"function"==typeof t.activate&&t.activate(e)})},e.prototype.viewChanged=function(e,t){var n=this,i=s(this,{view:e,viewModel:this.currentViewModel||this.viewModel,model:this.model});if(this.currentInstruction)return void(this.currentInstruction=i);this.currentInstruction=i,this.taskQueue.queueMicroTask(function(){return c(n,n.currentInstruction)})},e.prototype.viewModelChanged=function(e,t){var n=this,i=s(this,{viewModel:e,view:this.view,model:this.model});if(this.currentInstruction)return void(this.currentInstruction=i);this.currentInstruction=i,this.taskQueue.queueMicroTask(function(){return c(n,n.currentInstruction)})},e}(),h=a(p.prototype,"model",[i.bindable],{enumerable:!0,initializer:null}),f=a(p.prototype,"view",[i.bindable],{enumerable:!0,initializer:null}),v=a(p.prototype,"viewModel",[i.bindable],{enumerable:!0,initializer:null}),g=a(p.prototype,"swapOrder",[i.bindable],{enumerable:!0,initializer:null}),d=p))||d)||d)||d)}),define("aurelia-templating-resources/if",["exports","aurelia-templating","aurelia-dependency-injection"],function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.If=void 0;var i,r,o;e.If=(i=(0,t.customAttribute)("if"),r=(0,n.inject)(t.BoundViewFactory,t.ViewSlot),i(o=(0,t.templateController)(o=r(o=function(){function e(e,t){this.viewFactory=e,this.viewSlot=t,this.showing=!1,this.view=null,this.bindingContext=null,this.overrideContext=null}return e.prototype.bind=function(e,t){this.bindingContext=e,this.overrideContext=t,this.valueChanged(this.value)},e.prototype.valueChanged=function(e){var t=this;if(this.__queuedChanges)return void this.__queuedChanges.push(e);var n=this._runValueChanged(e);n instanceof Promise&&function(){var e=t.__queuedChanges=[],i=function n(){if(!e.length)return void(t.__queuedChanges=void 0);(t._runValueChanged(e.shift())||Promise.resolve()).then(n)};n.then(i)}()},e.prototype._runValueChanged=function(e){var t=this;if(!e){var n=void 0;return null!==this.view&&this.showing&&(n=this.viewSlot.remove(this.view),n instanceof Promise?n.then(function(){return t.view.unbind()}):this.view.unbind()),this.showing=!1,n}if(null===this.view&&(this.view=this.viewFactory.create()),this.view.isBound||this.view.bind(this.bindingContext,this.overrideContext),!this.showing)return this.showing=!0,this.viewSlot.add(this.view)},e.prototype.unbind=function(){null!==this.view&&(this.view.unbind(),this.viewFactory.isCaching&&(this.showing&&(this.showing=!1,this.viewSlot.remove(this.view,!0,!0)),this.view.returnToCache(),this.view=null))},e}())||o)||o)||o)}),define("aurelia-templating-resources/with",["exports","aurelia-dependency-injection","aurelia-templating","aurelia-binding"],function(e,t,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.With=void 0;var r,o,a;e.With=(r=(0,n.customAttribute)("with"),o=(0,t.inject)(n.BoundViewFactory,n.ViewSlot),r(a=(0,n.templateController)(a=o(a=function(){function e(e,t){this.viewFactory=e,this.viewSlot=t,this.parentOverrideContext=null,this.view=null}return e.prototype.bind=function(e,t){this.parentOverrideContext=t,this.valueChanged(this.value)},e.prototype.valueChanged=function(e){var t=(0,i.createOverrideContext)(e,this.parentOverrideContext);this.view?this.view.bind(e,t):(this.view=this.viewFactory.create(),this.view.bind(e,t),this.viewSlot.add(this.view))},e.prototype.unbind=function(){this.parentOverrideContext=null,this.view&&this.view.unbind()},e}())||a)||a)||a)}),define("aurelia-templating-resources/repeat",["exports","aurelia-dependency-injection","aurelia-binding","aurelia-templating","./repeat-strategy-locator","./repeat-utilities","./analyze-view-factory","./abstract-repeater"],function(e,t,n,i,r,o,a,s){"use strict";function c(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function d(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}Object.defineProperty(e,"__esModule",{value:!0}),e.Repeat=void 0;var p,h,f,v,g,y,m,b;e.Repeat=(p=(0,i.customAttribute)("repeat"),h=(0,t.inject)(i.BoundViewFactory,i.TargetInstruction,i.ViewSlot,i.ViewResources,n.ObserverLocator,r.RepeatStrategyLocator),p(f=(0,i.templateController)(f=h((v=function(e){function t(t,n,i,r,s,u){var d=l(this,e.call(this,{local:"item",viewsRequireLifecycle:(0,a.viewsRequireLifecycle)(t)}));return c(d,"items",g,d),c(d,"local",y,d),c(d,"key",m,d),c(d,"value",b,d),d.viewFactory=t,d.instruction=n,d.viewSlot=i,d.lookupFunctions=r.lookupFunctions,d.observerLocator=s,d.key="key",d.value="value",d.strategyLocator=u,d.ignoreMutation=!1,d.sourceExpression=(0,o.getItemsSourceExpression)(d.instruction,"repeat.for"),d.isOneTime=(0,o.isOneTime)(d.sourceExpression),
d.viewsRequireLifecycle=(0,a.viewsRequireLifecycle)(t),d}return u(t,e),t.prototype.call=function(e,t){this[e](this.items,t)},t.prototype.bind=function(e,t){this.scope={bindingContext:e,overrideContext:t},this.matcherBinding=this._captureAndRemoveMatcherBinding(),this.itemsChanged()},t.prototype.unbind=function(){this.scope=null,this.items=null,this.matcherBinding=null,this.viewSlot.removeAll(!0),this._unsubscribeCollection()},t.prototype._unsubscribeCollection=function(){this.collectionObserver&&(this.collectionObserver.unsubscribe(this.callContext,this),this.collectionObserver=null,this.callContext=null)},t.prototype.itemsChanged=function(){if(this._unsubscribeCollection(),this.scope){var e=this.items;if(this.strategy=this.strategyLocator.getStrategy(e),!this.strategy)throw new Error("Value for '"+this.sourceExpression+"' is non-repeatable");this.isOneTime||this._observeInnerCollection()||this._observeCollection(),this.strategy.instanceChanged(this,e)}},t.prototype._getInnerCollection=function(){var e=(0,o.unwrapExpression)(this.sourceExpression);return e?e.evaluate(this.scope,null):null},t.prototype.handleCollectionMutated=function(e,t){this.collectionObserver&&this.strategy.instanceMutated(this,e,t)},t.prototype.handleInnerCollectionMutated=function(e,t){var n=this;if(this.collectionObserver&&!this.ignoreMutation){this.ignoreMutation=!0;var i=this.sourceExpression.evaluate(this.scope,this.lookupFunctions);this.observerLocator.taskQueue.queueMicroTask(function(){return n.ignoreMutation=!1}),i===this.items?this.itemsChanged():this.items=i}},t.prototype._observeInnerCollection=function(){var e=this._getInnerCollection(),t=this.strategyLocator.getStrategy(e);return!!t&&(this.collectionObserver=t.getCollectionObserver(this.observerLocator,e),!!this.collectionObserver&&(this.callContext="handleInnerCollectionMutated",this.collectionObserver.subscribe(this.callContext,this),!0))},t.prototype._observeCollection=function(){var e=this.items;this.collectionObserver=this.strategy.getCollectionObserver(this.observerLocator,e),this.collectionObserver&&(this.callContext="handleCollectionMutated",this.collectionObserver.subscribe(this.callContext,this))},t.prototype._captureAndRemoveMatcherBinding=function(){if(this.viewFactory.viewFactory)for(var e=this.viewFactory.viewFactory.instructions,t=Object.keys(e),n=0;n<t.length;n++){var i=e[t[n]].expressions;if(i)for(;n<i.length;n++)if("matcher"===i[0].targetProperty){var r=i[0];return i.splice(0,1),r}}},t.prototype.viewCount=function(){return this.viewSlot.children.length},t.prototype.views=function(){return this.viewSlot.children},t.prototype.view=function(e){return this.viewSlot.children[e]},t.prototype.matcher=function(){return this.matcherBinding?this.matcherBinding.sourceExpression.evaluate(this.scope,this.matcherBinding.lookupFunctions):null},t.prototype.addView=function(e,t){var n=this.viewFactory.create();n.bind(e,t),this.viewSlot.add(n)},t.prototype.insertView=function(e,t,n){var i=this.viewFactory.create();i.bind(t,n),this.viewSlot.insert(e,i)},t.prototype.moveView=function(e,t){this.viewSlot.move(e,t)},t.prototype.removeAllViews=function(e,t){return this.viewSlot.removeAll(e,t)},t.prototype.removeViews=function(e,t,n){return this.viewSlot.removeMany(e,t,n)},t.prototype.removeView=function(e,t,n){return this.viewSlot.removeAt(e,t,n)},t.prototype.updateBindings=function(e){for(var t=e.bindings.length;t--;)(0,o.updateOneTimeBinding)(e.bindings[t]);for(t=e.controllers.length;t--;)for(var n=e.controllers[t].boundProperties.length;n--;){var i=e.controllers[t].boundProperties[n].binding;(0,o.updateOneTimeBinding)(i)}},t}(s.AbstractRepeater),g=d(v.prototype,"items",[i.bindable],{enumerable:!0,initializer:null}),y=d(v.prototype,"local",[i.bindable],{enumerable:!0,initializer:null}),m=d(v.prototype,"key",[i.bindable],{enumerable:!0,initializer:null}),b=d(v.prototype,"value",[i.bindable],{enumerable:!0,initializer:null}),f=v))||f)||f)||f)}),define("aurelia-templating-resources/repeat-strategy-locator",["exports","./null-repeat-strategy","./array-repeat-strategy","./map-repeat-strategy","./set-repeat-strategy","./number-repeat-strategy"],function(e,t,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RepeatStrategyLocator=void 0;e.RepeatStrategyLocator=function(){function e(){this.matchers=[],this.strategies=[],this.addStrategy(function(e){return null===e||void 0===e},new t.NullRepeatStrategy),this.addStrategy(function(e){return e instanceof Array},new n.ArrayRepeatStrategy),this.addStrategy(function(e){return e instanceof Map},new i.MapRepeatStrategy),this.addStrategy(function(e){return e instanceof Set},new r.SetRepeatStrategy),this.addStrategy(function(e){return"number"==typeof e},new o.NumberRepeatStrategy)}return e.prototype.addStrategy=function(e,t){this.matchers.push(e),this.strategies.push(t)},e.prototype.getStrategy=function(e){for(var t=this.matchers,n=0,i=t.length;n<i;++n)if(t[n](e))return this.strategies[n];return null},e}()}),define("aurelia-templating-resources/null-repeat-strategy",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.NullRepeatStrategy=function(){function e(){}return e.prototype.instanceChanged=function(e,t){e.removeAllViews(!0)},e.prototype.getCollectionObserver=function(e,t){},e}()}),define("aurelia-templating-resources/array-repeat-strategy",["exports","./repeat-utilities","aurelia-binding"],function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ArrayRepeatStrategy=void 0;e.ArrayRepeatStrategy=function(){function e(){}return e.prototype.getCollectionObserver=function(e,t){return e.getArrayObserver(t)},e.prototype.instanceChanged=function(e,n){var i=this,r=n.length;if(!n||0===r)return void e.removeAllViews(!0,!e.viewsRequireLifecycle);var o=e.views(),a=o.length;if(0===a)return void this._standardProcessInstanceChanged(e,n);e.viewsRequireLifecycle?function(){for(var s=o.slice(0),c=e.local,l=e.matcher(),u=[],d=[],p=0;p<a;p++){var h=s[p],f=h.bindingContext[c];(0,t.indexOf)(n,f,l)===-1?d.push(h):u.push(f)}var v=void 0,g=void 0;u.length>0?(g=e.removeViews(d,!0,!e.viewsRequireLifecycle),v=function(){for(var a=0;a<r;a++){var s=n[a],c=(0,t.indexOf)(u,s,l,a),d=void 0;if(c===-1){var p=(0,t.createFullOverrideContext)(e,n[a],a,r);e.insertView(a,p.bindingContext,p),u.splice(a,0,void 0)}else c===a?(d=o[c],u[c]=void 0):(d=o[c],e.moveView(c,a),u.splice(c,1),u.splice(a,0,void 0));d&&(0,t.updateOverrideContext)(d.overrideContext,a,r)}i._inPlaceProcessItems(e,n)}):(g=e.removeAllViews(!0,!e.viewsRequireLifecycle),v=function(){return i._standardProcessInstanceChanged(e,n)}),g instanceof Promise?g.then(v):v()}():this._inPlaceProcessItems(e,n)},e.prototype._standardProcessInstanceChanged=function(e,n){for(var i=0,r=n.length;i<r;i++){var o=(0,t.createFullOverrideContext)(e,n[i],i,r);e.addView(o.bindingContext,o)}},e.prototype._inPlaceProcessItems=function(e,n){for(var i=n.length,r=e.viewCount();r>i;)r--,e.removeView(r,!0,!e.viewsRequireLifecycle);for(var o=e.local,a=0;a<r;a++){var s=e.view(a),c=a===i-1,l=0!==a&&!c;s.bindingContext[o]===n[a]&&s.overrideContext.$middle===l&&s.overrideContext.$last===c||(s.bindingContext[o]=n[a],s.overrideContext.$middle=l,s.overrideContext.$last=c,e.updateBindings(s))}for(var u=r;u<i;u++){var d=(0,t.createFullOverrideContext)(e,n[u],u,i);e.addView(d.bindingContext,d)}},e.prototype.instanceMutated=function(e,t,i){var r=this;if(e.__queuedSplices){for(var o=0,a=i.length;o<a;++o){var s=i[o],c=s.index,l=s.removed,u=s.addedCount;(0,n.mergeSplice)(e.__queuedSplices,c,l,u)}return void(e.__array=t.slice(0))}var d=this._runSplices(e,t.slice(0),i);d instanceof Promise&&function(){var t=e.__queuedSplices=[],n=function n(){if(!t.length)return e.__queuedSplices=void 0,void(e.__array=void 0);var i=r._runSplices(e,e.__array,t)||Promise.resolve();t=e.__queuedSplices=[],i.then(n)};d.then(n)}()},e.prototype._runSplices=function(e,n,i){for(var r=this,o=0,a=[],s=0,c=i.length;s<c;++s){for(var l=i[s],u=l.removed,d=0,p=u.length;d<p;++d){var h=e.removeView(l.index+o+a.length,!0);h instanceof Promise&&a.push(h)}o-=l.addedCount}if(a.length>0)return Promise.all(a).then(function(){var o=r._handleAddedSplices(e,n,i);(0,t.updateOverrideContexts)(e.views(),o)});var f=this._handleAddedSplices(e,n,i);(0,t.updateOverrideContexts)(e.views(),f)},e.prototype._handleAddedSplices=function(e,n,i){for(var r=void 0,o=void 0,a=n.length,s=0,c=i.length;s<c;++s){var l=i[s],u=r=l.index,d=l.index+l.addedCount;for((void 0===o||null===o||o>l.index)&&(o=r);u<d;++u){var p=(0,t.createFullOverrideContext)(e,n[u],u,a);e.insertView(u,p.bindingContext,p)}}return o},e}()}),define("aurelia-templating-resources/repeat-utilities",["exports","aurelia-binding"],function(e,t){"use strict";function n(e,t){var n=e.length;for(t>0&&(t-=1);t<n;++t)r(e[t].overrideContext,t,n)}function i(e,n,i,o,a){var s={},c=(0,t.createOverrideContext)(s,e.scope.overrideContext);return void 0!==a?(s[e.key]=a,s[e.value]=n):s[e.local]=n,r(c,i,o),c}function r(e,t,n){var i=0===t,r=t===n-1,o=t%2==0;e.$index=t,e.$first=i,e.$last=r,e.$middle=!(i||r),e.$odd=!o,e.$even=o}function o(e,t){return e.behaviorInstructions.filter(function(e){return e.originalAttrName===t})[0].attributes.items.sourceExpression}function a(e){for(var n=!1;e instanceof t.BindingBehavior;)e=e.expression;for(;e instanceof t.ValueConverter;)e=e.expression,n=!0;return n?e:null}function s(e){for(;e instanceof t.BindingBehavior;){if("oneTime"===e.name)return!0;e=e.expression}return!1}function c(e){e.call&&e.mode===u?e.call(t.sourceContext):e.updateOneTimeBindings&&e.updateOneTimeBindings()}function l(e,t,n,i){if(!n)return e.indexOf(t);for(var r=e.length,o=i||0;o<r;o++)if(n(e[o],t))return o;return-1}Object.defineProperty(e,"__esModule",{value:!0}),e.updateOverrideContexts=n,e.createFullOverrideContext=i,e.updateOverrideContext=r,e.getItemsSourceExpression=o,e.unwrapExpression=a,e.isOneTime=s,e.updateOneTimeBinding=c,e.indexOf=l;var u=t.bindingMode.oneTime}),define("aurelia-templating-resources/map-repeat-strategy",["exports","./repeat-utilities"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapRepeatStrategy=void 0;e.MapRepeatStrategy=function(){function e(){}return e.prototype.getCollectionObserver=function(e,t){return e.getMapObserver(t)},e.prototype.instanceChanged=function(e,t){var n=this,i=e.removeAllViews(!0,!e.viewsRequireLifecycle);if(i instanceof Promise)return void i.then(function(){return n._standardProcessItems(e,t)});this._standardProcessItems(e,t)},e.prototype._standardProcessItems=function(e,n){var i=0,r=void 0;n.forEach(function(o,a){r=(0,t.createFullOverrideContext)(e,o,i,n.size,a),e.addView(r.bindingContext,r),++i})},e.prototype.instanceMutated=function(e,n,i){var r=void 0,o=void 0,a=void 0,s=void 0,c=void 0,l=void 0,u=[],d=void 0;for(o=0,a=i.length;o<a;++o)switch(l=i[o],r=l.key,l.type){case"update":c=this._getViewIndexByKey(e,r),d=e.removeView(c,!0,!e.viewsRequireLifecycle),d instanceof Promise&&u.push(d),s=(0,t.createFullOverrideContext)(e,n.get(r),c,n.size,r),e.insertView(c,s.bindingContext,s);break;case"add":s=(0,t.createFullOverrideContext)(e,n.get(r),n.size-1,n.size,r),e.insertView(n.size-1,s.bindingContext,s);break;case"delete":if(void 0===l.oldValue)return;c=this._getViewIndexByKey(e,r),d=e.removeView(c,!0,!e.viewsRequireLifecycle),d instanceof Promise&&u.push(d);break;case"clear":e.removeAllViews(!0,!e.viewsRequireLifecycle);break;default:continue}u.length>0?Promise.all(u).then(function(){(0,t.updateOverrideContexts)(e.views(),0)}):(0,t.updateOverrideContexts)(e.views(),0)},e.prototype._getViewIndexByKey=function(e,t){var n=void 0,i=void 0,r=void 0;for(n=0,i=e.viewCount();n<i;++n)if(r=e.view(n),r.bindingContext[e.key]===t)return n},e}()}),define("aurelia-templating-resources/set-repeat-strategy",["exports","./repeat-utilities"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SetRepeatStrategy=void 0;e.SetRepeatStrategy=function(){function e(){}return e.prototype.getCollectionObserver=function(e,t){return e.getSetObserver(t)},e.prototype.instanceChanged=function(e,t){var n=this,i=e.removeAllViews(!0,!e.viewsRequireLifecycle);if(i instanceof Promise)return void i.then(function(){return n._standardProcessItems(e,t)});this._standardProcessItems(e,t)},e.prototype._standardProcessItems=function(e,n){var i=0,r=void 0;n.forEach(function(o){r=(0,t.createFullOverrideContext)(e,o,i,n.size),e.addView(r.bindingContext,r),++i})},e.prototype.instanceMutated=function(e,n,i){var r=void 0,o=void 0,a=void 0,s=void 0,c=void 0,l=void 0,u=[],d=void 0;for(o=0,a=i.length;o<a;++o)switch(l=i[o],r=l.value,l.type){case"add":s=(0,t.createFullOverrideContext)(e,r,n.size-1,n.size),e.insertView(n.size-1,s.bindingContext,s);break;case"delete":c=this._getViewIndexByValue(e,r),d=e.removeView(c,!0,!e.viewsRequireLifecycle),d instanceof Promise&&u.push(d);break;case"clear":e.removeAllViews(!0,!e.viewsRequireLifecycle);break;default:continue}u.length>0?Promise.all(u).then(function(){(0,t.updateOverrideContexts)(e.views(),0)}):(0,t.updateOverrideContexts)(e.views(),0)},e.prototype._getViewIndexByValue=function(e,t){var n=void 0,i=void 0,r=void 0;for(n=0,i=e.viewCount();n<i;++n)if(r=e.view(n),r.bindingContext[e.local]===t)return n},e}()}),define("aurelia-templating-resources/number-repeat-strategy",["exports","./repeat-utilities"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NumberRepeatStrategy=void 0;e.NumberRepeatStrategy=function(){function e(){}return e.prototype.getCollectionObserver=function(){return null},e.prototype.instanceChanged=function(e,t){var n=this,i=e.removeAllViews(!0,!e.viewsRequireLifecycle);if(i instanceof Promise)return void i.then(function(){return n._standardProcessItems(e,t)});this._standardProcessItems(e,t)},e.prototype._standardProcessItems=function(e,n){var i=e.viewCount(),r=void 0,o=void 0,a=void 0,s=void 0;if(n=Math.floor(n),(s=i-n)>0)for(s>i&&(s=i),r=0,o=s;r<o;++r)e.removeView(i-(r+1),!0,!e.viewsRequireLifecycle);else{for(r=i,o=n;r<o;++r)a=(0,t.createFullOverrideContext)(e,r,r,o),e.addView(a.bindingContext,a);(0,t.updateOverrideContexts)(e.views(),0)}},e}()}),define("aurelia-templating-resources/analyze-view-factory",["exports"],function(e){"use strict";function t(e){var t=e.type,n=null!==t.elementName?t.elementName:t.attributeName;return r.indexOf(n)===-1&&(t.handlesAttached||t.handlesBind||t.handlesCreated||t.handlesDetached||t.handlesUnbind)||t.viewFactory&&i(t.viewFactory)||e.viewFactory&&i(e.viewFactory)}function n(e){var n=e.behaviorInstructions;if(n)for(var r=n.length;r--;)if(t(n[r]))return!0;return e.viewFactory&&i(e.viewFactory)}function i(e){if("_viewsRequireLifecycle"in e)return e._viewsRequireLifecycle;if(e._viewsRequireLifecycle=!1,e.viewFactory)return e._viewsRequireLifecycle=i(e.viewFactory),e._viewsRequireLifecycle;if(e.template.querySelector(".au-animate"))return e._viewsRequireLifecycle=!0,!0;for(var t in e.instructions)if(n(e.instructions[t]))return e._viewsRequireLifecycle=!0,!0;return e._viewsRequireLifecycle=!1,!1}Object.defineProperty(e,"__esModule",{value:!0}),e.viewsRequireLifecycle=i;var r=e.lifecycleOptionalBehaviors=["focus","if","repeat","show","with"]}),define("aurelia-templating-resources/abstract-repeater",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.AbstractRepeater=function(){function e(e){Object.assign(this,{local:"items",viewsRequireLifecycle:!0},e)}return e.prototype.viewCount=function(){throw new Error("subclass must implement `viewCount`")},e.prototype.views=function(){throw new Error("subclass must implement `views`")},e.prototype.view=function(e){throw new Error("subclass must implement `view`")},e.prototype.matcher=function(){throw new Error("subclass must implement `matcher`")},e.prototype.addView=function(e,t){throw new Error("subclass must implement `addView`")},e.prototype.insertView=function(e,t,n){throw new Error("subclass must implement `insertView`")},e.prototype.moveView=function(e,t){throw new Error("subclass must implement `moveView`")},e.prototype.removeAllViews=function(e,t){throw new Error("subclass must implement `removeAllViews`")},e.prototype.removeViews=function(e,t,n){throw new Error("subclass must implement `removeView`")},e.prototype.removeView=function(e,t,n){throw new Error("subclass must implement `removeView`")},e.prototype.updateBindings=function(e){throw new Error("subclass must implement `updateBindings`")},e}()}),define("aurelia-templating-resources/show",["exports","aurelia-dependency-injection","aurelia-templating","aurelia-pal","./aurelia-hide-style"],function(e,t,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Show=void 0;var o,a,s;e.Show=(o=(0,n.customAttribute)("show"),a=(0,t.inject)(i.DOM.Element,n.Animator,t.Optional.of(i.DOM.boundary,!0)),o(s=a(s=function(){function e(e,t,n){this.element=e,this.animator=t,this.domBoundary=n}return e.prototype.created=function(){(0,r.injectAureliaHideStyleAtBoundary)(this.domBoundary)},e.prototype.valueChanged=function(e){e?this.animator.removeClass(this.element,r.aureliaHideClassName):this.animator.addClass(this.element,r.aureliaHideClassName)},e.prototype.bind=function(e){this.valueChanged(this.value)},e}())||s)||s)}),define("aurelia-templating-resources/aurelia-hide-style",["exports","aurelia-pal"],function(e,t){"use strict";function n(){t.DOM.injectStyles(o)}function i(e){t.FEATURE.shadowDOM&&e&&!e.hasAureliaHideStyle&&(e.hasAureliaHideStyle=!0,t.DOM.injectStyles(o,e))}Object.defineProperty(e,"__esModule",{value:!0}),e.aureliaHideClassName=void 0,e.injectAureliaHideStyleAtHead=n,e.injectAureliaHideStyleAtBoundary=i;var r=e.aureliaHideClassName="aurelia-hide",o="."+r+" { display:none !important; }"}),define("aurelia-templating-resources/hide",["exports","aurelia-dependency-injection","aurelia-templating","aurelia-pal","./aurelia-hide-style"],function(e,t,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Hide=void 0;var o,a,s;e.Hide=(o=(0,n.customAttribute)("hide"),a=(0,t.inject)(i.DOM.Element,n.Animator,t.Optional.of(i.DOM.boundary,!0)),o(s=a(s=function(){function e(e,t,n){this.element=e,this.animator=t,this.domBoundary=n}return e.prototype.created=function(){(0,r.injectAureliaHideStyleAtBoundary)(this.domBoundary)},e.prototype.valueChanged=function(e){e?this.animator.addClass(this.element,r.aureliaHideClassName):this.animator.removeClass(this.element,r.aureliaHideClassName)},e.prototype.bind=function(e){this.valueChanged(this.value)},e}())||s)||s)}),define("aurelia-templating-resources/sanitize-html",["exports","aurelia-binding","aurelia-dependency-injection","./html-sanitizer"],function(e,t,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SanitizeHTMLValueConverter=void 0;var r,o,a;e.SanitizeHTMLValueConverter=(r=(0,t.valueConverter)("sanitizeHTML"),o=(0,n.inject)(i.HTMLSanitizer),r(a=o(a=function(){function e(e){this.sanitizer=e}return e.prototype.toView=function(e){return null===e||void 0===e?null:this.sanitizer.sanitize(e)},e}())||a)||a)}),define("aurelia-templating-resources/html-sanitizer",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.HTMLSanitizer=function(){function e(){}return e.prototype.sanitize=function(e){return e.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"")},e}()}),define("aurelia-templating-resources/replaceable",["exports","aurelia-dependency-injection","aurelia-templating"],function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Replaceable=void 0;var i,r,o;e.Replaceable=(i=(0,n.customAttribute)("replaceable"),r=(0,t.inject)(n.BoundViewFactory,n.ViewSlot),i(o=(0,n.templateController)(o=r(o=function(){function e(e,t){this.viewFactory=e,this.viewSlot=t,this.view=null}return e.prototype.bind=function(e,t){null===this.view&&(this.view=this.viewFactory.create(),this.viewSlot.add(this.view)),this.view.bind(e,t)},e.prototype.unbind=function(){this.view.unbind()},e}())||o)||o)||o)}),define("aurelia-templating-resources/focus",["exports","aurelia-templating","aurelia-binding","aurelia-dependency-injection","aurelia-task-queue","aurelia-pal"],function(e,t,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Focus=void 0;var a,s,c;e.Focus=(a=(0,t.customAttribute)("focus",n.bindingMode.twoWay),s=(0,i.inject)(o.DOM.Element,r.TaskQueue),a(c=s(c=function(){function e(e,t){var n=this;this.element=e,this.taskQueue=t,this.isAttached=!1,this.needsApply=!1,this.focusListener=function(e){n.value=!0},this.blurListener=function(e){o.DOM.activeElement!==n.element&&(n.value=!1)}}return e.prototype.valueChanged=function(e){this.isAttached?this._apply():this.needsApply=!0},e.prototype._apply=function(){var e=this;this.value?this.taskQueue.queueMicroTask(function(){e.value&&e.element.focus()}):this.element.blur()},e.prototype.attached=function(){this.isAttached=!0,this.needsApply&&(this.needsApply=!1,this._apply()),this.element.addEventListener("focus",this.focusListener),this.element.addEventListener("blur",this.blurListener)},e.prototype.detached=function(){this.isAttached=!1,this.element.removeEventListener("focus",this.focusListener),this.element.removeEventListener("blur",this.blurListener)},e}())||c)||c)}),define("aurelia-templating-resources/css-resource",["exports","aurelia-templating","aurelia-loader","aurelia-dependency-injection","aurelia-path","aurelia-pal"],function(e,t,n,i,r,o){"use strict";function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function c(e,t){if("string"!=typeof t)throw new Error("Failed loading required CSS file: "+e);return t.replace(u,function(t,n){var i=n.charAt(0);return"'"!==i&&'"'!==i||(n=n.substr(1,n.length-2)),"url('"+(0,r.relativeToFile)(n,e)+"')"})}function l(e){var n;return(0,t.resource)(new d(e))(n=function(e){function t(){return a(this,e.apply(this,arguments))}return s(t,e),t}(p))||n}Object.defineProperty(e,"__esModule",{value:!0}),e._createCSSResource=l;var u=/url\((?!['"]data)([^)]+)\)/gi,d=function(){function e(e){this.address=e,this._scoped=null,this._global=!1,this._alreadyGloballyInjected=!1}return e.prototype.initialize=function(e,t){this._scoped=new t(this)},e.prototype.register=function(e,t){"scoped"===t?e.registerViewEngineHooks(this._scoped):this._global=!0},e.prototype.load=function(e){var t=this;return e.get(n.Loader).loadText(this.address).catch(function(e){return null}).then(function(e){e=c(t.address,e),t._scoped.css=e,t._global&&(t._alreadyGloballyInjected=!0,o.DOM.injectStyles(e))})},e}(),p=function(){function e(e){this.owner=e,this.css=null}return e.prototype.beforeCompile=function(e,t,n){if(n.targetShadowDOM)o.DOM.injectStyles(this.css,e,!0);else if(o.FEATURE.scopedCSS){var i=o.DOM.injectStyles(this.css,e,!0);i.setAttribute("scoped","scoped")}else this.owner._alreadyGloballyInjected||(o.DOM.injectStyles(this.css),this.owner._alreadyGloballyInjected=!0)},e}()}),define("aurelia-templating-resources/attr-binding-behavior",["exports","aurelia-binding"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AttrBindingBehavior=void 0;e.AttrBindingBehavior=function(){function e(){}return e.prototype.bind=function(e,n){e.targetObserver=new t.DataAttributeObserver(e.target,e.targetProperty)},e.prototype.unbind=function(e,t){},e}()}),define("aurelia-templating-resources/binding-mode-behaviors",["exports","aurelia-binding","aurelia-metadata"],function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TwoWayBindingBehavior=e.OneWayBindingBehavior=e.OneTimeBindingBehavior=void 0;var i,r,o,a={bind:function(e,t,n){e.originalMode=e.mode,e.mode=this.mode},unbind:function(e,t){e.mode=e.originalMode,e.originalMode=null}};e.OneTimeBindingBehavior=(0,n.mixin)(a)(i=function(){this.mode=t.bindingMode.oneTime})||i,e.OneWayBindingBehavior=(0,n.mixin)(a)(r=function(){this.mode=t.bindingMode.oneWay})||r,e.TwoWayBindingBehavior=(0,n.mixin)(a)(o=function(){this.mode=t.bindingMode.twoWay})||o}),define("aurelia-templating-resources/throttle-binding-behavior",["exports","aurelia-binding"],function(e,t){"use strict";function n(e){var t=this,n=this.throttleState,i=+new Date-n.last;if(i>=n.delay)return clearTimeout(n.timeoutId),n.timeoutId=null,n.last=+new Date,void this.throttledMethod(e);n.newValue=e,null===n.timeoutId&&(n.timeoutId=setTimeout(function(){n.timeoutId=null,n.last=+new Date,t.throttledMethod(n.newValue)},n.delay-i))}Object.defineProperty(e,"__esModule",{value:!0}),e.ThrottleBindingBehavior=void 0;e.ThrottleBindingBehavior=function(){function e(){}return e.prototype.bind=function(e,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,o="updateTarget";e.callSource?o="callSource":e.updateSource&&e.mode===t.bindingMode.twoWay&&(o="updateSource"),e.throttledMethod=e[o],e.throttledMethod.originalName=o,e[o]=n,e.throttleState={delay:r,last:0,timeoutId:null}},e.prototype.unbind=function(e,t){e[e.throttledMethod.originalName]=e.throttledMethod,e.throttledMethod=null,clearTimeout(e.throttleState.timeoutId),e.throttleState=null},e}()}),define("aurelia-templating-resources/debounce-binding-behavior",["exports","aurelia-binding"],function(e,t){"use strict";function n(e){var t=this,n=this.debounceState;if(n.immediate)return n.immediate=!1,void this.debouncedMethod(e);clearTimeout(n.timeoutId),n.timeoutId=setTimeout(function(){return t.debouncedMethod(e)},n.delay)}Object.defineProperty(e,"__esModule",{value:!0}),e.DebounceBindingBehavior=void 0;e.DebounceBindingBehavior=function(){function e(){}return e.prototype.bind=function(e,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,o="updateTarget";e.callSource?o="callSource":e.updateSource&&e.mode===t.bindingMode.twoWay&&(o="updateSource"),e.debouncedMethod=e[o],e.debouncedMethod.originalName=o,e[o]=n,e.debounceState={delay:r,timeoutId:null,immediate:"updateTarget"===o}},e.prototype.unbind=function(e,t){e[e.debouncedMethod.originalName]=e.debouncedMethod,e.debouncedMethod=null,clearTimeout(e.debounceState.timeoutId),e.debounceState=null},e}()}),define("aurelia-templating-resources/self-binding-behavior",["exports"],function(e){"use strict";function t(e){return e.path&&e.path[0]||e.deepPath&&e.deepPath[0]||e.target}function n(e){var n=t(e);this.target===n&&this.selfEventCallSource(e)}Object.defineProperty(e,"__esModule",{value:!0});e.SelfBindingBehavior=function(){function e(){}return e.prototype.bind=function(e,t){if(!e.callSource||!e.targetEvent)throw new Error("Self binding behavior only supports event.");e.selfEventCallSource=e.callSource,e.callSource=n},e.prototype.unbind=function(e,t){e.callSource=e.selfEventCallSource,e.selfEventCallSource=null},e}()}),define("aurelia-templating-resources/signal-binding-behavior",["exports","./binding-signaler"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SignalBindingBehavior=void 0;e.SignalBindingBehavior=function(){function e(e){this.signals=e.signals}return e.inject=function(){return[t.BindingSignaler]},e.prototype.bind=function(e,t){if(!e.updateTarget)throw new Error("Only property bindings and string interpolation bindings can be signaled.  Trigger, delegate and call bindings cannot be signaled.");if(3===arguments.length){var n=arguments[2];(this.signals[n]||(this.signals[n]=[])).push(e),e.signalName=n}else{if(!(arguments.length>3))throw new Error("Signal name is required.");for(var i=Array.prototype.slice.call(arguments,2),r=i.length;r--;){var o=i[r];(this.signals[o]||(this.signals[o]=[])).push(e)}e.signalName=i}},e.prototype.unbind=function(e,t){var n=e.signalName;if(e.signalName=null,Array.isArray(n))for(var i=n,r=i.length;r--;){var o=i[r],a=this.signals[o];a.splice(a.indexOf(e),1)}else{var s=this.signals[n];s.splice(s.indexOf(e),1)}},e}()}),define("aurelia-templating-resources/binding-signaler",["exports","aurelia-binding"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingSignaler=void 0;e.BindingSignaler=function(){function e(){this.signals={}}return e.prototype.signal=function(e){var n=this.signals[e];if(n)for(var i=n.length;i--;)n[i].call(t.sourceContext)},e}()}),define("aurelia-templating-resources/update-trigger-binding-behavior",["exports","aurelia-binding"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UpdateTriggerBindingBehavior=void 0;var n,i,r="The updateTrigger binding behavior can only be applied to two-way bindings on input/select elements.";e.UpdateTriggerBindingBehavior=(i=n=function(){function e(e){this.eventManager=e}return e.prototype.bind=function(e,n){for(var i=arguments.length,o=Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];if(0===o.length)throw new Error("The updateTrigger binding behavior requires at least one event name argument: eg <input value.bind=\"firstName & updateTrigger:'blur'\">");if(e.mode!==t.bindingMode.twoWay)throw new Error(r);var s=e.observerLocator.getObserver(e.target,e.targetProperty);if(!s.handler)throw new Error(r);e.targetObserver=s,s.originalHandler=e.targetObserver.handler;var c=this.eventManager.createElementHandler(o);s.handler=c},e.prototype.unbind=function(e,t){e.targetObserver.handler=e.targetObserver.originalHandler,e.targetObserver.originalHandler=null},e}(),n.inject=[t.EventManager],i)}),define("aurelia-templating-resources/html-resource-plugin",["exports","aurelia-templating","./dynamic-element"],function(e,t,n){"use strict";function i(e){return/([^\/^\?]+)\.html/i.exec(e)[1].toLowerCase()}function r(e){var r=e.container.get(t.ViewEngine),o=e.aurelia.loader;r.addResourcePlugin(".html",{fetch:function(e){return o.loadTemplate(e).then(function(t){var r,o=t.template.getAttribute("bindable"),a=i(e);return o?(o=o.split(",").map(function(e){return e.trim()}),t.template.removeAttribute("bindable")):o=[],r={},r[a]=(0,n._createDynamicElement)(a,e,o),r})}})}Object.defineProperty(e,"__esModule",{value:!0}),e.getElementName=i,e.configure=r}),define("aurelia-templating-resources/dynamic-element",["exports","aurelia-templating"],function(e,t){"use strict";function n(e,n,i){for(var r,o,a,s=(r=(0,t.customElement)(e),o=(0,t.useView)(n),r(a=o(a=function(){function e(){}return e.prototype.bind=function(e){this.$parent=e},e}())||a)||a),c=0,l=i.length;c<l;++c)(0,t.bindable)(i[c])(s);return s}Object.defineProperty(e,"__esModule",{value:!0}),e._createDynamicElement=n}),define("text!app.html",["module"],function(e){e.exports='<template><require from="./infojack-topmenu"></require><require from="./infojack-mainmenu"></require><require from="./character/character-screen"></require><require from="./infojack-cyberspace"></require><top-menu></top-menu><main-menu></main-menu><character-screen></character-screen><cyberspace></cyberspace></template>'}),define("text!animations.css",["module"],function(e){
e.exports=".highlightbg:not(:hover){\n    animation: highlightbg 4s linear 0s infinite;\n}\n@keyframes highlightbg {\n  0% {background: black;}\n  65% {background: #4CAF50;}\n  70%{background:#839984;}\n  95% {background: black;}\n}\n.highlight:not(:hover){\n    animation: highlight 3s ease 0s infinite;\n    border:.2em dashed;\n}\n@keyframes highlight {  \n    0%{\n        border-color:transparent;\n        color:white;\n    }\n    33%{\n        border-top-color:#edc207;\n        border-bottom-color:#edc207;\n        color:#edc207;\n    }\n    100%{\n        border-color:transparent;\n        color:white;\n    }\n}\n.highlightunder{\n    animation: highlightunder 3s ease 0s infinite;\n    border-bottom:.4em double transparent;\n}\n@keyframes highlightunder {  \n    0%{\n        border-bottom-color:transparent;\n    }\n    33%{\n        border-bottom-color:#ba097f;\n    }\n    100%{\n        border-bottom-color:transparent;\n    }\n}\n"}),define("text!empty.html",["module"],function(e){e.exports='<template><require from="./infojack-example.css"></require></template>'}),define("text!empty.css",["module"],function(e){e.exports=" \n"}),define("text!infojack-cyberspace.html",["module"],function(e){e.exports='<template><require from="./infojack-cyberspace.css"></require><div id="console" show.bind="showconsole"></div><div id="cyberspace-container" show.bind="showconsole"><div id="cyberspace"></div><div></div></div></template>'}),define("text!infojack-cyberspace.css",["module"],function(e){e.exports="#cyberspace-container{\n  top:20%;\n  position:absolute;\n  height:80%;\n  width:100%;\n  max-height:80%;\n  max-width:100%;\n  overflow:auto;\n}\n#cyberspace{\n  position:absolute;\n  margin:2em;\n}\n#cyberspace .spacer{\n  position:absolute;\n  height:5em;\n  width:5em;\n  background:white;\n  visibility:hidden;\n}\n#cyberspace .tile{\n  border:none;\n  position:absolute;\n  color:white;\n  background:black;\n  background-repeat:no-repeat;\n  background-size:100%;\n  transition:border 3s ease-out;\n  transition:opacity 1s ease-in-out;\n  opacity:0;\n  overflow:hidden;\n}\n#cyberspace .discovered{opacity:1;}\n#cyberspace .visited{border:0.1em dashed gray;}\n@keyframes fadein {\n    from{opacity:0;}\n    to{opacity:1;}\n}\n@keyframes fadeout {\n    from{opacity:1;}\n    to{opacity:0;}\n}\n#cyberspace .tile img{\n  width:100%;\n  opacity:1;\n  animation:fadein 2000ms;\n  transition:opacity 2s;\n}\n#console{\n  width:100%;\n  height:20%;\n  background:black;\n  height:8em;\n  z-index:1;\n  border-bottom:1px solid gray;\n  overflow:auto;\n}\n"}),define("text!infojack-mainmenu.html",["module"],function(e){e.exports='<template><require from="./infojack-mainmenu.css"></require><div class="centered center panel" id="mainmenu" if.bind="show"><h1>Infojack</h1><hr><div><button click.trigger="startgame()" class="${hassave ? \'\' : \'highlight\'}">Start new game</button></div><div><button click.trigger="loadgame()" class="${hassave ? \'highlight\' : \'\'}">Load saved game</button></div><div><button click.trigger="showpending()">How to play</button></div><div><button click.trigger="openrepository()">Source code</button></div><hr></div></template>'}),define("text!infojack-mainmenu.css",["module"],function(e){e.exports="#mainmenu div,#mainmenu{text-align:center;}\n#mainmenu hr{width:50%;} \n#mainmenu{z-index:-1;}\n#mainmenu button{width:50%;}\n"}),define("text!infojack-radio.html",["module"],function(e){e.exports='<template><require from="./infojack-radio.css"></require><div id="radio-container" class="panel"><audio id="radio-player" type="audio/mpeg" src="http://ice1.somafm.com/defcon-128-mp3" preload="none" ref="audio"></audio><div id="radio-control"><input ref="radioactive" type="checkbox" click.trigger="play()" checked.bind="active" id="radio-checkbox"><label for="radio-checkbox">Enable music</label></div><div>Audio courtesy of <a href="https://somafm.com/defcon/index.html" target="_blank">DEF CON radio</a></div></div></template>'}),define("text!infojack-radio.css",["module"],function(e){e.exports="#radio-container{\n    display:inline;\n    position:fixed;\n    right:2em;\n    top:4em;\n    text-align:center;\n    padding:.5em;\n    z-index:2;\n}\n#radio-control{\n  margin-bottom:1em;\n  vertical-align:middle;\n}\n#radio-control input{\n  position:relative;\n  vertical-align: middle;\n}\n#radio-label{\n  vertical-align:middle;\n}\n"}),define("text!infojack-topmenu.html",["module"],function(e){e.exports='<template><require from="./infojack-topmenu.css"></require><require from="./infojack-radio"></require><div id="topmenu"><img src="./images/note.png" click.trigger="open()" title="Music On/Off" class="highlightunder"><div><radio hidden.bind="hideradio"></radio></div></div></template>'}),define("text!infojack-topmenu.css",["module"],function(e){e.exports="#topmenu img{\n    height:1.5em;\n    cursor:pointer;\n    margin:0em .25em 0em .25em;\n}\n#topmenu {\n    position:fixed;\n    right:2em;\n    top:1em;\n    background-color:lightgrey;\n    border:.25em solid lightgrey;\n    border-radius:1em;\n    z-index:2;\n}\n#topmenu>*{\n    padding-left:.5em;\n    padding-right:.5em;\n}\n"}),define("text!character/character-abilities.html",["module"],function(e){e.exports='<template><require from="./character-abilities.css"></require><table class="abilities-table"><tr><td class="bold">Strength</td><td class="ability-value">${strength}</td><td><button class="ability-upgrade" click.trigger="upgrade(\'strength\')" disabled.bind="!full">Upgrade</button></td><td>Your physical strength outside the Web.</td></tr><tr><td class="bold">Dexterity</td><td class="ability-value">${dexterity}</td><td><button class="ability-upgrade" click.trigger="upgrade(\'dexterity\')" disabled.bind="!full">Upgrade</button></td><td>Agility and coordination outside the Web.</td></tr><tr><td class="bold">Constitution</td><td class="ability-value">${constitution}</td><td><button class="ability-upgrade" click.trigger="upgrade(\'constitution\')" disabled.bind="!full">Upgrade</button></td><td>Your endurance for physical punishment.</td></tr><tr><td class="bold underline yellow">Intelligence</td><td class="ability-value">${intelligence}</td><td><button class="ability-upgrade" click.trigger="upgrade(\'intelligence\')">Upgrade</button></td><td class="yellow">Your reasoning power.<br>(may replace Strength on the web)</td></tr><tr><td class="bold">Wisdom</td><td class="ability-value">${wisdom}</td><td><button class="ability-upgrade" click.trigger="upgrade(\'wisdom\')">Upgrade</button></td><td>Your general awareness and willpower.<br>(may replace Dexterity on the web)</td></tr><tr><td class="bold">Charisma</td><td class="ability-value">${charisma}</td><td><button class="ability-upgrade" click.trigger="upgrade(\'charisma\')">Upgrade</button></td><td>Your presence and social magnetism.<br>(may replace Constitution on the web)</td></tr></table><table id="ability-points"><tr><td class="ability-value">${pointbuy}</td><td>Starting points</td></tr><tr><td class="ability-value">${pointextra}</td><td>Ability points</td></tr></table></template>'}),define("text!infojack.css",["module"],function(e){e.exports="body{\n    background-color: #161616;\n    color:lightgray;\n    font-family:Orbitron;\n    padding:0em;\n    margin:0em;\n    width:100%;\n    height:100%;\n    background:linear-gradient(to bottom right, black,darkgreen);\n    background-repeat:no-repeat;\n    background-attachment:fixed;\n}\ndiv,span{\n    font-family:Orbitron;\n}\na{\n    color:lightblue;\n}\n.panel{\n    background-color:#357c2b;\n    border:.3em solid #383838;\n    border-radius:1em;\n    border-style:groove;\n    z-index:-1;\n}\n.center{\n    margin: auto;\n    width: 50%;\n    padding: 1em;\n    position:absolute;\n    top:25%;\n    left:25%;\n    right:25%;\n    bottom:25%;\n}\nh1,h2,h3,h4,h5,h6{\n    color:darkgreen;\n    text-shadow: 0.025em .025em black;\n    font-family:Orbitron;\n}\nh1{\n    font-size:4em;\n}\nbutton {\n    cursor: pointer;\n    background-color: black;\n    color: white;\n    border: none;\n    margin: .1em;\n    padding: .3em;\n    font-weight: 800;\n    font-family:Orbitron;\n    outline:0;\n}\n\nbutton:hover:not(:disabled) {\n    background-color: #4CAF50;\n    color: white;\n    border: .2em solid black ;\n    padding:.15em;\n}\nhr{ border-color:gray;}\n.large{\n    width:75%!important;\n    top:10%!important;\n    left:10%!important;\n    right:10%!important;\n    bottom:10%!important;\n}\n.bold{\n    font-weight:bold;\n}\ninput[type=text]{\n  background-color:black;\n  border:none;\n  border-bottom:.1px solid white;\n  color:white;\n  padding-right:3em;\n  height:2em;\n  font:oblique small-caps 1.5em monospace;\n  text-indent:.75em;\n}\n"}),define("text!character/character-deck.html",["module"],function(e){e.exports='<template><require from="./character-deck.css"></require><require from="./character-details.css"></require><require from="./character-abilities.css"></require><div id="deck-screen"><div><span class="detail">Deck program memory <span>${memory}</span></span></div><div><span class="detail">Deck file storage <span>${storage}</span></span></div><div><span class="detail">${name} wealth <span>${wealth}</span></span></div><div><span class="detail">${name} electronics <span>${electronics}</span></span></div><table><tr><td>Cyberdeck</td><td class="grade">${grade(deckgrade)}</td><td><button disabled.bind="canupgradedeck" click.trigger="upgradedeck()" class="ability-upgrade">Upgrade</button></td><td>${canupgradedeck}</td><td><tr></tr><tr><td>Memory</td><td class="grade">${grade(memorygrade)}</td><td><button disabled.bind="canupgradememory" click.trigger="upgradememory()" class="ability-upgrade">Upgrade</button></td><td>${canupgradememory}</td><td><tr></tr><tr><td>Storage</td><td class="grade">${grade(storagegrade)}</td><td><button disabled.bind="canupgradestorage" click.trigger="upgradestorage()" class="ability-upgrade">Upgrade</button></td><td>${canupgradestorage}</td><td><tr></tr><tr><td>Stealth</td><td class="grade">${grade(stealthgrade)}</td><td><button disabled.bind="canupgradestealth" click.trigger="upgradestealth()" class="ability-upgrade">Upgrade</button></td><td>${canupgradestealth}</td><td><tr></tr></td></tr></td></tr></td></tr></td></tr></table></div></template>'}),define("text!character/character-abilities.css",["module"],function(e){e.exports=".stats-table {\n    border-spacing:.75em;\n}\n.abilities-table tr{\n    height:1.75em;\n}\n.abilities-table td{\n    padding:0 .5em 0 .5em;\n}\n.abilities-table button:disabled,.ability-upgrade:disabled{\n    opacity:.5;\n}\n.ability-value{\n    background-color:white;\n    color:black;\n    text-align:center;\n}\n.ability-upgrade{\n    border:.1em solid white;\n}\n#ability-points{\n    margin-top:2em;\n    margin-left:1em;\n}\n#ability-points td{\n    margin:0 1em 0 5em;\n    padding-left:.5em;\n}\n#ability-points .ability-value{\n    padding:.25em;\n}\n.yellow{color:khaki;}\n"}),define("text!character/character-details.html",["module"],function(e){e.exports='<template><require from="./character-details.css"></require><div class="details-title">Level</div><span class="detail">Character level <span>${avatar.level}</span> </span><span class="detail" repeat.for="[name,class] of classes">${name} <span>${avatar.classes[name]}</span></span><div class="details-title">Combat (Web)</div><div><span class="detail">Current HP<span>${avatar.hp}</span> </span><span class="detail">Max HP<span>${avatar.maxhp}</span></span></div><div><span class="detail">Base attack bonus<span>${sign(avatar.bab)}</span> </span><span class="detail">MÃªlÃ©e attack bonus <span>${sign(avatar.getmelee())}</span> </span><span class="detail">Ranged attack bonus <span>${sign(avatar.getranged())}</span></span><div><span class="detail">Defence <span>${avatar.getdefence()}</span> </span><span class="detail">Initiative <span>${sign(avatar.getinitiative())}</span> </span><span class="detail">Speed <span>${avatar.speed} ft.</span></span><div class="details-title">Saving throws (Web)</div><span repeat.for="save of saves" class="detail">${save} <span>${getsave(save)}</span></span><div class="details-title">Ability modifiers (Web)</div><div><span repeat.for="i of 3" class="detail">${abilities[i]} <span>${getmodifier(abilities[i])}</span></span></div><div><span repeat.for="i of 3" class="detail">${abilities[i+3]} <span>${getmodifier(abilities[i+3])}</span></span></div><div class="details-title">Skill modifiers (Web)</div><span repeat.for="[name,skill] of skills" class="detail">${name} <span>${getskill(skill)}</span></span><div class="details-title">Other</div><span class="detail">Edge<span>${avatar.edge}</span> </span><span class="detail">Edge dice <span>${avatar.edgedice[0]}d${avatar.edgedice[1]}</span> </span><span class="detail">Contacts<span>${avatar.contacts}</span> </span><span class="detail">Wealth<span>${avatar.wealth}Â¥</span></span></div></div></template>'}),define("text!character/character-deck.css",["module"],function(e){e.exports="#deck-screen div{margin-bottom:0.5em;}\n#deck-screen .detail{font-weight:bold;}\n#deck-screen button{\n  margin-left:.5em;\n  margin-right:.5em;\n}\n#deck-screen .grade{\n  text-align:center;\n}\n"}),define("text!character/character-feats.html",["module"],function(e){e.exports='<template><require from="./character-feats.css"></require><require from="./character-abilities.css"></require><div id="currentfeats"><span class="bold">Current ${viewname.toLowerCase()}:</span> <span if.bind=\'getcurrent().length==0  &signal:"update"\'>none.</span> <span repeat.for="feat of getcurrent() &signal:\'update\'">${feat.name.toLowerCase()};&nbsp;</span></div><div id="featsleft" class="bold">${viewname} left: <span class="ability-value">${points}</span></div><table class="abilities-table" id="featstable"><tr repeat.for="[name,feat] of getall()"><td class="bold">${feat.name}</td><td><button class="ability-upgrade" click.trigger="add(feat)" disabled.bind="!validate(feat) &signal:\'update\'">Add</button></td><td>${feat.description}.</td></tr></table></template>'}),define("text!character/character-details.css",["module"],function(e){e.exports=".detail{\n  display:inline-block;\n  margin-right:.5em;\n}\n.detail span{\n  padding:.1em .5em .1em .5em;\n  background-color:white;\n  color:black;\n  text-align:center;\n  margin-left:.5em;\n} \n.details-title{\n  font-weight:bold;\n  margin-top:.5em;\n  margin-bottom:.5em;\n}\n"}),define("text!character/character-general.html",["module"],function(e){e.exports='<template><require from="./character-general.css"></require><div id="character-general"><div class="details-title"><div>Name:</div><input type="text" value.bind="hero.name" ref="name"></div><div class="details-title"><div>Avatar:</div><img repeat.for="i of avatars" src="./images/characters/${i}.png" class.bind=\'i==avatar?"selected":""\' onclick.call="select(i)"></div></div></template>'}),define("text!character/character-feats.css",["module"],function(e){e.exports="#currentfeats,#featsleft{\n    padding:.5em;\n} \n\n#featsleft span{\n    padding:.2em;\n    padding-left:.75em;\n    padding-right:.75em;\n    margin-left:.5em;\n}\n\n#featstable{\n    margin-top:.5em;\n}\n"}),define("text!character/character-screen.html",["module"],function(e){e.exports='<template><require from="./character-general"></require><require from="./character-abilities"></require><require from="./character-skills"></require><require from="./character-feats"></require><require from="./character-talents"></require><require from="./character-details"></require><require from="./character-deck"></require><require from="./character-screen.css"></require><div class="large center panel" if.bind="show" id="characterscreen"><h2>Character screen</h2><span id="charactermenu" ref="charactermenu"><button click.trigger="select($event)" id="character-general" class="highlightbg">General</button> <button click.trigger="select($event)" id="character-abilities">Abilities</button> <button click.trigger="select($event)" id="character-skills">Skills</button> <button click.trigger="select($event)" id="character-feats">Feats</button> <button click.trigger="select($event)" id="character-talents">Talents</button> <button click.trigger="select($event)" id="character-details">Details</button> <button click.trigger="select($event)" id="character-deck">Deck</button> <button click.trigger="close($event)" id="character-close">Save</button> </span><span id="character-content"><character-general if.bind="showgeneral" class="characterview"></character-general><character-abilities if.bind="showabilities" class="characterview"></character-abilities><character-skills if.bind="showskills" class="characterview"></character-skills><character-feats if.bind="showfeats" class="characterview"></character-feats><character-talents if.bind="showtalents" class="characterview"></character-talents><character-details if.bind="showdetails" class="characterview"></character-details><character-deck if.bind="showdeck" class="characterview"></character-deck></span></div></template>'}),define("text!character/character-general.css",["module"],function(e){e.exports="#character-general img{\n  width:3.5em;\n  border:.3em dashed transparent;\n  border-radius:1em;\n  transition:border .5s ease-in-out;\n  transition:background-color .5s ease-in-out;\n  cursor:pointer;\n  background-color:transparent;\n}\n\n#character-general img.selected{\n  border-color:#edc207 !important;\n  border-radius:0em;\n}\n\n#character-general input{\n  width:20em;\n}\n\n#character-general img:hover:not(.selected){\n  background-color:gray;\n}\n\n#character-general .details-title{\n  margin-bottom:1em;\n}\n\n#character-general div{\n  margin-bottom:.75em;\n}\n"}),define("text!character/character-skills.html",["module"],function(e){e.exports='<template><require from="./character-skills.css"></require><require from="./character-abilities.css"></require><div id="ranksleft">Skill points left: <span class="ability-value">${hero.ranks}</span> <span class="small">(skills in red cost 2 points to upgrade)</span></div><table class="abilities-table" id="skilltable"><tr repeat.for="[name,skill] of skills" class="skill-${name.toLowerCase()}"><td class="bold">${name}</td><td class="ability-value">${ranks[name]}</td><td><button class="ability-upgrade ${iscrossclass(name)?\'crossskill\':\'\'}" click.trigger="upgrade(name)" disabled.bind="!canupgrade(ranks[name],name)">Upgrade</button></td><td>${skill.description} (${getability(skill)}).</td></tr></table></template>'}),define("text!character/character-screen.css",["module"],function(e){e.exports="#characterscreen{\n    padding-top:0em;\n}\n#charactermenu{\n    float:left;\n    width:25%;\n}\n#charactermenu button{\n    width:100%;\n    display:block;\n}\n.characterview{\n    width:75%;\n    right:0em;\n}\n#character-close{margin-top:1.5em;}\n#character-content{\n\tfloat: left;\n\tdisplay: inline;\n\tmargin-left: 1em;\n\tmargin-right: 1em;\n\tbackground-color: black;\n\tborder: 0.1em outset black;\n\tpadding: 0.5em;\n\twidth: 70%;\n    overflow-y:auto;\n    height:80%;\n}\n"}),define("text!character/character-skills.css",["module"],function(e){e.exports="#ranksleft{\n    font-weight: bold;\n    padding: .5em;\n}\n#ranksleft span{padding:.2em;}\n\n.small{\n    font-size:.75em;\n    font-weight:normal;\n}\n.crossskill{color:#B22222;}\n.skill-hacking{color:khaki;}\n"});