define("app",["exports"],function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});e.App=function e(){t(this,e)}}),define("empty",["exports"],function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});e.Example=function e(){t(this,e)}}),define("environment",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={debug:!1,testing:!1,nodesize:4,fullattributes:!1,ccskills:!1,playeravatars:17}}),define("infojack-mainmenu",["exports","aurelia-framework","aurelia-event-aggregator","./modules/sound","./modules/save","./messages","./environment","./modules/world/names"],function(e,t,r,n,i,o,a){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.MainMenu=void 0;var c,l,u=function(e){return e&&e.__esModule?e:{default:e}}(a);e.MainMenu=(c=(0,t.inject)(r.EventAggregator))(l=function(){function e(t){if(s(this,e),this.show=!0,this.messaging=t,this.hassave=0!=i.save.checkload(),u.default.view){var r=this;setTimeout(function(){r.close(u.default.view)},1)}}return e.prototype.showpending=function(){n.sound.play(n.sound.ERROR),setTimeout(function(){alert("Operation pending!")},100)},e.prototype.startgame=function(){this.hassave&&!confirm("Are you sure you want to start a new game? Any previous progress will be lost!")||(i.save.clear(),this.close("CharacterScreen"))},e.prototype.loadgame=function(){this.hassave?(i.save.load(),this.close("CharacterScreen")):(n.sound.play(n.sound.ERROR),alert("No save found!"))},e.prototype.close=function(e){this.show=!1,this.messaging.publish(new o.ShowView(e))},e.prototype.openrepository=function(){window.open("https://github.com/tukkek/infojack")},e}())||l}),define("infojack-radio",["exports"],function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});e.Radio=function(){function e(){t(this,e),this.active=!1}return e.prototype.play=function(){return this.audio.play(),this.active?this.audio.pause():this.audio.play(),!0},e}()}),define("infojack-topmenu",["exports"],function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});e.TopMenu=function(){function e(){t(this,e),this.hideradio=!0}return e.prototype.open=function(){this.hideradio=!this.hideradio},e}()}),define("infojack-win",["exports","aurelia-framework","aurelia-event-aggregator","./messages","./modules/character/character","./modules/rpg","./modules/save"],function(e,t,r,n,i,o,a){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Win=void 0;var c,l,u=["Alright!","Sweet!","Hell to the yeah!","Score!","Bonus!","♫ A ♫ ma ♫ zing ♫","Groovy!","Hit it Johnny!","Loving it!","Totally radical!","Cowabanga!","That's how you do it, chummer.","Let it rip, choombata!"];e.Win=(c=(0,t.inject)(r.EventAggregator))(l=function(){function e(t){s(this,e),this.show=!1;var r=this;t.subscribe(n.ShowView,function(e){"Win"==e.view&&r.apply()})}return e.prototype.apply=function(){this.end=!i.hero.levelup(),a.save.save(),this.abilities=i.hero.pointextra,this.skills=i.hero.ranks,this.feats=i.hero.newfeats,this.wealth=i.hero.wealth+"¥",this.nice=o.rpg.choose(u),this.show=!0},e.prototype.close=function(){if(!this.end)return void(this.show=!1);a.save.clear(),window.location.reload()},e}())||l}),define("main",["exports","./environment"],function(e,t){"use strict";function r(e){e.use.standardConfiguration().feature("resources"),n.default.debug&&e.use.developmentLogging(),n.default.testing&&e.use.plugin("aurelia-testing"),e.start().then(function(){return e.setRoot()})}Object.defineProperty(e,"__esModule",{value:!0}),e.configure=r;var n=function(e){return e&&e.__esModule?e:{default:e}}(t);Promise.config({warnings:{wForgottenReturn:!1}})}),define("messages",["exports"],function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});e.ShowView=function e(r){t(this,e),this.view=r},e.Disconnect=function e(){var r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t(this,e),this.message=r,this.safe=!1,this.win=!1},e.Refresh=function e(r){t(this,e),this.target=r}}),define("character/character-abilities",["exports","../modules/character/character","../environment"],function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.CharacterAbilities=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(r);e.CharacterAbilities=function(){function e(){n(this,e)}return e.prototype.attached=function(){this.full=i.default.fullattributes,this.strength=t.hero.strength,this.dexterity=t.hero.dexterity,this.constitution=t.hero.constitution,this.intelligence=t.hero.intelligence,this.wisdom=t.hero.wisdom,this.charisma=t.hero.charisma,this.pointbuy=t.hero.pointbuy,this.pointextra=t.hero.pointextra},e.prototype.save=function(){var e={};Object.assign(e,this),delete e.full,t.hero.assign(e)},e.prototype.upgrade=function(e){var r=this[e];if(18!=r){var n=this[e]+1;if(this.pointextra>0)this.pointextra-=1,this[e]=n;else{if(!this.buy(r))return;this[e]=n}this.save(),t.hero.updateranks(e)}},e.prototype.buy=function(e){var r=e+1,n=t.costs[r]-t.costs[e];return this.pointbuy>=n&&(this.pointbuy-=n,!0)},e}()}),define("character/character-deck",["exports","../modules/deck","../modules/character/character","../modules/grade"],function(e,t,r,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.CharacterDeck=void 0;e.CharacterDeck=function(){function e(){i(this,e)}return e.prototype.attached=function(){this.refresh()},e.prototype.refresh=function(){this.memory=t.deck.memory,this.storage=t.deck.storage,this.name=r.hero.possess(),this.wealth=r.hero.wealth,this.electronics=(0,r.sign)(r.hero.getelectronics()),this.deckgrade=t.deck.deckgrade,this.memorygrade=t.deck.memorygrade,this.storagegrade=t.deck.storagegrade,this.stealthgrade=t.deck.stealthgrade,this.canupgradedeck=t.deck.upgradedeck(!1),this.canupgradememory=t.deck.upgradememory(!1),this.canupgradestorage=t.deck.upgradestorage(!1),this.canupgradestealth=t.deck.upgradestealth(!1)},e.prototype.grade=function(e){return n.grades[e]},e.prototype.upgradedeck=function(){t.deck.upgradedeck(!0),this.refresh()},e.prototype.upgradememory=function(){t.deck.upgradememory(!0),this.refresh()},e.prototype.upgradestorage=function(){t.deck.upgradestorage(!0),this.refresh()},e.prototype.upgradestealth=function(){t.deck.upgradestealth(!0),this.refresh()},e}()}),define("character/character-details",["exports","../modules/character/character","../modules/character/skill","../modules/character/class/class"],function(e,t,r,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.CharacterDetails=void 0;e.CharacterDetails=function(){function e(){i(this,e),this.abilities=["Strength","Dexterity","Constitution","Intelligence","Wisdom","Charisma"],this.saves=["Fortitude","Reflexes","Will"],this.skills=r.skills,this.classes=n.Class.classes,this.hero=t.hero}return e.prototype.bind=function(){this.avatar=t.hero.connect()},e.prototype.getmodifier=function(e){return e=e.toLowerCase(),e=this.avatar.getmodifier(this.avatar[e]),(0,t.sign)(e)},e.prototype.getsave=function(e){return e=e.toLowerCase(),(0,t.sign)(this.avatar["get"+e]())},e.prototype.getskill=function(e){return e=e.name.replace(" ","").toLowerCase(),(0,t.sign)(this.avatar["get"+e]())},e.prototype.sign=function(e){return(0,t.sign)(e)},e}()}),define("character/character-feats",["exports","../modules/character/feat","../modules/character/character","aurelia-framework","aurelia-templating-resources"],function(e,t,r,n,i){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.CharacterFeats=void 0;var a,s;e.CharacterFeats=(a=(0,n.inject)(i.BindingSignaler))(s=function(){function e(t){o(this,e),this.signals=t,this.viewname="Feats"}return e.prototype.bind=function(){this.points=r.hero.newfeats},e.prototype.add=function(e){0!=this.points&&(this.points-=1,r.hero.newfeats-=1,e.apply(r.hero),this.signals.signal("update"))},e.prototype.validate=function(e){return this.points>0&&e.validate(r.hero)},e.prototype.getcurrent=function(){for(var e=[],t=r.hero.feats,n=Array.isArray(t),i=0,t=n?t:t[Symbol.iterator]();;){var o;if(n){if(i>=t.length)break;o=t[i++]}else{if(i=t.next(),i.done)break;o=i.value}var a=o;a.talent||e.push(a)}return e},e.prototype.getall=function(){return t.feats},e}())||s}),define("character/character-general",["exports","../modules/character/character","../environment"],function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.CharacterGeneral=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(r);e.CharacterGeneral=function(){function e(){n(this,e),this.hero=t.hero,this.avatar=t.hero.image,this.avatars=i.default.playeravatars}return e.prototype.attached=function(){this.name.focus()},e.prototype.select=function(e){this.avatar=e,t.hero.image=e},e}()}),define("character/character-programs",["exports","../modules/program/program","../modules/character/character","../modules/deck","aurelia-framework","aurelia-templating-resources"],function(e,t,r,n,i,o){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.CharacterPrograms=void 0;var s,c;e.CharacterPrograms=(s=(0,i.inject)(o.BindingSignaler))(c=function(){function e(r){a(this,e),this.programs=t.PROGRAMS,this.signals=r}return e.prototype.attached=function(){this.refresh()},e.prototype.refresh=function(){this.name=r.hero.possess(),this.wealth=r.hero.wealth,this.technology=(0,r.sign)(r.hero.gettechnology()),this.signals.signal("update")},e.prototype.has=function(e){return n.deck.programs.indexOf(e)>=0},e.prototype.getpurchaselabel=function(e){var t=e.purchasedc-10;return t<0&&(t=0),"Requires "+t+"¥"},e.prototype.canbuy=function(e){return!this.has(e)&&r.hero.wealth+10>=e.purchasedc},e.prototype.buy=function(e){e.buy()?this.refresh():alert("Cannot buy error!")},e.prototype.cancreate=function(e){return!this.has(e)&&r.hero.gettechnology()+10>=e.programmingdc},e.prototype.getprogramminglabel=function(e){return"Requires technology "+(0,r.sign)(e.programmingdc-10)},e.prototype.create=function(e){n.deck.programs.push(e),this.refresh()},e}())||c}),define("character/character-screen",["exports","aurelia-framework","aurelia-event-aggregator","../messages","../modules/save"],function(e,t,r,n,i){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.CharacterScreen=void 0;var a,s;e.CharacterScreen=(a=(0,t.inject)(r.EventAggregator))(s=function(){function e(t){o(this,e),this.messaging=t,this.show=!1,this.showgeneral=!0,this.showabilities=!1,this.showskills=!1,this.showfeats=!1,this.showtalents=!1,this.showdetails=!1,this.showdeck=!1,this.showprograms=!1;var r=this;t.subscribe(n.ShowView,function(e){"CharacterScreen"==e.view&&(r.show=!0)})}return e.prototype.select=function(e){for(var t=e.target.id,r=this.charactermenu.querySelectorAll("button"),n=r,i=Array.isArray(n),o=0,n=i?n:n[Symbol.iterator]();;){var a;if(i){if(o>=n.length)break;a=n[o++]}else{if(o=n.next(),o.done)break;a=o.value}var s=a,c=s.classList;if(c){var l=s.id==t;this["show"+s.id.replace("character-","")]=l,l?c.add("highlightbg"):c.remove("highlightbg")}}},e.prototype.close=function(){i.save.save(),this.show=!1,this.messaging.publish(new n.ShowView("Cyberspace"))},e}())||s}),define("character/character-skills",["exports","../modules/character/skill","../modules/character/character","aurelia-framework","../environment"],function(e,t,r,n,i){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.CharacterSkills=void 0;var a=function(e){return e&&e.__esModule?e:{default:e}}(i);e.CharacterSkills=function(){function e(){o(this,e),this.skills=t.skills}return e.prototype.bind=function(){this.hero=r.hero,this.ranks={};for(var e=t.skills.values(),n=Array.isArray(e),i=0,e=n?e:e[Symbol.iterator]();;){var o;if(n){if(i>=e.length)break;o=e[i++]}else{if(i=e.next(),i.done)break;o=i.value}var a=o;this.ranks[a.name]=r.hero.getranks(a.name)}},e.prototype.iscrossclass=function(e){return a.default.ccskills&&!r.hero.classskills.includes(e)},e.prototype.buy=function(e){return this.iscrossclass(e)?2:1},e.prototype.upgrade=function(e){if(this.canupgrade(this.ranks[e],e)){var t=this.buy(e);r.hero.ranks-=t,this.ranks[e]+=1,r.hero.setranks(e,this.ranks[e]),"Profession"==e&&1==r.hero.level&&1==this.ranks[e]&&(r.hero.wealth+=1)}},e.prototype.canupgrade=function(e,n){if(t.skills.get(n).pending)return!1;var i=this.buy(n);return r.hero.ranks>=i&&e<3+r.hero.level},e.prototype.getability=function(e){return e.ability.substring(0,3).toUpperCase()},e}()}),define("character/character-talents",["exports","aurelia-framework","../modules/character/character","../modules/character/class/class","aurelia-templating-resources"],function(e,t,r,n,i){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.CharacterTalents=void 0;var a,s,c;e.CharacterTalents=(a=(0,t.useView)("./character-feats.html"),s=(0,t.inject)(i.BindingSignaler),a(c=s(c=function(){function e(t){o(this,e),this.signals=t,this.viewname="Talents"}return e.prototype.bind=function(){this.points=r.hero.talent,this.talents=new Map;for(var e in r.hero.classes)for(var t=n.Class.classes.get(e).talents,i=Array.isArray(t),o=0,t=i?t:t[Symbol.iterator]();;){var a;if(i){if(o>=t.length)break;a=t[o++]}else{if(o=t.next(),o.done)break;a=o.value}var s=a,c=s[0],l=s[1];this.talents.set(c,l)}},e.prototype.add=function(e){0!=this.points&&(this.points-=1,r.hero.talent-=1,e.apply(r.hero),this.signals.signal("update"))},e.prototype.validate=function(e){return this.points>0&&e.validate(r.hero)},e.prototype.getcurrent=function(){for(var e=[],t=r.hero.feats,n=Array.isArray(t),i=0,t=n?t:t[Symbol.iterator]();;){var o;if(n){if(i>=t.length)break;o=t[i++]}else{if(i=t.next(),i.done)break;o=i.value}var a=o;a.talent&&e.push(a)}return e},e.prototype.getall=function(){return this.talents},e}())||c)||c)}),define("cyberspace/infojack-cyberspace",["exports","../modules/cyberspace/system","../modules/cyberspace/console","aurelia-framework","aurelia-event-aggregator","../modules/sound","../messages","../environment","../modules/character/character"],function(e,t,r,n,i,o,a,s,c){"use strict";function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(){y.refresh()}Object.defineProperty(e,"__esModule",{value:!0}),e.Cyberspace=void 0,e.refresh=u;var d,p,h=function(e){return e&&e.__esModule?e:{default:e}}(s),f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g=h.default.debug?0:500,y=!1,m=0;e.Cyberspace=(d=(0,n.inject)(i.EventAggregator))(p=function(){function e(t){l(this,e),this.messaging=t,this.showconsole=!1,y=this;var r=this;t.subscribe(a.ShowView,function(e){"Cyberspace"==e.view&&r.init()})}return e.prototype.init=function(){this.showconsole=!0,this.map=document.querySelector("#cyberspace"),this.console=document.querySelector("#console-constraint"),this.system=(0,t.connect)(),this.player=this.system.player,this.tiles=[],this.drawn=[],this.draw()},e.prototype.clicktile=function(e){var t=(new Date).getTime();if(!(m+g>t)){m=t,"IMG"==e.tagName&&(e=e.parentNode);var r=this.system.nodes[e.nodeid];if(r==this.player.node){var n=r.getavatar(e.nodex,e.nodey);try{n&&n.scanned?n.click():this.player.wait()}catch(e){return void this.disconnect(e)}}else this.player.enter(r)&&this.placenode(r,!0);this.refresh()}},e.prototype.placetile=function(e,t,r){var n=document.createElement("div");this.tiles.push(n),n.classList.add("tile"),n.nodeid=r.id,n.nodex=e,n.nodey=t;var i=this;n.onclick=function(){i.clicktile(this)};var o=n.style;return o.width="2.5em",o.height="2.5em",o.left=2.5*(1.1*r.x*h.default.nodesize+e)+"em",o.top=2.5*(1.1*r.y*h.default.nodesize+t)+"em",n},e.prototype.placespacer=function(){for(var e=0,t=0,r=this.tiles,n=Array.isArray(r),i=0,r=n?r:r[Symbol.iterator]();;){var o;if(n){if(i>=r.length)break;o=r[i++]}else{if(i=r.next(),i.done)break;o=i.value}var a=o;a.offsetLeft>e&&(e=a.offsetLeft),a.offsetTop>t&&(t=a.offsetTop)}var s=document.createElement("div");s.classList.add("spacer"),s.style.top=document.body.scrollTop+t+"px",s.style.left=document.body.scrollLeft+e+"px",this.map.appendChild(s)},e.prototype.placenode=function(e,t){if(this.drawn.indexOf(e)<0){this.drawn.push(e);for(var r=0;r<h.default.nodesize;r++)for(var n=0;n<h.default.nodesize;n++)this.map.appendChild(this.placetile(r,n,e))}if(t)for(var i=e.getneighbors(),o=Array.isArray(i),a=0,i=o?i:i[Symbol.iterator]();;){var s;if(o){if(a>=i.length)break;s=i[a++]}else{if(a=i.next(),a.done)break;s=a.value}var c=s;this.placenode(c,!1)}var l=this;setTimeout(function(){l.placespacer()},500)},e.prototype.draw=function(){r.console.system=this.system;for(var e=this.system.nodes,t=Array.isArray(e),n=0,e=t?e:e[Symbol.iterator]();;){var i;if(t){if(n>=e.length)break;i=e[n++]}else{if(n=e.next(),n.done)break;i=n.value}var o=i;o.visited&&this.placenode(o,!0)}this.scroll(),this.refresh()},e.prototype.scroll=function(){var e=this;e:for(var t=this.tiles,r=Array.isArray(t),n=0,t=r?t:t[Symbol.iterator]();;){var i,o=function(){if(r){if(n>=t.length)return"break";i=t[n++]}else{if(n=t.next(),n.done)return"break";i=n.value}var o=i;if(o.nodeid==e.player.node.id&&o.nodex==e.player.x&&o.nodey==e.player.y)return setTimeout(function(){o.scrollIntoView()},250),{v:void 0}}();switch(o){case"break":break e;default:if("object"===(void 0===o?"undefined":f(o)))return o.v}}},e.prototype.addimage=function(e,t){e.avatar=t,e.scanned=t.scanned;var r=document.createElement("img");r.src=t.image,r.title=t.tooltip,e.appendChild(r),e.image=r},e.prototype.removeimage=function(e){e.avatar=null,e.image.style.opacity=0;var t=e.image;e.image=null,setTimeout(function(){e.removeChild(t)},2e3)},e.prototype.printmessages=function(){this.console.innerHTML="";for(var e=r.console.next();e;e=r.console.next()){var t=!1;if(0==e.alert)t="white";else if(1==e.alert)t="yellow";else{if(2!=e.alert)throw"Unknown alert level";t="red"}var n=document.createElement("span");n.style.color=t,n.appendChild(document.createTextNode(e.text)),this.console.appendChild(n)}this.console.scrollTop=this.console.scrollHeight},e.prototype.refreshtile=function(e){var t=this.system.nodes[e.nodeid];if(0==e.style.opacity&&setTimeout(function(){e.classList.add("discovered")},1),t.visited){e.visited||(e.classList.add(t.name),e.visited=!0);var r=t.getavatar(e.nodex,e.nodey);r&&!r.show()&&(r=!1),!e.image||r&&r==e.avatar&&e.scanned==r.scanned||this.removeimage(e),r&&r!=e.avatar&&this.addimage(e,r),r&&this.player.target==r?e.classList.add("target"):e.classList.remove("target")}},e.prototype.disconnect=function(e){if(!(e instanceof a.Disconnect))throw e;this.refresh(!1),this.system.disconnect(e),this.showconsole=!1,this.map.innerHTML="",this.console.innerHTML="",this.messaging.publish(new a.ShowView("CharacterScreen")),e.win&&this.messaging.publish(new a.ShowView("Win"))},e.prototype.refresh=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];try{if(e)for(;this.system.act(););}catch(e){return void this.disconnect(e)}if(this.printmessages(),this.system.revealed)for(var t=this.system.nodes,r=Array.isArray(t),n=0,t=r?t:t[Symbol.iterator]();;){var i;if(r){if(n>=t.length)break;i=t[n++]}else{if(n=t.next(),n.done)break;i=n.value}var o=i;this.placenode(o,!1)}for(var s=this.tiles,c=Array.isArray(s),l=0,s=c?s:s[Symbol.iterator]();;){var u;if(c){if(l>=s.length)break;u=s[l++]}else{if(l=s.next(),l.done)break;u=l.value}var d=u;this.refreshtile(d)}this.messaging.publish(new a.Refresh("ProgramBar"))},e}())||p}),define("cyberspace/program-bar",["exports","../modules/deck","../modules/cyberspace/system","../modules/cyberspace/console","aurelia-framework","aurelia-templating-resources","./infojack-cyberspace","../modules/sound","aurelia-event-aggregator","../messages"],function(e,t,r,n,i,o,a,s,c,l){"use strict";function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.ProgramBar=void 0;var d,p;e.ProgramBar=(d=(0,i.inject)(o.BindingSignaler,c.EventAggregator))(p=function(){function e(t,r){u(this,e),this.signals=t,this.messaging=r;var n=this;this.messaging.subscribe(l.Refresh,function(e){"ProgramBar"==e.target&&n.refresh(!1)})}return e.prototype.attached=function(){this.collapsed=!0,t.deck.sort(),this.refresh(!1)},e.prototype.gethpcolor=function(e){var t=[124,252,0],r=[255,0,0];return"rgb("+(r[0]+e*(t[0]-r[0]))+","+(r[1]+e*(t[1]-r[1]))+","+(r[2]+e*(t[2]-r[2]))+")"},e.prototype.refreshdetails=function(){var e=this.system.player.character,r=e.hp/e.maxhp;this.hpcolor="color:"+this.gethpcolor(r)+";",this.hp=Math.round(100*r),this.load=t.deck.memoryused,this.totalload=t.deck.memory;var n=t.deck.getload();this.loadcolor=0==n?"white":1==n?"orange":"red",this.loadcolor="color:"+this.loadcolor+";",this.freestorage=t.deck.storage-t.deck.storageused},e.prototype.refresh=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.programs=t.deck.programs.slice(),this.system=(0,r.getactive)(),this.refreshdetails(),this.signals.signal("update-program-bar"),e&&(0,a.refresh)()},e.prototype.toggle=function(){this.collapsed=!this.collapsed},e.prototype.isloaded=function(e){return t.deck.loaded.indexOf(e)>=0},e.prototype.geticonclass=function(e){return this.isloaded(e)?"loaded":"unloaded"},e.prototype.doload=function(e){var t=e.load(this.system);return s.sound.play(t?s.sound.LOAD:s.sound.ERROR),this.refresh(),t},e.prototype.dounload=function(e){var t=e.unload(this.system);return t&&s.sound.play(s.sound.UNLOAD),this.refresh(),t},e.prototype.run=function(e){this.isloaded(e)?e.run(this.system):n.console.print("Load "+e.name+" first..."),this.refresh()},e}())||p}),define("modules/deck",["exports","./character/character","./cyberspace/console","./sound","./program/program","./program/armor","./program/blaster","./program/eject"],function(e,t,r,n,i,o,a,s){"use strict";function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.deck=void 0;for(var l=[10,5,5,5],u=(function(){function e(){c(this,e),this.memory=10,this.memoryused=0,this.memorytemporary=0,this.storage=20,this.storageused=0,this.deckgrade=1,this.memorygrade=0,this.storagegrade=0,this.stealthgrade=0,this.loaded=[],this.programs=[]}return e.prototype.upgrade=function e(r,n,i,o,a){if(4==n)return"Already at maximum grade.";var e=n+1;return r&&e>this.deckgrade?"Requires a deck upgrade.":(i+=2*(e-1),t.hero.wealth<i-10?"Requires "+(i-10)+"¥.":(o+=1*(e-1),t.hero.getelectronics()<o-10?"Requires electronics "+(0,t.sign)(o-10)+".":a&&!t.hero.buy(i)?"Unexpected not buy error.":""))},e.prototype.upgradedeck=function(e){var t=this.upgrade(!1,this.deckgrade,10,12,e);return""==t&&e&&(this.deckgrade+=1),t},e.prototype.upgradememory=function(e){var t=this.upgrade(!0,this.memorygrade,9,14,e);return""==t&&e&&(this.memory+=l[this.memorygrade],this.memorygrade+=1),t},e.prototype.upgradestorage=function(e){var t=this.upgrade(!0,this.storagegrade,8,14,e);return""==t&&e&&(this.storage+=10,this.storagegrade+=1),t},e.prototype.upgradestealth=function(e){var t=this.upgrade(!0,this.stealthgrade,10,12,e);return""==t&&e&&(this.stealthgrade+=1),t},e.prototype.assign=function(e){for(var t in e)t in this&&(this[t]=e[t])},e.prototype.sort=function(){this.programs.sort(function(e,t){return e.compare(t)}),this.loaded.sort(function(e,t){return e.compare(t)})},e.prototype.getload=function(){var e=this.memoryused/this.memory;return e>=.75?2:e>=.5?1:0},e.prototype.connect=function(e){var t=this.loaded;this.loaded=[];for(var r=t,n=Array.isArray(r),i=0,r=n?r:r[Symbol.iterator]();;){var o;if(n){if(i>=r.length)break;o=r[i++]}else{if(i=r.next(),i.done)break;o=i.value}o.load(e,!0)}},e.prototype.disconnect=function(){this.memoryused=0,this.memorytemporary=0,this.storageused=0},e.prototype.getfreestorage=function(){return this.storage-this.storageused},e.prototype.act=function(e,t){for(var o=d.loaded.slice(),a=Array.isArray(o),s=0,o=a?o:o[Symbol.iterator]();;){var c;if(a){if(s>=o.length)break;c=o[s++]}else{if(s=o.next(),s.done)break;c=s.value}var l=c;if(l.duration!=i.SESSION){if(l.duration-=1,l.duration>0)continue;n.sound.play(n.sound.UNLOAD),r.console.print(l.name+" expired..."),l.unload(t)}}for(var u=d.loaded.slice(),p=Array.isArray(u),h=0,u=p?u:u[Symbol.iterator]();;){var f;if(p){if(h>=u.length)break;f=u[h++]}else{if(h=u.next(),h.done)break;f=h.value}var g=f;e<g.hackingdc&&(n.sound.play(n.sound.UNLOAD),r.console.print("You failed to keep "+g.name+" running..."),g.unload(t))}},e}()),d=e.deck=new u,p=[o.grades[0],a.grades[0],s.eject],h=0;h<p.length;h++){var f=p[h];f.buy()||alert("Cannot buy "+f.name),d.loaded.push(f)}}),define("modules/grade",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.grades=["0","I","II","III","IV","V","VI","VII","VIII","IX","X","XI"]}),define("modules/rpg",["exports"],function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=e.CRITICALHIT=9001,n=(e.CRITICALMISS=-r,function(){function e(){t(this,e)}return e.prototype.r=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},e.prototype.d=function(e,t){for(var r=0,n=0;n<e;n++)r+=this.r(1,t);return r},e.prototype.choose=function(e){return e[this.r(0,e.length-1)]},e.prototype.chancein=function(e){return 1==this.r(1,e)},e.prototype.shuffle=function(e){for(var t=e.length-1;t>0;t--){var r=this.r(0,t),n=e[t];e[t]=e[r],e[r]=n}return e},e.prototype.randomize=function(e){return this.r(1,e)-this.r(1,e)},e}());e.rpg=new n}),define("modules/save",["exports","./character/character","../environment","./deck","./program/program"],function(e,t,r,n,i){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.save=void 0;var a=(function(e){e&&e.__esModule?e:{default:e}}(r),function(){function e(){o(this,e)}return e.prototype.checkload=function(){return localStorage.getItem("infojack-save")},e.prototype.debug=function(){return},e.prototype.saveprograms=function(e){return e.map(function(e){return e.name})},e.prototype.save=function(){var e={};e.hero=t.hero,e.deck=Object.assign({},n.deck),e.deck.loaded=this.saveprograms(e.deck.loaded),e.deck.programs=this.saveprograms(e.deck.programs),localStorage.setItem("infojack-save",JSON.stringify(e)),this.debug()},e.prototype.loadprograms=function(e){for(var t=[],r=[],n=e.programs,o=Array.isArray(n),a=0,n=o?n:n[Symbol.iterator]();;){var s;if(o){if(a>=n.length)break;s=n[a++]}else{if(a=n.next(),a.done)break;s=a.value}var c=s,l=i.PROGRAMS.get(c);t.push(l),e.loaded.indexOf(c)>=0&&r.push(l)}e.programs=t,e.loaded=r},e.prototype.populate=function(e){t.hero.assign(e.hero),n.deck.assign(e.deck),this.loadprograms(n.deck),this.debug()},e.prototype.load=function(){var e=this.checkload();return!!e&&(e=JSON.parse(e),this.populate(e),this.initialize(),!0)},e.prototype.initialize=function(){},e.prototype.clear=function(){localStorage.setItem("infojack-save","")},e}());e.save=new a}),define("modules/sound",["exports"],function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=[],n=!1,i=function(){function e(){t(this,e),this.ALERTCANCEL="CancelAlert.wav",this.ALERTRED="RedAlert.wav",this.ALERTYELLOW="YellowAlert.wav",this.ATTACK="9mmPistol.wav",this.CONNECT="Dialup.wav",this.CRASH="Spike.wav",this.DISABLE="CancelAlert.wav",this.DISCONNECTED="EndOfLine.wav",this.ERROR="Computer Error Alert-SoundBible.com-783113881.mp3",this.ICEATTACK="Pulse1.wav",this.ICEDEATH="Error.wav",this.ICEENTER="ICEEnter.wav",this.ICELEAVE="ICEEnter.wav",this.LOAD="Misc2.wav",this.MOVE="Move.wav",this.SCAN="Ping.wav",this.SUCCESS="Deceive.wav",this.QUERY="ICELeave.wav",this.UNLOAD="Misc5.wav"}return e.prototype.process=function(){if(0==r.length)return void(n=!1);n=!0;var e=new Audio(r.shift()),t=this;e.onended=function(){t.process()},e.play()},e.prototype.play=function(e){e="./sounds/"+e,r.indexOf(e)>=0||(r.push(e),n||this.process())},e}();e.sound=new i}),define("resources/index",["exports"],function(e){"use strict";function t(e){}Object.defineProperty(e,"__esModule",{value:!0}),e.configure=t}),define("modules/character/character",["exports","./occupation","./class/webcrawler","./skill","./feat","../rpg","../../environment"],function(e,t,r,n,i,o,a){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e){return e>=0?"+"+e:e}Object.defineProperty(e,"__esModule",{value:!0}),e.hero=e.Character=e.costs=void 0,e.sign=c;var l=function(e){return e&&e.__esModule?e:{default:e}}(a),u=Math.round(39/(l.default.fullattributes?1:2)),d=(e.costs={7:-4,8:-2,9:-1,10:0,11:1,12:2,13:3,14:5,15:7,16:10,17:13,18:17},e.Character=function(){function e(t){s(this,e),this.name=t,this.image=o.rpg.r(0,l.default.playeravatars-1),this.hp=0,this.maxhp=0,this.strength=7,this.dexterity=7,this.constitution=7,this.intelligence=7,this.wisdom=7,this.charisma=7,this.pointbuy=u,this.pointextra=0,this.wealth=5,l.default.wealth&&(this.wealth=l.default.wealth),this.classskills=[],this.classes={},this.level=0,this.ranks=0,this.bab=0,this.edgedice=[0,0],this.edge=0,this.fort=0,this.ref=0,this.will=0,this.defence=0,this.init=0,this.speed=30,this.talent=0,l.default.extratalents&&(this.talent+=l.default.extratalents),this.contacts=0,this.feats=[],this.newfeats=2;for(var r=n.skills.values(),i=Array.isArray(r),a=0,r=i?r:r[Symbol.iterator]();;){var c;if(i){if(a>=r.length)break;c=r[a++]}else{if(a=r.next(),a.done)break;c=a.value}this[c.name.replace(" ","").toLowerCase()]=0}}return e.prototype.assign=function(e){for(var t in e)t in this&&(this[t]=e[t])},e.prototype.setoccupation=function(e){this.wealth+=e.wealth;for(var t=e.skills,r=Array.isArray(t),n=0,t=r?t:t[Symbol.iterator]();;){var i;if(r){if(n>=t.length)break;i=t[n++]}else{if(n=t.next(),n.done)break;i=n.value}var o=i;this.addclassskill(o)}},e.prototype.addclassskill=function(e){this.classskills.indexOf(e)<0&&this.classskills.push(e)},e.prototype.connect=function(){var t=new e;return Object.assign(t,this),this.classes.Webcrawler&&this.enhancecrawler(t),t},e.prototype.enhancecrawler=function(e){e.strength=Math.max(e.strength,e.intelligence),e.dexterity=Math.max(e.dexterity,e.wisdom),e.constitution=Math.max(e.constitution,e.charisma);for(var t=this.constitution+1;t<=e.constitution;t++)t%2==0&&(e.maxhp+=1)
;e.hp=e.maxhp;var r=this.classes.Webcrawler;e.bab-=[0,1,1,2,2,3,3,4,4,5][r-1],e.bab+=r},e.prototype.getmodifier=function(e){return e%2==1&&(e-=1),(e-10)/2},e.prototype.getranks=function(e){return this[e.replace(" ","").toLowerCase()]},e.prototype.setranks=function(e,t){this[e.replace(" ","").toLowerCase()]=t},e.prototype.hasfeat=function(e){e=e.name||e;for(var t=this.feats,r=Array.isArray(t),n=0,t=r?t:t[Symbol.iterator]();;){var i;if(r){if(n>=t.length)break;i=t[n++]}else{if(n=t.next(),n.done)break;i=n.value}var o=i;if(o.name.toLowerCase()==e.toLowerCase())return o}return!1},e.prototype.addfeat=function(e){this.feats.push(e)},e.prototype.getskill=function(e,t,r,n){if(l.default.debug&&void 0===e)throw"Unkwnown skill!";return r&&this.hasfeat(r)&&(e+=n),e+=this.getmodifier(t)},e.prototype.getbluff=function(){return this.getskill(this.bluff,this.charisma,"power of belief",1)},e.prototype.getconcentration=function(){return this.getskill(this.concentration,this.constitution,!1,0)},e.prototype.getdecryption=function(){var e=this.getskill(this.decryption,this.intelligence,"studious",2);return this.hasfeat("power of belief")&&(e+=1),e},e.prototype.getelectronics=function(){return this.getskill(this.electronics,this.intelligence,!1,0)},e.prototype.getforgery=function(){return this.getskill(this.forgery,this.intelligence,"meticulous",2)},e.prototype.getinformation=function(){return this.getskill(this.information,this.charisma,"trustworthy",3)},e.prototype.gethacking=function(){return this.getskill(this.hacking,this.intelligence,"specialized equipment",1)},e.prototype.getperceive=function(){return this.getskill(this.perceive,this.wisdom,!1,0)},e.prototype.getmedicine=function(){return this.getskill(this.medicine,this.wisdom,!1,0)},e.prototype.getstealth=function(){var e=this.getskill(this.stealth,this.dexterity,"stealthy",3);return this.hasfeat("power of belief")&&(e+=1),e},e.prototype.getprofession=function(){return this.getskill(this.profession,this.wisdom,!1,0)},e.prototype.getresearch=function(){return this.getskill(this.research,this.intelligence,"studious",2)},e.prototype.getsearch=function(){var e=this.getskill(this.search,this.intelligence,"meticulous",2);return this.hasfeat("power of belief")&&(e+=1),e},e.prototype.gettechnology=function(){return this.getskill(this.technology,this.intelligence,"educated",3)},e.prototype.getfortitude=function(){return this.fort+this.getmodifier(this.constitution)},e.prototype.getreflexes=function(){return this.ref+this.getmodifier(this.dexterity)},e.prototype.getwill=function(){return this.will+this.getmodifier(this.wisdom)},e.prototype.getinitiative=function(){var e=this.init+this.getmodifier(this.dexterity);return this.hasfeat("improved initiative")&&(e+=4),e},e.prototype.getdefence=function(){return 10+this.defence+this.getmodifier(this.dexterity)},e.prototype.getmelee=function(){return this.bab+this.getmodifier(this.strength)},e.prototype.getranged=function(){return this.bab+this.getmodifier(this.dexterity)},e.prototype.price=function e(t){var e=t>=15?1:0,r=t-this.wealth;return r<1?e:r<=10?e+1:(e+=r-10,e>12?12:e)},e.prototype.buy=function(e){return!(10+this.wealth<e)&&(this.wealth-=this.price(e),this.wealth<0&&(this.wealth=0),!0)},e.prototype.sell=function(e){var t=this.price(e-3-3);return this.wealth+=t,t},e.prototype.upgradewealth=function(){var e=10+this.getprofession();if(e<this.wealth)return 0;var t=1;for(e-=this.wealth;e>=5;)t+=1,e-=5;return t},e.prototype.possess=function(){var e=this.name[this.name.length-1].toLowerCase(),t=this.name+"'";return"s"!=e&&(t+="s"),t},e.prototype.move=function(){return 15/this.speed},e.prototype.updateranks=function(e){"intelligence"==e&&this[e]%2==0&&(this.ranks+=1==this.level?4:1)},e.prototype.learnskill=function(e){if(void 0===this[e])throw"Unknown skill "+e;for(;this[e]<this.level+3&&this.ranks>0;)this[e]+=1,this.ranks-=1},e.prototype.learnability=function(e){if(0==this.ranks&&console.log("Learn skills after abilities!"),void 0===this[e])throw"Unknown ability "+e;for(;this.pointextra>0;)this[e]+=1,this.pointextra-=1,this.updateranks(e)},e.prototype.learnfeat=function(e){var t=i.feats.get(e.toLowerCase());if(!t)throw"Unkwnown feat: "+e;if(0==this.newfeats)return!1;if(!t.validate(this))throw"Invalid feat: "+e;this.addfeat(t)},e.prototype.levelup=function(){return 10!=this.level&&(r.webcrawler.advance(p),!0)},e}()),p=e.hero=new d("Player1");p.setoccupation(t.occupations.adventurer),p.levelup(),p.buy(10)}),define("modules/character/feat",["exports"],function(e){"use strict";function t(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});for(var i=e.feats=new Map,o=e.Feat=function(){function e(t,r){n(this,e),this.name=t,this.description=r,this.talent=!1}return e.prototype.validate=function(e){return!e.hasfeat(this)},e.prototype.apply=function(e){e.addfeat(this)},e}(),a=(e.Talent=function(e){function i(r,o){n(this,i);var a=t(this,e.call(this,r,o));return a.talent=!0,a}return r(i,e),i}(o),function(e){function i(){return n(this,i),t(this,e.call(this,"Educated","+3 to Techonology rolls"))}return r(i,e),i}(o)),s=function(e){function i(){return n(this,i),t(this,e.call(this,"Meticulous","+2 to Forgery and Search rolls"))}return r(i,e),i}(o),c=function(e){function i(){return n(this,i),t(this,e.call(this,"Stealthy","+3 to Stealth rolls"))}return r(i,e),i}(o),l=function(e){function i(){return n(this,i),t(this,e.call(this,"Studious","+2 to Decrypt and Research rolls"))}return r(i,e),i}(o),u=function(e){function i(){return n(this,i),t(this,e.call(this,"Trustworthy","+3 to Information rolls"))}return r(i,e),i}(o),d=function(e){function i(){return n(this,i),t(this,e.call(this,"Improved initiative","+4 to initiative rolls"))}return r(i,e),i}(o),p=function(e){function i(){return n(this,i),t(this,e.call(this,"Windfall","+3 wealth (may be taken multiple times)"))}return r(i,e),i.prototype.validate=function(e){return!0},i.prototype.apply=function(e){e.wealth+=3},i}(o),h=[new a,new d,new s,new c,new c,new l,new u,new p],f=0;f<h.length;f++){var g=h[f];i.set(g.name.toLowerCase(),g)}}),define("modules/character/occupation",["exports","./skill"],function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.occupations=void 0;var n=function e(n,i){r(this,e),this.wealth=n,this.skills=i,(0,t.checkskills)(i)};(e.occupations={}).adventurer=new n(1,["Bluff","Technology","Stealth","Perceive","Medicine"])}),define("modules/character/skill",["exports"],function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e){for(var t=e,r=Array.isArray(t),n=0,t=r?t:t[Symbol.iterator]();;){var o;if(r){if(n>=t.length)break;o=t[n++]}else{if(n=t.next(),n.done)break;o=n.value}var a=o;i.get(a)||alert("Unknown skill: "+a)}return e}Object.defineProperty(e,"__esModule",{value:!0}),e.checkskills=r;for(var n=function e(r,n,i){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t(this,e),this.name=r,this.ability=n,this.description=i,this.pending=o,o&&console.log("Pending: "+this.name)},i=e.skills=new Map,o=[new n("Bluff","Charisma","Convince ICE you're not an intruder"),new n("Concentration","Constitution","Ignore system alert penalties"),new n("Decryption","Intelligence","Break into protected data"),new n("Electronics","Intelligence","Install hardware"),new n("Forgery","Intelligence","Forge authentication credentials"),new n("Hacking","Intelligence","Act on the Web"),new n("Information","Charisma","Find more shopping items and missions",!0),new n("Medicine","Wisdom","Treat your injuries",!0),new n("Perceive","Wisdom","Passive node scanning."),new n("Profession","Wisdom","Earn more money per contract"),new n("Research","Intelligence","Do perimeter checks on Frames",!0),new n("Search","Intelligence","Active node scanning."),new n("Stealth","Dexterity","Avoid being detected on the Web"),new n("Technology","Intelligence","Create your own programs")],a=0;a<o.length;a++){var s=o[a];i.set(s.name,s)}}),define("modules/cyberspace/console",["exports"],function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function e(r,n){t(this,e),this.text=r,this.alert=n.alert},n=function(){function e(){t(this,e),this.messages=[],this.system=!1}return e.prototype.print=function(e){this.system&&this.messages.push(new r(e,this.system))},e.prototype.next=function(){return this.messages.shift()},e.prototype.log=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];window.console.log(t)},e}();e.console=new n}),define("modules/cyberspace/system",["exports","../rpg","./node/node","./node/datastore","./node/cpu","./node/portal","./node/interface","../../environment","./avatar/ice/scout","./avatar/ice/greeter","./console","../sound","../deck","./avatar/player","../character/character","../world/names"],function(e,t,r,n,i,o,a,s,c,l,u,d,p,h,f,g){"use strict";function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(){return k}function v(e){k=e}function b(){if(!k){k=new x(w.default.systemlevel||f.hero.level)}return k.connect(),k}Object.defineProperty(e,"__esModule",{value:!0}),e.System=void 0,e.getactive=m,e.setactive=v,e.connect=b;var w=function(e){return e&&e.__esModule?e:{default:e}}(s),k=!1,x=e.System=function(){function e(t){y(this,e),this.revealed=!1,this.level=t,this.level<1?this.level=1:this.level>20&&(this.level=20),this.alert=0,this.nodes=[],this.ice=[],this.reentry=[],this.entrance=null,this.disconnected=!1,this.name=(0,g.name)(t),this.generatemap(),this.definenodes();for(var r=this.nodes,n=Array.isArray(r),i=0,r=n?r:r[Symbol.iterator]();;){var o;if(n){if(i>=r.length)break;o=r[i++]}else{if(i=r.next(),i.done)break;o=i.value}o.generate()}this.generateice()}return e.prototype.debug=function(){if(w.default.revealmap&&this.reveal(),w.default.scannodes)for(var e=this.nodes,t=Array.isArray(e),r=0,e=t?e:e[Symbol.iterator]();;){var n;if(t){if(r>=e.length)break;n=e[r++]}else{if(r=e.next(),r.done)break;n=r.value}for(var i=n,o=i.avatars.slice(),a=Array.isArray(o),s=0,o=a?o:o[Symbol.iterator]();;){var c;if(a){if(s>=o.length)break;c=o[s++]}else{if(s=o.next(),s.done)break;c=s.value}var l=c;l.scan(),l.scanned=!0}}},e.prototype.getnode=function(e,t){for(var r=this.nodes,n=Array.isArray(r),i=0,r=n?r:r[Symbol.iterator]();;){var o;if(n){if(i>=r.length)break;o=r[i++]}else{if(i=r.next(),i.done)break;o=i.value}var a=o;if(e==a.x&&t==a.y)return a}return null},e.prototype.generatemap=function(){this.nodes.push(new i.Cpu(0,0,this));for(var e=t.rpg.r(3,7)+this.level,n=0,o=0;this.nodes.length<e;){var a=t.rpg.choose(this.nodes);if(!t.rpg.chancein(5-a.getneighbors().length)){var s=a.x,c=a.y;t.rpg.chancein(2)?s+=t.rpg.chancein(2)?1:-1:c+=t.rpg.chancein(2)?1:-1,this.getnode(s,c)||(this.nodes.push(new r.Node(s,c,this)),s<n&&(n=s),c<o&&(o=c))}}for(var l=this.nodes,u=Array.isArray(l),d=0,l=u?l:l[Symbol.iterator]();;){var p;if(u){if(d>=l.length)break;p=l[d++]}else{if(d=l.next(),d.done)break;p=d.value}var h=p;h.x-=n,h.y-=o}},e.prototype.replacenode=function(e,t){var r=this.nodes[t];e.id=r.id,e.x=r.x,e.y=r.y,this.nodes[t]=e},e.prototype.findentrance=function(e){var r=this.nodes.filter(function(t){return 0!=t.id&&t.getneighbors().length==e});return 0==r.length?-1:this.nodes.indexOf(t.rpg.choose(r))},e.prototype.generatenode=function(){return t.rpg.chancein(10)?new i.Cpu(-1,-1,this):t.rpg.chancein(3)?new a.Interface(-1,-1,this):new n.Datastore(-1,-1,this)},e.prototype.definenodes=function(){this.nodes[0].setmain();for(var e=-1,r=1;e==-1;r++)e=this.findentrance(r);this.entrance=new o.Portal(-1,-1,this),this.replacenode(this.entrance,e);for(var n=1;n<this.nodes.length;n++)if(n!=e){var i=this.nodes[n].getneighbors().length,a=i>2&&t.rpg.chancein(5-i);a||this.replacenode(this.generatenode(),n)}},e.prototype.reveal=function(){this.revealed=!0;for(var e=this.nodes,t=Array.isArray(e),r=0,e=t?e:e[Symbol.iterator]();;){var n;if(t){if(r>=e.length)break;n=e[r++]}else{if(r=e.next(),r.done)break;n=r.value}n.visited=!0}},e.prototype.raisealert=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.alert;if(this.alert+=e,this.alert>2?this.alert=2:this.alert<0&&(this.alert=0),2==this.alert&&(this.player.credentials=-20),!t&&this.alert!=r){var n=this.alert<r;n&&d.sound.play(d.sound.ALERTCANCEL),0==this.alert?u.console.print("The alert is cleared."):1==this.alert?(u.console.print("The system is now in yellow alert..."),n||d.sound.play(d.sound.ALERTYELLOW)):(u.console.print("The system is now in red alert!"),n||d.sound.play(d.sound.ALERTRED))}},e.prototype.generateice=function(){this.ice.push(new c.Scout(this,this.level)),this.ice.push(new l.Greeter(this,this.level))},e.prototype.act=function(){if(this.disconnected)throw this.disconnected;for(var e=this.player,t=this.nodes,r=Array.isArray(t),n=0,t=r?t:t[Symbol.iterator]();;){var i;if(r){if(n>=t.length)break;i=t[n++]}else{if(n=t.next(),n.done)break;i=n.value}for(var o=i,a=o.avatars,s=Array.isArray(a),c=0,a=s?a:a[Symbol.iterator]();;){var l;if(s){if(c>=a.length)break;l=a[c++]}else{if(c=a.next(),c.done)break;l=c.value}var u=l;u.ap<e.ap&&(e=u)}}return e.act(),e!=this.player},e.prototype.deployice=function(){if(!w.default.noice)for(var e=this.ice,t=Array.isArray(e),r=0,e=t?e:e[Symbol.iterator]();;){var n;if(t){if(r>=e.length)break;n=e[r++]}else{if(r=e.next(),r.done)break;n=r.value}var i=n;i.enter(this.nodes[0])}},e.prototype.connect=function(){k=this,this.player=new h.Player(this),p.deck.connect(this),this.raisealert(-1,!0),u.console.system=this,this.player.connect(),this.player.enter(this.entrance),this.deployice(),this.debug()},e.prototype.disconnect=function(e){u.console.system=!1,this.disconnected=!1,this.revealed=!1,this.player.disconnect(e);for(var t=this.reentry,r=Array.isArray(t),n=0,t=r?t:t[Symbol.iterator]();;){var i;if(r){if(n>=t.length)break;i=t[n++]}else{if(n=t.next(),n.done)break;i=n.value}var o=i;this.ice.push(o)}this.reentry=[];for(var a=this.nodes,s=Array.isArray(a),c=0,a=s?a:a[Symbol.iterator]();;){var l;if(s){if(c>=a.length)break;l=a[c++]}else{if(c=a.next(),c.done)break;l=c.value}l.reset()}p.deck.disconnect()},e}()}),define("modules/program/armor",["exports","./program","../cyberspace/console"],function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.grades=void 0;for(var a=function(e){function a(r){n(this,a);var o=i(this,e.call(this,"Armor",r,"armor.png",1,4,10,20));return o.duration=t.SESSION,o.defence=r-1+4,o}return o(a,e),a.prototype.modify=function(e,t){t.character.defence+=e,r.console.print("Your defence is now "+t.character.getdefence()+".")},a.prototype.load=function(t){return!!e.prototype.load.call(this,t)&&(this.modify(this.defence,t.player),!0)},a.prototype.unload=function(t){return!!e.prototype.unload.call(this,t)&&(this.modify(-this.defence,t.player),!0)},a.prototype.describe=function(){return"Adds +"+this.defence+" to defence"},a.prototype.run=function(e){r.console.print("Armor is already active.")},a}(t.Program),s=e.grades=[],c=4;c<=10;c++)s.push(new a(c-3))}),define("modules/program/blaster",["exports","./program","../cyberspace/console","../rpg","../sound"],function(e,t,r,n,i){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.grades=void 0;for(var c=function(e){function t(r){o(this,t);var n=a(this,e.call(this,"Blaster",r,"blaster.png",2,5,10,20));return n.duration=10,n.bonus=r-1,n}return s(t,e),t.prototype.run=function(e){var t=e.player;if(!t.target)return void r.console.print("Select a target first...");e.player.ap+=this.apcost,i.sound.play(i.sound.ATTACK);var o=n.rpg.r(1,6)+this.bonus;t.attack(t.character.getranged(),t.target,o)||r.console.print("You miss..."),e.raisealert(2)},t.prototype.describe=function(){return"Deals 1d6+"+this.bonus+" damage (raises alarm)"},t}(t.Program),l=e.grades=[],u=1;u<=11;u++)l.push(new c(u))}),define("modules/program/eject",["exports","./program","../../messages"],function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.eject=void 0;var a=function(e){function t(r,o,a,s,c,l,u){return n(this,t),i(this,e.call(this,"Eject",0,"eject.png",1,4,6,10))}return o(t,e),t.prototype.describe=function(){return"Disconnects from a system"},t.prototype.run=function(e){window.confirm("Are you sure you want to leave?")&&(e.disconnected=new r.Disconnect)},t}(t.Program);e.eject=new a}),define("modules/program/program",["exports","../deck","../grade","../cyberspace/console","../character/character"],function(e,t,r,n,i){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Program=e.PROGRAMS=e.SESSION=void 0;var a=e.SESSION=Number.MAX_SAFE_INTEGER,s=e.PROGRAMS=new Map;e.Program=function(){function e(t,n,i,c,l,u,d){o(this,e),this.hackingdc=l,this.purchasedc=u,this.programmingdc=d,this.size=c,this.apcost=.5,this.duration=a,this.basename=t,this.name=t,this.image="./images/software/"+i,this.grade=n,n&&(this.name+=" "+r.grades[n],n>1&&this.upgrade(n-1)),s.set(this.name,this)}return e.prototype.upgrade=function(e){this.hackingdc+=e,this.purchasedc+=e,this.programmingdc+=e,this.size+=e/2},e.prototype.describe=function(){return this.name},e.prototype.conflict=function(e){return this.basename==e.basename},e.prototype.validate=function(){for(var e=t.deck.loaded,r=Array.isArray(e),i=0,e=r?e:e[Symbol.iterator]();;){var o;if(r){if(i>=e.length)break;o=e[i++]}else{if(i=e.next(),i.done)break;o=i.value}var a=o;if(this.conflict(a))return n.console.print("You cannot load "+this.name+" while "+a.name+" is loaded..."),!1}return!(t.deck.memoryused+this.size>t.deck.memory)||(n.console.print("This program requires "+this.size+" free blocks."),!1)},e.prototype.boot=function(e){var t=e.player;return t.roll(t.character.gethacking())>=this.hackingdc||(n.console.print("You failed to load "+this.name+"..."),!1)},e.prototype.load=function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!!this.validate()&&(e.player.ap+=this.apcost,!(!r&&!this.boot(e))&&(n.console.print(this.name+" loaded."),t.deck.memoryused+=this.size,t.deck.loaded.push(this),!0))},e.prototype.unload=function(e){var r=t.deck.loaded.indexOf(this);return!(r<0)&&(n.console.print(this.name+" unloaded."),e.player.ap+=this.apcost,t.deck.memoryused-=this.size,t.deck.loaded.splice(r,1),!0)},e.prototype.run=function(e){},e.prototype.compare=function(e){return this.basename==e.basename?this.grade-e.grade:this.basename.localeCompare(e.basename)},e.prototype.buy=function(){return!!i.hero.buy(this.purchasedc)&&(t.deck.programs.push(this),!0)},e}()}),define("modules/world/business",[],function(){"use strict"}),define("modules/world/names",["exports","../rpg"],function(e,t){"use strict";function r(e,r){var n=t.rpg.r(10,25),i=100*(e-1)/19,o=i-n;o<0?o=0:o>100-n&&(o=100-n);var a=i+n;a>100?a=100:a<n&&(a=n),o=Math.round(o),a=Math.round(a);var s=t.rpg.r(o,a);return r[Math.round((r.length-1)*s/100)]}function n(e){return e<1?e=1:e>20&&(e=20),r(e,i)+" "+r(e,o).toLowerCase()}Object.defineProperty(e,"__esModule",{value:!0}),e.name=n;var i=["Chilean","Pakistani","Colombian","Philippine","Malay","Singaporean","Danish","Irish","African","Zionist","Norse","Austrian","Iranian","Thai","Belgian","Polish","Swedish","Argentine","Swiss","Arabic","Dutch","Turkish","Indonesian","Aztec","Spanish","Australian","Korean","Russian","Canadian","Italian","Brazilian","French","Indian","British","German","Japanese","Chinese","American"],o=["Transportation","Distribution","Commerce","Utilities","Health","Finance","Energy","Construction","Finance","Services","Commerce","Construction","Transportation","Commerce","Finance","Auto","Transportation","Distribution","Finance","Commerce","Services","Energy","Electronics","Commerce","Tobacco","Communications","Transportation","Foods","Commerce","Finance","Communication","Foods","Auto","Energy","Commerce","Machinery","Tourism","Transportation","Distribution","Military","Chemicals","Mining","Health","Foods","Media","Biotechnology","Communication","Real estate","Technology","Finance","Commerce","Insurance","Electronics","Pharmaceuticals","Technology","Fuel","Banking"]}),define("modules/character/class/class",["exports","../skill","../../rpg","./webcrawler"],function(e,t,r,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Class=void 0,(e.Class=function(){function e(){i(this,e),this.talents=new Map}return e.prototype.advance=function(e){var t=e.classes[this.name];if(t||(t=0),(t+=1)>10)throw"Cannot advance past level 10!";e.level+=1,this.levelup(e,t),e.classes[this.name]=t},e.prototype.upgradehp=function(e){if(1==e.level)e.maxhp=this.hd,e.hp=e.maxhp;else{var t=Math.round((1+this.hd)/2);e.maxhp+=t,e.hp+=t}},e.prototype.upgraderanks=function(e,t){var r=this.ranks+e.getmodifier(e.intelligence);if(e.ranks+=Math.max(1,r),1==e.level&&(e.ranks*=4),1==t)for(var n=this.skills,i=Array.isArray(n),o=0,n=i?n:n[Symbol.iterator]();;){var a;if(i){if(o>=n.length)break;a=n[o++]}else{if(o=n.next(),o.done)break;a=o.value}var s=a;e.addclassskill(s)}},e.prototype.levelup=function(e,t){for(var r=["bab","fort","ref","will","defence"],n=0;n<r.length;n++){var i=r[n];this.upgradestat(t,i,e)}this.upgradeedgedice(t,e),this.upgradereputation(e,t),this.upgradehp(e),this.upgraderanks(e,t),e.level%3==0&&(e.newfeats+=1),e.level%4==0&&(e.pointextra+=1),e.level>1&&e.upgradewealth()},e.prototype.upgradestat=function(e,t,r){var n=e>1?this[t][e-2]:0,i=this[t][e-1];r[t]+=i-n},e.prototype.upgradeedgedice=function(e,t){var r=this.edgedice[e-1].split("d");r=[parseInt(r[0]),parseInt(r[1])],(r[0]>t.edgedice[0]||r[0]==t.edgedice[0]&&r[1]>=t.edgedice[1])&&(t.edgedice[0]=r[0]),t.edgedice[1]=r[1],1==t.level&&(t.edge+=t.edgedice[0])},e.prototype.upgradereputation=function(e,t){1==t?this.reputation[0]:(this.reputation[t-1],this.reputation[t-2])},e.prototype.check=function(e){return(0,t.checkskills)(e)},e}()).classes=new Map}),define("modules/character/class/webcrawler",["exports","../feat","./class"],function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.webcrawler=void 0;var a=function(e){function t(){return n(this,t),i(this,e.call(this,"The web is alive","Adds Will to Perception rolls (requires level 3 and Power of Belief)"))}return o(t,e),t.prototype.validate=function(t){return e.prototype.validate.call(this,t)&&t.level>=3&&t.hasfeat("power of belief")},t}(t.Talent),s=function(e){function t(){return n(this,t),i(this,e.call(this,"Specialized equipment","+1 to hacking rolls, +5 speed, safe disconnections (requires 4 in hacking, electronics and technology)"))}return o(t,e),t.prototype.validate=function(t){return e.prototype.validate.call(this,t)&&t.hacking>=4&&t.electronics>=4&&t.technology>=4},t.prototype.apply=function(t){e.prototype.apply.call(this,t),t.speed+=5},t}(t.Talent),c=function(e){function r(){n(this,r);var o=i(this,e.call(this));o.name="Webcrawler",o.skills=o.check(["Hacking","Electronics","Decryption","Forgery","Technology","Profession","Research","Technology","Search"]),o.hd=4,o.ranks=7,o.bab=[0,1,1,2,2,3,3,4,4,5],o.fort=[0,0,1,1,1,2,2,2,3,3],o.ref=[1,2,2,2,3,3,4,4,4,5],o.will=[1,2,2,2,3,3,4,4,4,5],o.defence=[1,1,2,2,2,3,3,3,4,4],o.reputation=[0,1,1,2,2,3,3,4,4,5],o.edgedice=["1d4","1d4","2d4","2d6","2d6","3d6","3d8","3d8","4d8","4d10"];for(var c=[new t.Talent("Hackmastery","+2 to all damage inflicted"),new t.Talent("Phreakmastery","Safe connections, +1 against traces"),new t.Talent("Power of belief","+1 to bluff, decryption, search and stealth"),new s,new a],l=c,u=Array.isArray(l),d=0,l=u?l:l[Symbol.iterator]();;){var p;if(u){if(d>=l.length)break;p=l[d++]}else{if(d=l.next(),d.done)break;p=d.value}var h=p;o.talents.set(h.name,h)}return o}return o(r,e),r.prototype.levelup=function(t,r){e.prototype.levelup.call(this,t,r);var n=t.level;1==n||3==n||6==n||9==n?t.talent+=1:4==n||7==n?t.ranks+=1:5==n||8==n?t.contacts+=1:10==n&&(t.wealth+=5)},r}(r.Class),l=e.webcrawler=new c;r.Class.classes.set(l.name,l)}),define("modules/cyberspace/avatar/avatar",["exports","../../rpg","../console","../../character/character","../../character/class/webcrawler","../../character/occupation","../../sound"],function(e,t,r,n,i,o,a){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Avatar=void 0;var c=function(){function e(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.level;s(this,e),this.obfuscate(),this.system=r,this.node=null,this.x=-1,this.y=-1,this.create(i.webcrawler,o.occupations.adventurer,n),this.scandc=this.system.level+t.rpg.randomize(4);var a=10+this.character.getstealth();this.scandc=Math.max(this.scandc,a,1),this.rollinitiative()}return e.prototype.rollinitiative=function(){this.ap=-(t.rpg.r(1,20)+this.character.getinitiative())/20},e.prototype.obfuscate=function(){this.setname("A process"),this.setimage("nodes/process.png"),this.scanned=!1},e.prototype.create=function(e,t,i){this.character=new n.Character,this.character.setoccupation(t),i>10&&(r.console.log("Cannot raise avatar past level 10!"),i=10);for(var o=0;o<i;o++)e.advance(this.character)},e.prototype.setname=function(e){this.name=e,this.tooltip=e},e.prototype.setimage=function(e){this.image="./images/"+e},e.prototype.enter=function(e){return e.enter(this)},e.prototype.click=function(){alert("Unimplemented.")},e.prototype.scan=function(){return!0},e.prototype.act=function(){this.ap+=.5},e.prototype.describehealth=function(){var e=this.character.hp/this.character.maxhp;return e<=0?"deallocated":1==e?"unharmed":e>=.5?"OK":e>=.25?"unstable":"critical"},e.prototype.die=function(){this.leave(this.node)},e.prototype.damage=function(e){this.character.hp-=e,r.console.print(this.name+" is "+this.describehealth()+"."),this.character.hp<=0&&this.die()},e.prototype.hit=function(e,t){return 1!=e&&(20==e||e+t>=this.character.getdefence())},e.prototype.attack=function(e,r,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return i||(i=t.rpg.r(1,20)),!!r.hit(i,e)&&(r.damage(n),!0)},e.prototype.authenticate=function(e){var r=this.system.player,n=10+this.character.getbluff();return!(e==t.CRITICALMISS||!r.hide(this)&&!r.query(n,this))||(this.system.raisealert(1),!1)},e.prototype.hack=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.system.player;n.ap+=1;var i=n.character;t||(t=n.roll(i.gethacking()));var o=this.character.getdefence();if((!e||this.authenticate(t))&&t<o)return!0;var s=this.name.toLowerCase();return a.sound.play(a.sound.ERROR),r.console.print("You fail to hack: "+s+"..."),!1},e.prototype.leave=function(e){e.remove(this)},e.prototype.getserial=function(){for(var e=Number(t.rpg.r(0,9999)).toString();e.length<4;)e="0"+e;return e},e.prototype.getscale=function(){for(var e=Math.min(20,this.character.level),t=[4,6,8,10,12,20],r=0;r<t.length;r++){var n=t[r];if(e<=n)return n}throw"Unknown damage level"},e.prototype.reset=function(){this.character.hp=this.character.maxhp,this.rollinitiative()},e.prototype.hide=function(){this.node.hidden.push(this),this.leave(this.node)},e.prototype.show=function(){return!0},e}();e.Avatar=c}),define("modules/cyberspace/avatar/backdoor",["exports","./avatar"],function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Backdoor=void 0;e.Backdoor=function(e){function t(){return r(this,t),n(this,e.apply(this,arguments))}return i(t,e),t.prototype.scan=function(){this.setimage("nodes/backdoor.bmp"),this.setname("Backdoor")},t}(t.Avatar)}),define("modules/cyberspace/avatar/control",["exports","./avatar","../../rpg","../console","../../deck"],function(e,t,r,n,i){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}
Object.defineProperty(e,"__esModule",{value:!0}),e.Control=void 0;e.Control=function(e){function t(n){o(this,t);var i=a(this,e.call(this,n));for(i.memory=r.rpg.chancein(2)?r.rpg.r(1,i.getscale()):0,i.privilege=0;r.rpg.chancein(2);)i.privilege+=1;return i}return s(t,e),t.prototype.scan=function(){this.memory||this.privilege||this.leave(this.node),this.setimage("nodes/control2.png"),this.setname("External device")},t.prototype.abuse=function(){if(this.memory&&(n.console.print("You gain to access "+this.memory+" blocks of memory!"),i.deck.memorytemporary+=this.memory,i.deck.memoryused-=this.memory),this.privilege){var e=this.system.player,t=void 0;e.privilege<this.privilege?(e.privilege+=this.privilege,t="Your privilege escalated to +"+this.privilege+"!"):t="You're already at privilege +"+e.privilege+"...",n.console.print(t)}this.hide()},t.prototype.click=function(){var e=this.system.player,t=e.roll(e.character.gethacking());if(t==r.CRITICALMISS)return n.console.print("You trigger an alarm!"),void this.system.raisealert(1);this.hack(t)&&this.abuse()},t}(t.Avatar)}),define("modules/cyberspace/avatar/file",["exports","./avatar","../../rpg","../console","../../character/character","../../deck"],function(e,t,r,n,i,o){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.File=void 0;var l=-1;e.File=function(e){function t(n){a(this,t);var i=s(this,e.call(this,n));return i.setname("Unscanned data"),i.setimage("nodes/fileunscanned.png"),i.purchasedc=n.level+r.rpg.randomize(4),i.worthless=i.purchasedc<1||r.rpg.chancein(n.level+1),i.trap=!i.worthless&&r.rpg.chancein(60/n.level),i.protected=!i.worthless&&!i.trap&&r.rpg.chancein(21/n.level),i.worthless?i.purchasedc=0:i.protected&&i.purchasedc<n.level&&(i.purchasedc=n.level),i.size=r.rpg.r(1,i.getscale()),i.downloading=l,i}return c(t,e),t.prototype.scan=function(){this.scanned=!0,this.worthless?this.leave(this.node):this.protected?(this.setimage("nodes/fileprotected.png"),this.setname("Encrypted data")):(this.trap,this.setimage("nodes/file.png"),this.setname("Unencrypted data"))},t.prototype.decrypt=function e(){if(!this.protected)return!0;var t=this.system.player,e=t.roll(t.character.getdecryption());return e==r.CRITICALMISS?(sound.play(sound.CRASH),n.console.print("You destroy the file by accident!"),this.leave(this.node),!1):this.hack(!1,e)},t.prototype.download=function(){var e="File "+this.getserial();this.setname(e),n.console.print("You start downloading "+e+" ("+this.size+" blocks)..."),this.downloading=0,o.deck.storageused+=this.size,this.ap=this.system.player.ap},t.prototype.click=function(){return this.downloading!=l?void n.console.print("You are already downloading this."):(this.system.player.ap+=.5,this.trap?(this.leave(this.node),n.console.print("The file was a honeypot!"),void this.system.raisealert(2)):this.size>o.deck.getfreestorage()?void n.console.print("You need "+this.size+" free storage blocks."):(this.system.player.ap+=.5,void(this.decrypt()&&this.download())))},t.prototype.act=function(){if(this.ap+=.5,this.downloading!=l){if(this.downloading+=.5,this.downloading<this.size){var e=Math.round(100*this.downloading/this.size);return void n.console.print("Downloading "+this.name+"... "+e+"% done.")}var t=i.hero.sell(this.purchasedc),r="Downloaded "+this.name+". ";0==t?(r+="It was worthless and discarded.",o.deck.storageused-=this.size):r+="It is worth "+t+"¥!",n.console.print(r),this.leave(this.node)}},t.prototype.die=function(){this.downloading!=l&&(o.deck.storageused+=this.size)},t.prototype.setname=function(t){e.prototype.setname.call(this,t),this.scanned&&(this.tooltip+=" ("+this.size+" blocks)")},t}(t.Avatar)}),define("modules/cyberspace/avatar/gateway",["exports","./avatar","../../../messages"],function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Gateway=void 0;e.Gateway=function(e){function t(r){n(this,t);var o=i(this,e.call(this,r));return o.setname("Gateway"),o.setimage("nodes/gateway.png"),o.scanned=!0,o}return o(t,e),t.prototype.click=function(){if(window.confirm("Do you want to leave the system?")){var e=new r.Disconnect;throw e.safe=!0,e}},t}(t.Avatar)}),define("modules/cyberspace/avatar/map",["exports","./avatar","../../rpg","../console","../../sound"],function(e,t,r,n,i){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Map=void 0;e.Map=function(e){function t(){return o(this,t),a(this,e.apply(this,arguments))}return s(t,e),t.prototype.scan=function(){this.setimage("nodes/map.bmp"),this.setname("Map")},t.prototype.click=function(){var e=this.system.player,t=e.roll(e.character.gethacking());if(t==r.CRITICALMISS)return n.console.print("You trigger an aler while reading the map!"),void this.system.raisealert(1);this.hack(!1,t)&&(n.console.print("You download the system map!"),i.sound.play(i.sound.SUCCESS),this.system.reveal())},t}(t.Avatar)}),define("modules/cyberspace/avatar/player",["exports","./avatar","../console","../../character/character","../../rpg","../../sound","../../../messages","../../deck"],function(e,t,r,n,i,o,a,s){"use strict";function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Player=void 0;var d=-9e3,p=function(e){function t(r){c(this,t);var i=l(this,e.call(this,r));return i.setname(n.hero.name),i.setimage("characters/"+n.hero.image+".png"),i.scanned=!0,i.target=!1,i.credentials=10+i.character.getforgery(),i.privilege=0,i}return u(t,e),t.prototype.create=function(e,t){this.character=n.hero.connect()},t.prototype.roll=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t||(t=i.rpg.r(1,20)),1==t)return i.CRITICALMISS;if(20==t)return i.CRITICALHIT;if(this.system.alert){var r=i.rpg.r(1,20)+this.character.getconcentration(),n=2*this.system.alert-r/5;e-=Math.max(0,Math.round(n))}return e+=this.privilege-s.deck.getload(),t+e},t.prototype.enter=function(t){var r=!this.node;return!!e.prototype.enter.call(this,t)&&(r||o.sound.play(o.sound.MOVE),t.visited=!0,this.node.scan(this.roll(this.character.getperceive(),10)),!0)},t.prototype.wait=function(){o.sound.play(o.sound.SCAN),r.console.print("You scan the node..."),this.ap+=.5,this.node.scan(this.roll(this.character.getsearch()))},t.prototype.click=function(){var e=this.character,t=Math.round(100*e.hp/e.maxhp),n="You currently have "+e.hp+" out of "+e.maxhp+" hit points ("+t+"%).";r.console.print(n)},t.prototype.act=function(){if(!(this.ap<d+1)){d=this.ap;var e=Math.max(this.roll(this.character.gethacking()),this.roll(this.character.gethacking(),10));s.deck.act(e,this.system)}},t.prototype.query=function(e,t){if(this.credentials>=e)return!0;o.sound.play(o.sound.QUERY),r.console.print(t.name+" queries you...");var n=this.roll(this.character.getbluff());return!(n<e)&&(this.credentials=n,!0)},t.prototype.attack=function(t,r,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return o||(o=this.roll(t),t=0,o==i.CRITICALMISS?o=1:o==i.CRITICALHIT&&(o=20)),e.prototype.attack.call(this,t,r,n,o)},t.prototype.die=function(){o.sound.play(o.sound.DISCONNECTED),this.system.raisealert(2,!0);var e=new a.Disconnect("You have been disconnected!");throw e.safe=!0,e},t.prototype.hide=function(e){return this.roll(this.character.getstealth())>=10+e.character.getperceive()},t.prototype.login=function e(){var e=this.roll(this.character.gethacking());return this.credentials>e&&(e=this.credentials),e>=10+this.system.level||(this.system.raisealert(1),!1)},t.prototype.connect=function(){o.sound.play(o.sound.CONNECT),r.console.print("You connect to: "+this.system.name+"."),this.login()||r.console.print("Your unauthorized login is detected!")},t.prototype.disconnect=function(e){this.leave(this.node);var t=void 0,r=e.safe||this.login();t=e.message?e.message:r?"You logout safely.":"Your non-gateway logout is detected!",alert(t)},t}(t.Avatar);e.Player=p}),define("modules/cyberspace/node/cpu",["exports","../../rpg","./node","../avatar/secure/alarm","../avatar/secure/entry","../avatar/map","../avatar/secure/terminal"],function(e,t,r,n,i,o,a){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Cpu=void 0;e.Cpu=function(e){function r(t,n,i){s(this,r);var o=c(this,e.call(this,t,n,i,"cpu"));return o.priority=2,o}return l(r,e),r.prototype.setmain=function(){this.enter(new n.Alarm(this.system)),this.enter(new i.Entry(this.system)),this.enter(new o.Map(this.system)),this.enter(new a.Terminal(this.system))},r.prototype.generate=function(){for(;0==this.avatars.length;)t.rpg.chancein(4)&&this.enter(new n.Alarm(this.system)),t.rpg.chancein(4)&&this.enter(new i.Entry(this.system)),t.rpg.chancein(4)&&this.enter(new o.Map(this.system))},r}(r.Node)}),define("modules/cyberspace/node/datastore",["exports","./node","../avatar/file","../../rpg"],function(e,t,r,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Datastore=void 0;e.Datastore=function(e){function t(r,n,a){i(this,t);var s=o(this,e.call(this,r,n,a,"datastore"));return s.priority=1,s}return a(t,e),t.prototype.generate=function(){for(var e=n.rpg.r(1,4),t=0;t<e;t++)this.enter(new r.File(this.system))},t}(t.Node)}),define("modules/cyberspace/node/interface",["exports","./node","../avatar/backdoor","../avatar/control","../../rpg"],function(e,t,r,n,i){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Interface=void 0;e.Interface=function(e){function t(r,n,i){o(this,t);var s=a(this,e.call(this,r,n,i,"interface"));return s.priority=1,s}return s(t,e),t.prototype.generate=function(){this.enter(new n.Control(this.system)),i.rpg.chancein(4)&&this.enter(new r.Backdoor(this.system))},t}(t.Node)}),define("modules/cyberspace/node/node",["exports","../../rpg","../../../environment","../console","../../sound","../avatar/ice/ice"],function(e,t,r,n,i,o){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Node=void 0;for(var s=function(e){return e&&e.__esModule?e:{default:e}}(r),c=[],l=0;l<s.default.nodesize;l++)for(var u=0;u<s.default.nodesize;u++)c.push([l,u]);e.Node=function(){function e(t,r,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"corridor";a(this,e),this.name=i,this.x=t,this.y=r,this.id=n.nodes.length,this.priority=0,this.system=n,this.avatars=[],this.hidden=[],this.visited=!1}return e.prototype.generate=function(){},e.prototype.getneighbors=function(){for(var e=[],t=[[-1,0],[1,0],[0,1],[0,-1]],r=0;r<t.length;r++){var n=t[r],i=this.system.getnode(this.x+n[0],this.y+n[1]);i&&e.push(i)}return e},e.prototype.getavatar=function(e,t){for(var r=this.avatars,n=Array.isArray(r),i=0,r=n?r:r[Symbol.iterator]();;){var o;if(n){if(i>=r.length)break;o=r[i++]}else{if(i=r.next(),i.done)break;o=i.value}var a=o;if(a.x==e&&a.y==t)return a}return null},e.prototype.remove=function(e){if(e.node!=this)throw"Removing "+e.name+" from random node?";var t=this.system.player;e instanceof o.Ice&&this==t.node&&e.character.hp>0&&(i.sound.play(i.sound.ICELEAVE),n.console.print(e.name+" leaves the node...")),e.node=!1,this.avatars.splice(this.avatars.indexOf(e),1),t==e?t.target=!1:t.target==e&&(t.target=!1)},e.prototype.checkadjacent=function(e,t){return!(!s.default.debug||t!=this.system.player)||e.getneighbors().indexOf(this)>=0},e.prototype.receive=function(e,t){this.system.player&&this==this.system.player.node&&(i.sound.play(i.sound.ICEENTER),n.console.print(e.name+" enters the node.")),e.node&&e.leave(e.node),e.x=t[0],e.y=t[1],e.node=this,e.ap+=e.character.move(),this.avatars.push(e)},e.prototype.enter=function(e){var r=e.node;if(r==this)return!1;if(r&&!this.checkadjacent(r,e))return n.console.print("Can only enter adjacent nodes..."),!1;t.rpg.shuffle(c);for(var i=c,o=Array.isArray(i),a=0,i=o?i:i[Symbol.iterator]();;){var s;if(o){if(a>=i.length)break;s=i[a++]}else{if(a=i.next(),a.done)break;s=a.value}var l=s;if(!this.getavatar(l[0],l[1]))return this.receive(e,l),!0}return!1},e.prototype.scan=function(e){for(var t=this.avatars.slice(),r=Array.isArray(t),n=0,t=r?t:t[Symbol.iterator]();;){var i;if(r){if(n>=t.length)break;i=t[n++]}else{if(n=t.next(),n.done)break;i=n.value}var o=i;!o.scanned&&e>=o.scandc&&(o.scan(),o.scanned=!0)}},e.prototype.reset=function(){for(var e=this.hidden,t=Array.isArray(e),r=0,e=t?e:e[Symbol.iterator]();;){var n;if(t){if(r>=e.length)break;n=e[r++]}else{if(r=e.next(),r.done)break;n=r.value}n.enter(this)}this.hidden=[];for(var i=this.avatars.slice(),o=Array.isArray(i),a=0,i=o?i:i[Symbol.iterator]();;){var s;if(o){if(a>=i.length)break;s=i[a++]}else{if(a=i.next(),a.done)break;s=a.value}s.reset()}},e}()}),define("modules/cyberspace/node/portal",["exports","./node","../avatar/gateway"],function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Portal=void 0;e.Portal=function(e){function t(r,o,a){n(this,t);var s=i(this,e.call(this,r,o,a,"portal"));return s.priority=2,s}return o(t,e),t.prototype.generate=function(){this.enter(new r.Gateway(this.system))},t}(t.Node)}),define("modules/cyberspace/avatar/ice/greeter",["exports","./scout"],function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Greeter=void 0;e.Greeter=function(e){function t(i,o){r(this,t);var a=n(this,e.call(this,i,o+1));return a.revealedname="Greeter",a.revealedimage="ice/greeter.png",a}return i(t,e),t.prototype.create=function(t,r,n){e.prototype.create.call(this,t,r,n),this.character.speed=5},t.prototype.move=function(){this.ap+=.5},t}(t.Scout)}),define("modules/cyberspace/avatar/ice/ice",["exports","../avatar","../../console","../../../rpg","../../../sound"],function(e,t,r,n,i){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Ice=void 0;e.Ice=function(e){function t(n,i,s,c){o(this,t);var l=a(this,e.call(this,s,c));return l.revealedname=n,l.revealedimage=i,(l.character.ranks>0||l.character.pointextra>0||l.character.newfeats>0)&&r.console.log("Unspent points for "+l.name),l}return s(t,e),t.prototype.click=function(){if(this.scanned){var e=this.system.player;e.target==this?(e.target=!1,r.console.print("Target cleared...")):(e.target=this,r.console.print("Targeting "+this.name+"..."))}},t.prototype.scan=function(){this.setname(this.revealedname+" "+this.getserial()),this.setimage(this.revealedimage)},t.prototype.act=function(){throw"Unimplemented Ice#act() for "+this.name},t.prototype.attack=function(t,n,o){arguments.length>3&&void 0!==arguments[3]&&arguments[3];return 2==this.system.alert&&n.node==this.node&&(this.ap+=.5,i.sound.play(i.sound.ICEATTACK),r.console.print(this.name+" attacks!"),e.prototype.attack.call(this,t,n,o),!0)},t.prototype.getdamage=function(){return n.rpg.r(1,this.getscale())},t.prototype.die=function(){e.prototype.die.call(this),i.sound.play(i.sound.ICEDEATH),this.system.reentry.push(this)},t.prototype.reset=function(){e.prototype.reset.call(this),this.leave(this.node)},t.prototype.show=function(){if(this.system.revealed)return!0;var e=this.system.player;return this.node==e.node&&(!!this.scanned||(!this.stealth||e.roll(e.character.getperceive(),10)>=10+this.character.getstealth()))},t}(t.Avatar)}),define("modules/cyberspace/avatar/ice/scout",["exports","./ice","../../../rpg","../../console"],function(e,t,r,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Scout=void 0;e.Scout=function(e){function t(r,n){i(this,t);var a=o(this,e.call(this,"Scout","ice/scout.png",r,n));return a.path=[],a}return a(t,e),t.prototype.create=function(t,r,n){e.prototype.create.call(this,t,r,n);var i=this.character;i.learnability("wisdom");for(var o=["perceive","stealth"],a=0;a<o.length;a++){var s=o[a];i.learnskill(s)}i.learnfeat("improved initiative"),i.speed+=this.character.level},t.prototype.enter=function(t){if(!e.prototype.enter.call(this,t))return!1;this.path.push(t);var r=1+Math.round(this.character.speed/30);return this.path.length>r&&this.path.shift(),!0},t.prototype.query=function(){if(2==this.system.alert)return!0;var e=this.system.player;if(e.node!=this.node)return!0;e.character;if(e.hide(this))return!0;this.ap+=.5;var t=r.rpg.r(1,20)+this.character.getbluff();return!!e.query(t,this)||(this.system.raisealert(),this.path=[],!1)},t.prototype.getdestination=function(){var e=this.node.getneighbors();if(this.system.alert){var t=this.system.player,n=t.roll(t.character.getstealth(),10);if(r.rpg.r(1,20)+this.character.getperceive()>=n)for(var i=e,o=Array.isArray(i),a=0,i=o?i:i[Symbol.iterator]();;){var s;if(o){if(a>=i.length)break;s=i[a++]}else{if(a=i.next(),a.done)break;s=a.value}var c=s;if(c==t.node)return this.path=[],c}}e=r.rpg.shuffle(e);for(var l=e,u=Array.isArray(l),d=0,l=u?l:l[Symbol.iterator]();;){var p;if(u){if(d>=l.length)break;p=l[d++]}else{if(d=l.next(),d.done)break;p=d.value}var h=p;if(this.path.indexOf(h)<0)return h}return e[0]},t.prototype.move=function(){return!(this.system.alert>0&&this.system.player.node==this.node)&&(this.enter(this.getdestination()),this.query(),!0)},t.prototype.act=function(){var e=this.character.getranged(),t=this.getdamage();this.attack(e,this.system.player,t)||this.query()&&this.move()},t}(t.Ice)}),define("modules/cyberspace/avatar/secure/alarm",["exports","./secure","../../console","../../../rpg"],function(e,t,r,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Alarm=void 0;e.Alarm=function(e){function t(){return i(this,t),o(this,e.apply(this,arguments))}return a(t,e),t.prototype.scan=function(){this.setimage("nodes/alarm.bmp"),this.setname("Alarm")},t.prototype.click=function(){0==this.system.alert?r.console.print("No alerts to clear right now..."):e.prototype.click.call(this)&&this.system.raisealert(-2)},t}(t.SecureAvatar)}),define("modules/cyberspace/avatar/secure/entry",["exports","./secure","../../../rpg","../../../../environment","../../../sound","../../console"],function(e,t,r,n,i,o){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Entry=void 0;var l=function(e){return e&&e.__esModule?e:{default:e}}(n);e.Entry=function(e){function t(){return a(this,t),s(this,e.apply(this,arguments))}return c(t,e),t.prototype.scan=function(){this.setimage("nodes/entry.png"),this.setname("ICE entry")},t.prototype.click=function(){if(!e.prototype.click.call(this))return!1;o.console.print("You disable the ICE re-entry point!"),i.sound.play(i.sound.DISABLE),this.hide()},t.prototype.act=function(){if(this.ap+=1,0!=this.system.reentry.length){var e=this.system.reentry[0];r.rpg.r(1,20)+this.system.level<10+e.character.level||e.enter(this.node)&&(e=this.system.reentry.shift(),e.character.hp=e.character.maxhp,e.rollinitiative(),e.ap+=this.ap,e.obfuscate(),l.default.scannodes&&(e.scan(),e.scanned=!0))}},t}(t.SecureAvatar)}),define("modules/cyberspace/avatar/secure/secure",["exports","../avatar"],function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.SecureAvatar=void 0;e.SecureAvatar=function(e){function t(){return r(this,t),n(this,e.apply(this,arguments))}return i(t,e),t.prototype.create=function(t,r,n){e.prototype.create.call(this,t,r,n);for(var i=this.character,o=["bluff","perceive"],a=0;a<o.length;a++){var s=o[a];i.learnskill(s)}},t.prototype.click=function(){return this.hack(!0)},t}(t.Avatar)}),define("modules/cyberspace/avatar/secure/terminal",["exports","./secure","../../../rpg","../../console","../../../sound","../../../../messages","../../system"],function(e,t,r,n,i,o,a){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Terminal=void 0;e.Terminal=function(e){function t(){return s(this,t),c(this,e.apply(this,arguments))}return l(t,e),t.prototype.create=function(t,n,i){e.prototype.create.call(this,t,n,i+r.rpg.r(1,4)),this.character.defence+=this.character.level},t.prototype.scan=function(){this.setimage("nodes/terminal.png"),this.setname("Terminal")},t.prototype.click=function(){if(!e.prototype.click.call(this))return!1;i.sound.play(i.sound.CRASH),this.system.raisealert(2,!0),(0,a.setactive)(!1);var t=new o.Disconnect("You have crashed the mainframe!");throw t.win=!0,t.safe=!0,t},t}(t.SecureAvatar)}),define("aurelia-templating-resources/compose",["exports","aurelia-dependency-injection","aurelia-task-queue","aurelia-templating","aurelia-pal"],function(e,t,r,n,i){"use strict";function o(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function a(e,t,r,n,i){var o={};return Object.keys(n).forEach(function(e){o[e]=n[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}function s(e,t){return Object.assign(t,{bindingContext:e.bindingContext,overrideContext:e.overrideContext,owningView:e.owningView,container:e.container,viewSlot:e.viewSlot,viewResources:e.viewResources,currentController:e.currentController,host:e.element,swapOrder:e.swapOrder})}function c(e,t){e.currentInstruction=null,e.compositionEngine.compose(t).then(function(t){e.currentController=t,e.currentViewModel=t?t.viewModel:null})}Object.defineProperty(e,"__esModule",{value:!0}),e.Compose=void 0;var l,u,d,p,h,f,g,y;e.Compose=(l=(0,n.customElement)("compose"),u=(0,t.inject)(i.DOM.Element,t.Container,n.CompositionEngine,n.ViewSlot,n.ViewResources,r.TaskQueue),l(d=(0,n.noView)(d=u((p=function(){function e(e,t,r,n,i,a){o(this,"model",h,this),o(this,"view",f,this),o(this,"viewModel",g,this),o(this,"swapOrder",y,this),this.element=e,this.container=t,this.compositionEngine=r,this.viewSlot=n,this.viewResources=i,this.taskQueue=a,this.currentController=null,this.currentViewModel=null}return e.prototype.created=function(e){this.owningView=e},e.prototype.bind=function(e,t){this.bindingContext=e,this.overrideContext=t,c(this,s(this,{view:this.view,viewModel:this.viewModel,model:this.model}))},e.prototype.unbind=function(e,t){this.bindingContext=null,this.overrideContext=null;this.viewSlot.removeAll(!0,!0)},e.prototype.modelChanged=function(e,t){var r=this;if(this.currentInstruction)return void(this.currentInstruction.model=e);this.taskQueue.queueMicroTask(function(){if(r.currentInstruction)return void(r.currentInstruction.model=e);var t=r.currentViewModel;t&&"function"==typeof t.activate&&t.activate(e)})},e.prototype.viewChanged=function(e,t){var r=this,n=s(this,{view:e,viewModel:this.currentViewModel||this.viewModel,model:this.model});if(this.currentInstruction)return void(this.currentInstruction=n);this.currentInstruction=n,this.taskQueue.queueMicroTask(function(){return c(r,r.currentInstruction)})},e.prototype.viewModelChanged=function(e,t){var r=this,n=s(this,{viewModel:e,view:this.view,model:this.model});if(this.currentInstruction)return void(this.currentInstruction=n);this.currentInstruction=n,this.taskQueue.queueMicroTask(function(){return c(r,r.currentInstruction)})},e}(),h=a(p.prototype,"model",[n.bindable],{enumerable:!0,initializer:null}),f=a(p.prototype,"view",[n.bindable],{enumerable:!0,initializer:null}),g=a(p.prototype,"viewModel",[n.bindable],{enumerable:!0,initializer:null}),y=a(p.prototype,"swapOrder",[n.bindable],{enumerable:!0,initializer:null}),d=p))||d)||d)||d)}),define("aurelia-templating-resources/if",["exports","aurelia-templating","aurelia-dependency-injection"],function(e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.If=void 0;var n,i,o;e.If=(n=(0,t.customAttribute)("if"),i=(0,
r.inject)(t.BoundViewFactory,t.ViewSlot),n(o=(0,t.templateController)(o=i(o=function(){function e(e,t){this.viewFactory=e,this.viewSlot=t,this.showing=!1,this.view=null,this.bindingContext=null,this.overrideContext=null}return e.prototype.bind=function(e,t){this.bindingContext=e,this.overrideContext=t,this.valueChanged(this.value)},e.prototype.valueChanged=function(e){var t=this;if(this.__queuedChanges)return void this.__queuedChanges.push(e);var r=this._runValueChanged(e);r instanceof Promise&&function(){var e=t.__queuedChanges=[],n=function r(){if(!e.length)return void(t.__queuedChanges=void 0);(t._runValueChanged(e.shift())||Promise.resolve()).then(r)};r.then(n)}()},e.prototype._runValueChanged=function(e){var t=this;if(!e){var r=void 0;return null!==this.view&&this.showing&&(r=this.viewSlot.remove(this.view),r instanceof Promise?r.then(function(){return t.view.unbind()}):this.view.unbind()),this.showing=!1,r}if(null===this.view&&(this.view=this.viewFactory.create()),this.view.isBound||this.view.bind(this.bindingContext,this.overrideContext),!this.showing)return this.showing=!0,this.viewSlot.add(this.view)},e.prototype.unbind=function(){null!==this.view&&(this.view.unbind(),this.viewFactory.isCaching&&(this.showing&&(this.showing=!1,this.viewSlot.remove(this.view,!0,!0)),this.view.returnToCache(),this.view=null))},e}())||o)||o)||o)}),define("aurelia-templating-resources/with",["exports","aurelia-dependency-injection","aurelia-templating","aurelia-binding"],function(e,t,r,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.With=void 0;var i,o,a;e.With=(i=(0,r.customAttribute)("with"),o=(0,t.inject)(r.BoundViewFactory,r.ViewSlot),i(a=(0,r.templateController)(a=o(a=function(){function e(e,t){this.viewFactory=e,this.viewSlot=t,this.parentOverrideContext=null,this.view=null}return e.prototype.bind=function(e,t){this.parentOverrideContext=t,this.valueChanged(this.value)},e.prototype.valueChanged=function(e){var t=(0,n.createOverrideContext)(e,this.parentOverrideContext);this.view?this.view.bind(e,t):(this.view=this.viewFactory.create(),this.view.bind(e,t),this.viewSlot.add(this.view))},e.prototype.unbind=function(){this.parentOverrideContext=null,this.view&&this.view.unbind()},e}())||a)||a)||a)}),define("aurelia-templating-resources/repeat",["exports","aurelia-dependency-injection","aurelia-binding","aurelia-templating","./repeat-strategy-locator","./repeat-utilities","./analyze-view-factory","./abstract-repeater"],function(e,t,r,n,i,o,a,s){"use strict";function c(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function d(e,t,r,n,i){var o={};return Object.keys(n).forEach(function(e){o[e]=n[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}Object.defineProperty(e,"__esModule",{value:!0}),e.Repeat=void 0;var p,h,f,g,y,m,v,b;e.Repeat=(p=(0,n.customAttribute)("repeat"),h=(0,t.inject)(n.BoundViewFactory,n.TargetInstruction,n.ViewSlot,n.ViewResources,r.ObserverLocator,i.RepeatStrategyLocator),p(f=(0,n.templateController)(f=h((g=function(e){function t(t,r,n,i,s,u){var d=l(this,e.call(this,{local:"item",viewsRequireLifecycle:(0,a.viewsRequireLifecycle)(t)}));return c(d,"items",y,d),c(d,"local",m,d),c(d,"key",v,d),c(d,"value",b,d),d.viewFactory=t,d.instruction=r,d.viewSlot=n,d.lookupFunctions=i.lookupFunctions,d.observerLocator=s,d.key="key",d.value="value",d.strategyLocator=u,d.ignoreMutation=!1,d.sourceExpression=(0,o.getItemsSourceExpression)(d.instruction,"repeat.for"),d.isOneTime=(0,o.isOneTime)(d.sourceExpression),d.viewsRequireLifecycle=(0,a.viewsRequireLifecycle)(t),d}return u(t,e),t.prototype.call=function(e,t){this[e](this.items,t)},t.prototype.bind=function(e,t){this.scope={bindingContext:e,overrideContext:t},this.matcherBinding=this._captureAndRemoveMatcherBinding(),this.itemsChanged()},t.prototype.unbind=function(){this.scope=null,this.items=null,this.matcherBinding=null,this.viewSlot.removeAll(!0),this._unsubscribeCollection()},t.prototype._unsubscribeCollection=function(){this.collectionObserver&&(this.collectionObserver.unsubscribe(this.callContext,this),this.collectionObserver=null,this.callContext=null)},t.prototype.itemsChanged=function(){if(this._unsubscribeCollection(),this.scope){var e=this.items;if(this.strategy=this.strategyLocator.getStrategy(e),!this.strategy)throw new Error("Value for '"+this.sourceExpression+"' is non-repeatable");this.isOneTime||this._observeInnerCollection()||this._observeCollection(),this.strategy.instanceChanged(this,e)}},t.prototype._getInnerCollection=function(){var e=(0,o.unwrapExpression)(this.sourceExpression);return e?e.evaluate(this.scope,null):null},t.prototype.handleCollectionMutated=function(e,t){this.collectionObserver&&this.strategy.instanceMutated(this,e,t)},t.prototype.handleInnerCollectionMutated=function(e,t){var r=this;if(this.collectionObserver&&!this.ignoreMutation){this.ignoreMutation=!0;var n=this.sourceExpression.evaluate(this.scope,this.lookupFunctions);this.observerLocator.taskQueue.queueMicroTask(function(){return r.ignoreMutation=!1}),n===this.items?this.itemsChanged():this.items=n}},t.prototype._observeInnerCollection=function(){var e=this._getInnerCollection(),t=this.strategyLocator.getStrategy(e);return!!t&&(this.collectionObserver=t.getCollectionObserver(this.observerLocator,e),!!this.collectionObserver&&(this.callContext="handleInnerCollectionMutated",this.collectionObserver.subscribe(this.callContext,this),!0))},t.prototype._observeCollection=function(){var e=this.items;this.collectionObserver=this.strategy.getCollectionObserver(this.observerLocator,e),this.collectionObserver&&(this.callContext="handleCollectionMutated",this.collectionObserver.subscribe(this.callContext,this))},t.prototype._captureAndRemoveMatcherBinding=function(){if(this.viewFactory.viewFactory)for(var e=this.viewFactory.viewFactory.instructions,t=Object.keys(e),r=0;r<t.length;r++){var n=e[t[r]].expressions;if(n)for(;r<n.length;r++)if("matcher"===n[0].targetProperty){var i=n[0];return n.splice(0,1),i}}},t.prototype.viewCount=function(){return this.viewSlot.children.length},t.prototype.views=function(){return this.viewSlot.children},t.prototype.view=function(e){return this.viewSlot.children[e]},t.prototype.matcher=function(){return this.matcherBinding?this.matcherBinding.sourceExpression.evaluate(this.scope,this.matcherBinding.lookupFunctions):null},t.prototype.addView=function(e,t){var r=this.viewFactory.create();r.bind(e,t),this.viewSlot.add(r)},t.prototype.insertView=function(e,t,r){var n=this.viewFactory.create();n.bind(t,r),this.viewSlot.insert(e,n)},t.prototype.moveView=function(e,t){this.viewSlot.move(e,t)},t.prototype.removeAllViews=function(e,t){return this.viewSlot.removeAll(e,t)},t.prototype.removeViews=function(e,t,r){return this.viewSlot.removeMany(e,t,r)},t.prototype.removeView=function(e,t,r){return this.viewSlot.removeAt(e,t,r)},t.prototype.updateBindings=function(e){for(var t=e.bindings.length;t--;)(0,o.updateOneTimeBinding)(e.bindings[t]);for(t=e.controllers.length;t--;)for(var r=e.controllers[t].boundProperties.length;r--;){var n=e.controllers[t].boundProperties[r].binding;(0,o.updateOneTimeBinding)(n)}},t}(s.AbstractRepeater),y=d(g.prototype,"items",[n.bindable],{enumerable:!0,initializer:null}),m=d(g.prototype,"local",[n.bindable],{enumerable:!0,initializer:null}),v=d(g.prototype,"key",[n.bindable],{enumerable:!0,initializer:null}),b=d(g.prototype,"value",[n.bindable],{enumerable:!0,initializer:null}),f=g))||f)||f)||f)}),define("aurelia-templating-resources/repeat-strategy-locator",["exports","./null-repeat-strategy","./array-repeat-strategy","./map-repeat-strategy","./set-repeat-strategy","./number-repeat-strategy"],function(e,t,r,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RepeatStrategyLocator=void 0;e.RepeatStrategyLocator=function(){function e(){this.matchers=[],this.strategies=[],this.addStrategy(function(e){return null===e||void 0===e},new t.NullRepeatStrategy),this.addStrategy(function(e){return e instanceof Array},new r.ArrayRepeatStrategy),this.addStrategy(function(e){return e instanceof Map},new n.MapRepeatStrategy),this.addStrategy(function(e){return e instanceof Set},new i.SetRepeatStrategy),this.addStrategy(function(e){return"number"==typeof e},new o.NumberRepeatStrategy)}return e.prototype.addStrategy=function(e,t){this.matchers.push(e),this.strategies.push(t)},e.prototype.getStrategy=function(e){for(var t=this.matchers,r=0,n=t.length;r<n;++r)if(t[r](e))return this.strategies[r];return null},e}()}),define("aurelia-templating-resources/null-repeat-strategy",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.NullRepeatStrategy=function(){function e(){}return e.prototype.instanceChanged=function(e,t){e.removeAllViews(!0)},e.prototype.getCollectionObserver=function(e,t){},e}()}),define("aurelia-templating-resources/array-repeat-strategy",["exports","./repeat-utilities","aurelia-binding"],function(e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ArrayRepeatStrategy=void 0;e.ArrayRepeatStrategy=function(){function e(){}return e.prototype.getCollectionObserver=function(e,t){return e.getArrayObserver(t)},e.prototype.instanceChanged=function(e,r){var n=this,i=r.length;if(!r||0===i)return void e.removeAllViews(!0,!e.viewsRequireLifecycle);var o=e.views(),a=o.length;if(0===a)return void this._standardProcessInstanceChanged(e,r);e.viewsRequireLifecycle?function(){for(var s=o.slice(0),c=e.local,l=e.matcher(),u=[],d=[],p=0;p<a;p++){var h=s[p],f=h.bindingContext[c];(0,t.indexOf)(r,f,l)===-1?d.push(h):u.push(f)}var g=void 0,y=void 0;u.length>0?(y=e.removeViews(d,!0,!e.viewsRequireLifecycle),g=function(){for(var a=0;a<i;a++){var s=r[a],c=(0,t.indexOf)(u,s,l,a),d=void 0;if(c===-1){var p=(0,t.createFullOverrideContext)(e,r[a],a,i);e.insertView(a,p.bindingContext,p),u.splice(a,0,void 0)}else c===a?(d=o[c],u[c]=void 0):(d=o[c],e.moveView(c,a),u.splice(c,1),u.splice(a,0,void 0));d&&(0,t.updateOverrideContext)(d.overrideContext,a,i)}n._inPlaceProcessItems(e,r)}):(y=e.removeAllViews(!0,!e.viewsRequireLifecycle),g=function(){return n._standardProcessInstanceChanged(e,r)}),y instanceof Promise?y.then(g):g()}():this._inPlaceProcessItems(e,r)},e.prototype._standardProcessInstanceChanged=function(e,r){for(var n=0,i=r.length;n<i;n++){var o=(0,t.createFullOverrideContext)(e,r[n],n,i);e.addView(o.bindingContext,o)}},e.prototype._inPlaceProcessItems=function(e,r){for(var n=r.length,i=e.viewCount();i>n;)i--,e.removeView(i,!0,!e.viewsRequireLifecycle);for(var o=e.local,a=0;a<i;a++){var s=e.view(a),c=a===n-1,l=0!==a&&!c;s.bindingContext[o]===r[a]&&s.overrideContext.$middle===l&&s.overrideContext.$last===c||(s.bindingContext[o]=r[a],s.overrideContext.$middle=l,s.overrideContext.$last=c,e.updateBindings(s))}for(var u=i;u<n;u++){var d=(0,t.createFullOverrideContext)(e,r[u],u,n);e.addView(d.bindingContext,d)}},e.prototype.instanceMutated=function(e,t,n){var i=this;if(e.__queuedSplices){for(var o=0,a=n.length;o<a;++o){var s=n[o],c=s.index,l=s.removed,u=s.addedCount;(0,r.mergeSplice)(e.__queuedSplices,c,l,u)}return void(e.__array=t.slice(0))}var d=this._runSplices(e,t.slice(0),n);d instanceof Promise&&function(){var t=e.__queuedSplices=[],r=function r(){if(!t.length)return e.__queuedSplices=void 0,void(e.__array=void 0);var n=i._runSplices(e,e.__array,t)||Promise.resolve();t=e.__queuedSplices=[],n.then(r)};d.then(r)}()},e.prototype._runSplices=function(e,r,n){for(var i=this,o=0,a=[],s=0,c=n.length;s<c;++s){for(var l=n[s],u=l.removed,d=0,p=u.length;d<p;++d){var h=e.removeView(l.index+o+a.length,!0);h instanceof Promise&&a.push(h)}o-=l.addedCount}if(a.length>0)return Promise.all(a).then(function(){var o=i._handleAddedSplices(e,r,n);(0,t.updateOverrideContexts)(e.views(),o)});var f=this._handleAddedSplices(e,r,n);(0,t.updateOverrideContexts)(e.views(),f)},e.prototype._handleAddedSplices=function(e,r,n){for(var i=void 0,o=void 0,a=r.length,s=0,c=n.length;s<c;++s){var l=n[s],u=i=l.index,d=l.index+l.addedCount;for((void 0===o||null===o||o>l.index)&&(o=i);u<d;++u){var p=(0,t.createFullOverrideContext)(e,r[u],u,a);e.insertView(u,p.bindingContext,p)}}return o},e}()}),define("aurelia-templating-resources/repeat-utilities",["exports","aurelia-binding"],function(e,t){"use strict";function r(e,t){var r=e.length;for(t>0&&(t-=1);t<r;++t)i(e[t].overrideContext,t,r)}function n(e,r,n,o,a){var s={},c=(0,t.createOverrideContext)(s,e.scope.overrideContext);return void 0!==a?(s[e.key]=a,s[e.value]=r):s[e.local]=r,i(c,n,o),c}function i(e,t,r){var n=0===t,i=t===r-1,o=t%2==0;e.$index=t,e.$first=n,e.$last=i,e.$middle=!(n||i),e.$odd=!o,e.$even=o}function o(e,t){return e.behaviorInstructions.filter(function(e){return e.originalAttrName===t})[0].attributes.items.sourceExpression}function a(e){for(var r=!1;e instanceof t.BindingBehavior;)e=e.expression;for(;e instanceof t.ValueConverter;)e=e.expression,r=!0;return r?e:null}function s(e){for(;e instanceof t.BindingBehavior;){if("oneTime"===e.name)return!0;e=e.expression}return!1}function c(e){e.call&&e.mode===u?e.call(t.sourceContext):e.updateOneTimeBindings&&e.updateOneTimeBindings()}function l(e,t,r,n){if(!r)return e.indexOf(t);for(var i=e.length,o=n||0;o<i;o++)if(r(e[o],t))return o;return-1}Object.defineProperty(e,"__esModule",{value:!0}),e.updateOverrideContexts=r,e.createFullOverrideContext=n,e.updateOverrideContext=i,e.getItemsSourceExpression=o,e.unwrapExpression=a,e.isOneTime=s,e.updateOneTimeBinding=c,e.indexOf=l;var u=t.bindingMode.oneTime}),define("aurelia-templating-resources/map-repeat-strategy",["exports","./repeat-utilities"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapRepeatStrategy=void 0;e.MapRepeatStrategy=function(){function e(){}return e.prototype.getCollectionObserver=function(e,t){return e.getMapObserver(t)},e.prototype.instanceChanged=function(e,t){var r=this,n=e.removeAllViews(!0,!e.viewsRequireLifecycle);if(n instanceof Promise)return void n.then(function(){return r._standardProcessItems(e,t)});this._standardProcessItems(e,t)},e.prototype._standardProcessItems=function(e,r){var n=0,i=void 0;r.forEach(function(o,a){i=(0,t.createFullOverrideContext)(e,o,n,r.size,a),e.addView(i.bindingContext,i),++n})},e.prototype.instanceMutated=function(e,r,n){var i=void 0,o=void 0,a=void 0,s=void 0,c=void 0,l=void 0,u=[],d=void 0;for(o=0,a=n.length;o<a;++o)switch(l=n[o],i=l.key,l.type){case"update":c=this._getViewIndexByKey(e,i),d=e.removeView(c,!0,!e.viewsRequireLifecycle),d instanceof Promise&&u.push(d),s=(0,t.createFullOverrideContext)(e,r.get(i),c,r.size,i),e.insertView(c,s.bindingContext,s);break;case"add":s=(0,t.createFullOverrideContext)(e,r.get(i),r.size-1,r.size,i),e.insertView(r.size-1,s.bindingContext,s);break;case"delete":if(void 0===l.oldValue)return;c=this._getViewIndexByKey(e,i),d=e.removeView(c,!0,!e.viewsRequireLifecycle),d instanceof Promise&&u.push(d);break;case"clear":e.removeAllViews(!0,!e.viewsRequireLifecycle);break;default:continue}u.length>0?Promise.all(u).then(function(){(0,t.updateOverrideContexts)(e.views(),0)}):(0,t.updateOverrideContexts)(e.views(),0)},e.prototype._getViewIndexByKey=function(e,t){var r=void 0,n=void 0,i=void 0;for(r=0,n=e.viewCount();r<n;++r)if(i=e.view(r),i.bindingContext[e.key]===t)return r},e}()}),define("aurelia-templating-resources/set-repeat-strategy",["exports","./repeat-utilities"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SetRepeatStrategy=void 0;e.SetRepeatStrategy=function(){function e(){}return e.prototype.getCollectionObserver=function(e,t){return e.getSetObserver(t)},e.prototype.instanceChanged=function(e,t){var r=this,n=e.removeAllViews(!0,!e.viewsRequireLifecycle);if(n instanceof Promise)return void n.then(function(){return r._standardProcessItems(e,t)});this._standardProcessItems(e,t)},e.prototype._standardProcessItems=function(e,r){var n=0,i=void 0;r.forEach(function(o){i=(0,t.createFullOverrideContext)(e,o,n,r.size),e.addView(i.bindingContext,i),++n})},e.prototype.instanceMutated=function(e,r,n){var i=void 0,o=void 0,a=void 0,s=void 0,c=void 0,l=void 0,u=[],d=void 0;for(o=0,a=n.length;o<a;++o)switch(l=n[o],i=l.value,l.type){case"add":s=(0,t.createFullOverrideContext)(e,i,r.size-1,r.size),e.insertView(r.size-1,s.bindingContext,s);break;case"delete":c=this._getViewIndexByValue(e,i),d=e.removeView(c,!0,!e.viewsRequireLifecycle),d instanceof Promise&&u.push(d);break;case"clear":e.removeAllViews(!0,!e.viewsRequireLifecycle);break;default:continue}u.length>0?Promise.all(u).then(function(){(0,t.updateOverrideContexts)(e.views(),0)}):(0,t.updateOverrideContexts)(e.views(),0)},e.prototype._getViewIndexByValue=function(e,t){var r=void 0,n=void 0,i=void 0;for(r=0,n=e.viewCount();r<n;++r)if(i=e.view(r),i.bindingContext[e.local]===t)return r},e}()}),define("aurelia-templating-resources/number-repeat-strategy",["exports","./repeat-utilities"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NumberRepeatStrategy=void 0;e.NumberRepeatStrategy=function(){function e(){}return e.prototype.getCollectionObserver=function(){return null},e.prototype.instanceChanged=function(e,t){var r=this,n=e.removeAllViews(!0,!e.viewsRequireLifecycle);if(n instanceof Promise)return void n.then(function(){return r._standardProcessItems(e,t)});this._standardProcessItems(e,t)},e.prototype._standardProcessItems=function(e,r){var n=e.viewCount(),i=void 0,o=void 0,a=void 0,s=void 0;if(r=Math.floor(r),(s=n-r)>0)for(s>n&&(s=n),i=0,o=s;i<o;++i)e.removeView(n-(i+1),!0,!e.viewsRequireLifecycle);else{for(i=n,o=r;i<o;++i)a=(0,t.createFullOverrideContext)(e,i,i,o),e.addView(a.bindingContext,a);(0,t.updateOverrideContexts)(e.views(),0)}},e}()}),define("aurelia-templating-resources/analyze-view-factory",["exports"],function(e){"use strict";function t(e){var t=e.type,r=null!==t.elementName?t.elementName:t.attributeName;return i.indexOf(r)===-1&&(t.handlesAttached||t.handlesBind||t.handlesCreated||t.handlesDetached||t.handlesUnbind)||t.viewFactory&&n(t.viewFactory)||e.viewFactory&&n(e.viewFactory)}function r(e){var r=e.behaviorInstructions;if(r)for(var i=r.length;i--;)if(t(r[i]))return!0;return e.viewFactory&&n(e.viewFactory)}function n(e){if("_viewsRequireLifecycle"in e)return e._viewsRequireLifecycle;if(e._viewsRequireLifecycle=!1,e.viewFactory)return e._viewsRequireLifecycle=n(e.viewFactory),e._viewsRequireLifecycle;if(e.template.querySelector(".au-animate"))return e._viewsRequireLifecycle=!0,!0;for(var t in e.instructions)if(r(e.instructions[t]))return e._viewsRequireLifecycle=!0,!0;return e._viewsRequireLifecycle=!1,!1}Object.defineProperty(e,"__esModule",{value:!0}),e.viewsRequireLifecycle=n;var i=e.lifecycleOptionalBehaviors=["focus","if","repeat","show","with"]}),define("aurelia-templating-resources/abstract-repeater",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.AbstractRepeater=function(){function e(e){Object.assign(this,{local:"items",viewsRequireLifecycle:!0},e)}return e.prototype.viewCount=function(){throw new Error("subclass must implement `viewCount`")},e.prototype.views=function(){throw new Error("subclass must implement `views`")},e.prototype.view=function(e){throw new Error("subclass must implement `view`")},e.prototype.matcher=function(){throw new Error("subclass must implement `matcher`")},e.prototype.addView=function(e,t){throw new Error("subclass must implement `addView`")},e.prototype.insertView=function(e,t,r){throw new Error("subclass must implement `insertView`")},e.prototype.moveView=function(e,t){throw new Error("subclass must implement `moveView`")},e.prototype.removeAllViews=function(e,t){throw new Error("subclass must implement `removeAllViews`")},e.prototype.removeViews=function(e,t,r){throw new Error("subclass must implement `removeView`")},e.prototype.removeView=function(e,t,r){throw new Error("subclass must implement `removeView`")},e.prototype.updateBindings=function(e){throw new Error("subclass must implement `updateBindings`")},e}()}),define("aurelia-templating-resources/show",["exports","aurelia-dependency-injection","aurelia-templating","aurelia-pal","./aurelia-hide-style"],function(e,t,r,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Show=void 0;var o,a,s;e.Show=(o=(0,r.customAttribute)("show"),a=(0,t.inject)(n.DOM.Element,r.Animator,t.Optional.of(n.DOM.boundary,!0)),o(s=a(s=function(){function e(e,t,r){this.element=e,this.animator=t,this.domBoundary=r}return e.prototype.created=function(){(0,i.injectAureliaHideStyleAtBoundary)(this.domBoundary)},e.prototype.valueChanged=function(e){e?this.animator.removeClass(this.element,i.aureliaHideClassName):this.animator.addClass(this.element,i.aureliaHideClassName)},e.prototype.bind=function(e){this.valueChanged(this.value)},e}())||s)||s)}),define("aurelia-templating-resources/aurelia-hide-style",["exports","aurelia-pal"],function(e,t){"use strict";function r(){t.DOM.injectStyles(o)}function n(e){t.FEATURE.shadowDOM&&e&&!e.hasAureliaHideStyle&&(e.hasAureliaHideStyle=!0,t.DOM.injectStyles(o,e))}Object.defineProperty(e,"__esModule",{value:!0}),e.aureliaHideClassName=void 0,e.injectAureliaHideStyleAtHead=r,e.injectAureliaHideStyleAtBoundary=n;var i=e.aureliaHideClassName="aurelia-hide",o="."+i+" { display:none !important; }"}),define("aurelia-templating-resources/hide",["exports","aurelia-dependency-injection","aurelia-templating","aurelia-pal","./aurelia-hide-style"],function(e,t,r,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Hide=void 0;var o,a,s;e.Hide=(o=(0,r.customAttribute)("hide"),a=(0,t.inject)(n.DOM.Element,r.Animator,t.Optional.of(n.DOM.boundary,!0)),o(s=a(s=function(){function e(e,t,r){this.element=e,this.animator=t,this.domBoundary=r}return e.prototype.created=function(){(0,i.injectAureliaHideStyleAtBoundary)(this.domBoundary)},e.prototype.valueChanged=function(e){e?this.animator.addClass(this.element,i.aureliaHideClassName):this.animator.removeClass(this.element,i.aureliaHideClassName)},e.prototype.bind=function(e){this.valueChanged(this.value)},e}())||s)||s)}),define("aurelia-templating-resources/sanitize-html",["exports","aurelia-binding","aurelia-dependency-injection","./html-sanitizer"],function(e,t,r,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SanitizeHTMLValueConverter=void 0;var i,o,a;e.SanitizeHTMLValueConverter=(i=(0,t.valueConverter)("sanitizeHTML"),o=(0,r.inject)(n.HTMLSanitizer),i(a=o(a=function(){function e(e){this.sanitizer=e}return e.prototype.toView=function(e){return null===e||void 0===e?null:this.sanitizer.sanitize(e)},e}())||a)||a)}),define("aurelia-templating-resources/html-sanitizer",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.HTMLSanitizer=function(){function e(){}return e.prototype.sanitize=function(e){return e.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"")},e}()}),define("aurelia-templating-resources/replaceable",["exports","aurelia-dependency-injection","aurelia-templating"],function(e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Replaceable=void 0;var n,i,o;e.Replaceable=(n=(0,r.customAttribute)("replaceable"),i=(0,t.inject)(r.BoundViewFactory,r.ViewSlot),n(o=(0,r.templateController)(o=i(o=function(){function e(e,t){this.viewFactory=e,this.viewSlot=t,this.view=null}return e.prototype.bind=function(e,t){null===this.view&&(this.view=this.viewFactory.create(),this.viewSlot.add(this.view)),this.view.bind(e,t)},e.prototype.unbind=function(){this.view.unbind()},e}())||o)||o)||o)}),define("aurelia-templating-resources/focus",["exports","aurelia-templating","aurelia-binding","aurelia-dependency-injection","aurelia-task-queue","aurelia-pal"],function(e,t,r,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Focus=void 0;var a,s,c;e.Focus=(a=(0,t.customAttribute)("focus",r.bindingMode.twoWay),s=(0,n.inject)(o.DOM.Element,i.TaskQueue),a(c=s(c=function(){function e(e,t){var r=this;this.element=e,this.taskQueue=t,this.isAttached=!1,this.needsApply=!1,this.focusListener=function(e){r.value=!0},this.blurListener=function(e){o.DOM.activeElement!==r.element&&(r.value=!1)}}return e.prototype.valueChanged=function(e){this.isAttached?this._apply():this.needsApply=!0},e.prototype._apply=function(){var e=this;this.value?this.taskQueue.queueMicroTask(function(){e.value&&e.element.focus()}):this.element.blur()},e.prototype.attached=function(){this.isAttached=!0,this.needsApply&&(this.needsApply=!1,this._apply()),this.element.addEventListener("focus",this.focusListener),this.element.addEventListener("blur",this.blurListener)},e.prototype.detached=function(){this.isAttached=!1,this.element.removeEventListener("focus",this.focusListener),this.element.removeEventListener("blur",this.blurListener)},e}())||c)||c)}),define("aurelia-templating-resources/css-resource",["exports","aurelia-templating","aurelia-loader","aurelia-dependency-injection","aurelia-path","aurelia-pal"],function(e,t,r,n,i,o){"use strict";function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function c(e,t){if("string"!=typeof t)throw new Error("Failed loading required CSS file: "+e);return t.replace(u,function(t,r){var n=r.charAt(0);return"'"!==n&&'"'!==n||(r=r.substr(1,r.length-2)),"url('"+(0,i.relativeToFile)(r,e)+"')"})}function l(e){var r;return(0,t.resource)(new d(e))(r=function(e){function t(){return a(this,e.apply(this,arguments))}return s(t,e),t}(p))||r}Object.defineProperty(e,"__esModule",{value:!0}),e._createCSSResource=l;var u=/url\((?!['"]data)([^)]+)\)/gi,d=function(){function e(e){this.address=e,this._scoped=null,this._global=!1,this._alreadyGloballyInjected=!1}return e.prototype.initialize=function(e,t){this._scoped=new t(this)},e.prototype.register=function(e,t){"scoped"===t?e.registerViewEngineHooks(this._scoped):this._global=!0},e.prototype.load=function(e){var t=this;return e.get(r.Loader).loadText(this.address).catch(function(e){return null}).then(function(e){e=c(t.address,e),t._scoped.css=e,t._global&&(t._alreadyGloballyInjected=!0,o.DOM.injectStyles(e))})},e}(),p=function(){function e(e){this.owner=e,this.css=null}return e.prototype.beforeCompile=function(e,t,r){if(r.targetShadowDOM)o.DOM.injectStyles(this.css,e,!0);else if(o.FEATURE.scopedCSS){var n=o.DOM.injectStyles(this.css,e,!0);n.setAttribute("scoped","scoped")}else this.owner._alreadyGloballyInjected||(o.DOM.injectStyles(this.css),this.owner._alreadyGloballyInjected=!0)},e}()}),define("aurelia-templating-resources/attr-binding-behavior",["exports","aurelia-binding"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AttrBindingBehavior=void 0;e.AttrBindingBehavior=function(){function e(){}return e.prototype.bind=function(e,r){e.targetObserver=new t.DataAttributeObserver(e.target,e.targetProperty)},e.prototype.unbind=function(e,t){},e}()}),define("aurelia-templating-resources/binding-mode-behaviors",["exports","aurelia-binding","aurelia-metadata"],function(e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TwoWayBindingBehavior=e.OneWayBindingBehavior=e.OneTimeBindingBehavior=void 0;var n,i,o,a={bind:function(e,t,r){e.originalMode=e.mode,e.mode=this.mode},unbind:function(e,t){e.mode=e.originalMode,e.originalMode=null}};e.OneTimeBindingBehavior=(0,r.mixin)(a)(n=function(){this.mode=t.bindingMode.oneTime})||n,e.OneWayBindingBehavior=(0,r.mixin)(a)(i=function(){this.mode=t.bindingMode.oneWay})||i,e.TwoWayBindingBehavior=(0,r.mixin)(a)(o=function(){this.mode=t.bindingMode.twoWay})||o}),define("aurelia-templating-resources/throttle-binding-behavior",["exports","aurelia-binding"],function(e,t){"use strict";function r(e){var t=this,r=this.throttleState,n=+new Date-r.last;if(n>=r.delay)return clearTimeout(r.timeoutId),r.timeoutId=null,r.last=+new Date,void this.throttledMethod(e);r.newValue=e,null===r.timeoutId&&(r.timeoutId=setTimeout(function(){r.timeoutId=null,r.last=+new Date,t.throttledMethod(r.newValue)},r.delay-n))}Object.defineProperty(e,"__esModule",{value:!0}),e.ThrottleBindingBehavior=void 0;e.ThrottleBindingBehavior=function(){function e(){}return e.prototype.bind=function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,o="updateTarget";e.callSource?o="callSource":e.updateSource&&e.mode===t.bindingMode.twoWay&&(o="updateSource"),e.throttledMethod=e[o],e.throttledMethod.originalName=o,e[o]=r,e.throttleState={delay:i,last:0,timeoutId:null}},e.prototype.unbind=function(e,t){e[e.throttledMethod.originalName]=e.throttledMethod,e.throttledMethod=null,clearTimeout(e.throttleState.timeoutId),e.throttleState=null},e}()}),define("aurelia-templating-resources/debounce-binding-behavior",["exports","aurelia-binding"],function(e,t){"use strict";function r(e){var t=this,r=this.debounceState;if(r.immediate)return r.immediate=!1,void this.debouncedMethod(e);clearTimeout(r.timeoutId),r.timeoutId=setTimeout(function(){return t.debouncedMethod(e)},r.delay)}Object.defineProperty(e,"__esModule",{value:!0}),e.DebounceBindingBehavior=void 0;e.DebounceBindingBehavior=function(){function e(){}return e.prototype.bind=function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,o="updateTarget";e.callSource?o="callSource":e.updateSource&&e.mode===t.bindingMode.twoWay&&(o="updateSource"),e.debouncedMethod=e[o],e.debouncedMethod.originalName=o,e[o]=r,e.debounceState={delay:i,timeoutId:null,immediate:"updateTarget"===o}},e.prototype.unbind=function(e,t){e[e.debouncedMethod.originalName]=e.debouncedMethod,e.debouncedMethod=null,clearTimeout(e.debounceState.timeoutId),e.debounceState=null},e}()}),define("aurelia-templating-resources/self-binding-behavior",["exports"],function(e){"use strict";function t(e){return e.path&&e.path[0]||e.deepPath&&e.deepPath[0]||e.target}function r(e){var r=t(e);this.target===r&&this.selfEventCallSource(e)}Object.defineProperty(e,"__esModule",{value:!0});e.SelfBindingBehavior=function(){function e(){}return e.prototype.bind=function(e,t){if(!e.callSource||!e.targetEvent)throw new Error("Self binding behavior only supports event.");e.selfEventCallSource=e.callSource,e.callSource=r},e.prototype.unbind=function(e,t){e.callSource=e.selfEventCallSource,e.selfEventCallSource=null},e}()}),define("aurelia-templating-resources/signal-binding-behavior",["exports","./binding-signaler"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SignalBindingBehavior=void 0;e.SignalBindingBehavior=function(){function e(e){this.signals=e.signals}return e.inject=function(){return[t.BindingSignaler]},e.prototype.bind=function(e,t){
if(!e.updateTarget)throw new Error("Only property bindings and string interpolation bindings can be signaled.  Trigger, delegate and call bindings cannot be signaled.");if(3===arguments.length){var r=arguments[2];(this.signals[r]||(this.signals[r]=[])).push(e),e.signalName=r}else{if(!(arguments.length>3))throw new Error("Signal name is required.");for(var n=Array.prototype.slice.call(arguments,2),i=n.length;i--;){var o=n[i];(this.signals[o]||(this.signals[o]=[])).push(e)}e.signalName=n}},e.prototype.unbind=function(e,t){var r=e.signalName;if(e.signalName=null,Array.isArray(r))for(var n=r,i=n.length;i--;){var o=n[i],a=this.signals[o];a.splice(a.indexOf(e),1)}else{var s=this.signals[r];s.splice(s.indexOf(e),1)}},e}()}),define("aurelia-templating-resources/binding-signaler",["exports","aurelia-binding"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingSignaler=void 0;e.BindingSignaler=function(){function e(){this.signals={}}return e.prototype.signal=function(e){var r=this.signals[e];if(r)for(var n=r.length;n--;)r[n].call(t.sourceContext)},e}()}),define("aurelia-templating-resources/update-trigger-binding-behavior",["exports","aurelia-binding"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UpdateTriggerBindingBehavior=void 0;var r,n,i="The updateTrigger binding behavior can only be applied to two-way bindings on input/select elements.";e.UpdateTriggerBindingBehavior=(n=r=function(){function e(e){this.eventManager=e}return e.prototype.bind=function(e,r){for(var n=arguments.length,o=Array(n>2?n-2:0),a=2;a<n;a++)o[a-2]=arguments[a];if(0===o.length)throw new Error("The updateTrigger binding behavior requires at least one event name argument: eg <input value.bind=\"firstName & updateTrigger:'blur'\">");if(e.mode!==t.bindingMode.twoWay)throw new Error(i);var s=e.observerLocator.getObserver(e.target,e.targetProperty);if(!s.handler)throw new Error(i);e.targetObserver=s,s.originalHandler=e.targetObserver.handler;var c=this.eventManager.createElementHandler(o);s.handler=c},e.prototype.unbind=function(e,t){e.targetObserver.handler=e.targetObserver.originalHandler,e.targetObserver.originalHandler=null},e}(),r.inject=[t.EventManager],n)}),define("aurelia-templating-resources/html-resource-plugin",["exports","aurelia-templating","./dynamic-element"],function(e,t,r){"use strict";function n(e){return/([^\/^\?]+)\.html/i.exec(e)[1].toLowerCase()}function i(e){var i=e.container.get(t.ViewEngine),o=e.aurelia.loader;i.addResourcePlugin(".html",{fetch:function(e){return o.loadTemplate(e).then(function(t){var i,o=t.template.getAttribute("bindable"),a=n(e);return o?(o=o.split(",").map(function(e){return e.trim()}),t.template.removeAttribute("bindable")):o=[],i={},i[a]=(0,r._createDynamicElement)(a,e,o),i})}})}Object.defineProperty(e,"__esModule",{value:!0}),e.getElementName=n,e.configure=i}),define("aurelia-templating-resources/dynamic-element",["exports","aurelia-templating"],function(e,t){"use strict";function r(e,r,n){for(var i,o,a,s=(i=(0,t.customElement)(e),o=(0,t.useView)(r),i(a=o(a=function(){function e(){}return e.prototype.bind=function(e){this.$parent=e},e}())||a)||a),c=0,l=n.length;c<l;++c)(0,t.bindable)(n[c])(s);return s}Object.defineProperty(e,"__esModule",{value:!0}),e._createDynamicElement=r}),define("text!app.html",["module"],function(e){e.exports='<template><require from="./infojack-topmenu"></require><require from="./infojack-mainmenu"></require><require from="./infojack-win"></require><require from="./character/character-screen"></require><require from="./cyberspace/infojack-cyberspace"></require><top-menu></top-menu><main-menu></main-menu><character-screen></character-screen><cyberspace></cyberspace><win></win></template>'}),define("text!animations.css",["module"],function(e){e.exports=".highlightbg:not(:hover){\n    animation: highlightbg 4s linear 0s infinite;\n}\n@keyframes highlightbg{\n  0% {background: black;}\n  65% {background: #4CAF50;}\n  70%{background:#839984;}\n  95% {background: black;}\n}\n.highlight{\n    animation:highlight 3s ease 0s infinite;\n    border:.2em dashed;\n}\n@keyframes highlight{  \n    0%{\n        border-color:transparent;\n        color:white;\n    }\n    33%{\n        border-top-color:#edc207;\n        border-bottom-color:#edc207;\n        color:#edc207;\n    }\n    100%{\n        border-color:transparent;\n        color:white;\n    }\n}\n.highlightunder{\n    animation: highlightunder 3s ease 0s infinite;\n    border-bottom:.4em double transparent;\n}\n@keyframes highlightunder {  \n    0%{\n        border-bottom-color:transparent;\n    }\n    33%{\n        border-bottom-color:#ba097f;\n    }\n    100%{\n        border-bottom-color:transparent;\n    }\n}\n"}),define("text!empty.html",["module"],function(e){e.exports='<template><require from="./infojack-example.css"></require></template>'}),define("text!empty.css",["module"],function(e){e.exports=" \n"}),define("text!infojack-mainmenu.css",["module"],function(e){e.exports="#mainmenu div,#mainmenu{text-align:center;}\n#mainmenu hr{width:50%;} \n#mainmenu{z-index:-1;}\n#mainmenu button{width:50%;}\n"}),define("text!infojack-mainmenu.html",["module"],function(e){e.exports='<template><require from="./infojack-mainmenu.css"></require><div class="centered center panel" id="mainmenu" if.bind="show"><h1>Infojack</h1><hr><div><button click.trigger="startgame()" class="${hassave ? \'\' : \'highlight\'}">Start new game</button></div><div><button click.trigger="loadgame()" class="${hassave ? \'highlight\' : \'\'}">Load saved game</button></div><div><button click.trigger="showpending()">How to play</button></div><div><button click.trigger="openrepository()">Source code</button></div><hr></div></template>'}),define("text!infojack-radio.css",["module"],function(e){e.exports="#radio-container{\n    display:inline;\n    position:fixed;\n    right:2em;\n    top:4em;\n    text-align:center;\n    padding:.5em;\n    z-index:2;\n}\n#radio-control{\n  margin-bottom:1em;\n  vertical-align:middle;\n}\n#radio-control input{\n  position:relative;\n  vertical-align: middle;\n}\n#radio-label{\n  vertical-align:middle;\n}\n"}),define("text!infojack-radio.html",["module"],function(e){e.exports='<template><require from="./infojack-radio.css"></require><div id="radio-container" class="panel"><audio id="radio-player" type="audio/mpeg" src="http://ice1.somafm.com/defcon-128-mp3" preload="none" ref="audio"></audio><div id="radio-control"><input ref="radioactive" type="checkbox" click.trigger="play()" checked.bind="active" id="radio-checkbox"><label for="radio-checkbox">Enable music</label></div><div>Audio courtesy of <a href="https://somafm.com/defcon/index.html" target="_blank">DEF CON radio</a></div></div></template>'}),define("text!infojack-topmenu.css",["module"],function(e){e.exports="#topmenu img{\n    height:1.5em;\n    cursor:pointer;\n    margin:0em .25em 0em .25em;\n}\n#topmenu {\n    position:fixed;\n    right:2em;\n    top:1em;\n    background-color:lightgrey;\n    border:.25em solid lightgrey;\n    border-radius:1em;\n    z-index:2;\n}\n#topmenu>*{\n    padding-left:.5em;\n    padding-right:.5em;\n}\n"}),define("text!infojack-topmenu.html",["module"],function(e){e.exports='<template><require from="./infojack-topmenu.css"></require><require from="./infojack-radio"></require><div id="topmenu"><img src="./images/note.png" click.trigger="open()" title="Music On/Off"><div><radio hidden.bind="hideradio"></radio></div></div></template>'}),define("text!infojack-win.css",["module"],function(e){e.exports="#win-screen{\n  z-index:2;\n  background-color:black;\n  border:.1em solid white;\n}\n#win-screen table{\n  margin-top:1em;\n}\n#win-screen .label{\n  padding-right:1em;\n}\n#win-screen .reward{\n  text-align:center;\n  color:black;\n  font-weight:bold;\n  background-color:white;\n  padding:.2em;\n}\n#win-screen button{\n  border:.1em white solid;\n  min-width:10em;\n  padding:3em;\n  margin-top:1em;\n}\n#win-screen #ending-message div{\n  margin-bottom:1em;\n}\n"}),define("text!infojack-win.html",["module"],function(e){e.exports='<template><require from="./infojack-win.css"></require><div class="centered center" id="win-screen" if.bind="show"><div show.bind="!end"><div class="bold">You have completed your objective!</div><div>Your stats have been updated.</div><table><tr><td class="label">Unspent ability points</td><td class="reward" textcontent.bind="abilities"></td></tr><tr><td class="label">Unspent skill points</td><td class="reward" textcontent.bind="skills"></td></tr><tr><td class="label">Unspent feat slots</td><td class="reward" textcontent.bind="feats"></td></tr><tr><td class="label">Current wealth</td><td class="reward" textcontent.bind="wealth"></td></tr></table></div><div show.bind="end" id="ending-message"><div class="bold">Congratulations!</div><div>You have reached the end of the game\'s current content! Stay tuned for new updates!</div><div>By clicking the button below we\'ll clear up your save file so you can start again with a new character!</div></div><button click.trigger="close()" textcontent.bind="nice"></button></div></template>'}),define("text!infojack.css",["module"],function(e){e.exports="body{\n  background-color:#161616;\n  color:lightgray;\n  font-family:Orbitron;\n  padding:0em;\n  margin:0em;\n  width:100%;\n  height:100%;\n  background:linear-gradient(to bottom right, black,darkgreen);\n  background-repeat:no-repeat;\n  background-attachment:fixed;\n  overflow:hidden;\n}\ndiv,span{\n    font-family:Orbitron;\n}\na{\n    color:lightblue;\n}\n.panel{\n    background-color:#357c2b;\n    border:.3em solid #383838;\n    border-radius:1em;\n    border-style:groove;\n    z-index:-1;\n}\n.center{\n    margin:auto;\n    width:50%;\n    padding:1em;\n    position:absolute;\n    top:25%;\n    left:25%;\n    right:25%;\n    bottom:25%;\n}\nh1,h2,h3,h4,h5,h6{\n    color:darkgreen;\n    text-shadow:0.025em .025em black;\n    font-family:Orbitron;\n}\nh1{\n    font-size:4em;\n}\nbutton{\n  cursor:pointer;\n  background-color:black;\n  color:white;\n  margin:.1em;\n  padding:.3em;\n  font-weight:800;\n  font-family:Orbitron;\n  border:none;\n  outline:0;\n}\n\nbutton:hover:not(:disabled) {\n    background-color:#4CAF50;\n    color:white;\n}\nhr{border-color:gray;}\n.large{\n    width:75%!important;\n    top:10%!important;\n    left:10%!important;\n    right:10%!important;\n    bottom:10%!important;\n}\n.bold{font-weight:bold;}\ninput[type=text]{\n  background-color:black;\n  border:none;\n  border-bottom:.1px solid white;\n  color:white;\n  padding-right:3em;\n  height:2em;\n  font:oblique small-caps 1.5em monospace;\n  text-indent:.75em;\n  outline:0;\n}\n"}),define("text!cyberspace/infojack-cyberspace.html",["module"],function(e){e.exports='<template><require from="./infojack-cyberspace.css"></require><require from="./program-bar"></require><div show.bind="showconsole" id="console"><div id="console-constraint"></div></div><div show.bind="showconsole" id="cyberspace-lower"><div id="cyberspace-container"><div id="cyberspace"></div></div><program-bar if.bind="showconsole" id="program-bar" class="anchored"></program-bar></div></template>'}),define("text!cyberspace/infojack-cyberspace.css",["module"],function(e){e.exports="#console{\n  position:absolute;\n  width:100%;\n  background:black;\n  height:15%;\n  border-bottom:1px solid gray;\n  overflow-y:auto;\n}\n#console #console-constraint{width:95%;}\n#console span{\n  margin-top:.25em;\n  margin-right:.5em;\n  display:inline-block;\n}\n#cyberspace-lower{\n  position:absolute;\n  top:15%;\n  height:85%;\n  width:100%;\n}\n#cyberspace-container{\n  top:2%;\n  left:10%;\n  position:absolute;\n  height:98%;\n  width:93%;\n  overflow-x:auto;\n  overflow-y:auto;\n  display:hidden;\n}\n#cyberspace{\n  position:absolute;\n  margin-left:1.5em;\n  margin-top:1em;\n}\n#cyberspace .spacer{\n  position:absolute;\n  height:4em;\n  width:6em;\n  background:white;\n  visibility:hidden;\n}\n#cyberspace .tile{\n  position:absolute;\n  color:white;\n  background:black;\n  background-repeat:no-repeat;\n  background-size:100%;\n  transition:border 3s ease-out;\n  transition:opacity 1s ease-in-out;\n  opacity:0;\n  overflow:hidden;\n}\n#cyberspace .discovered{opacity:1;}\n@keyframes fadein {\n    from{opacity:0;}\n    to{opacity:1;}\n}\n@keyframes fadeout {\n    from{opacity:1;}\n    to{opacity:0;}\n}\n#cyberspace .tile img{\n  width:100%;\n  opacity:1;\n  animation:fadein 2000ms;\n  transition:opacity 2s;\n}\n@keyframes target{50%{background:rgb(255,32,32);}}\n#cyberspace .target{\n  border-style:solid!important;\n  z-index:1;\n  animation:target 3000ms infinite;\n}\n#cyberspace div.corridor{border:0.1em dashed gray;}\n#cyberspace div.interface{border:0.1em dashed orange;}\n#cyberspace div.datastore{border:0.1em dashed blue;}\n#cyberspace div.cpu{border:0.1em dashed red;}\n#cyberspace div.portal{border:0.1em dashed purple;}\n"}),define("text!cyberspace/program-bar.html",["module"],function(e){e.exports='<template id="program-bar" class.bind=\'collapsed?"anchored":"expanded"\'><require from="./program-bar.css"></require><table><tr repeat.for=\'p of programs &signal:"update-program-bar"\'><td><img src.bind="p.image" title.bind="p.name" class.bind=\'geticonclass(p) &signal:"update-program-bar"\' click.trigger="run(p)"></td><td show.bind="!collapsed" class="name">${p.name}</td><td show.bind="!collapsed" class="description">${p.describe()}.</td><td show.bind="!collapsed" class="size"><div>${p.size} block(s)</div><div>Hack +${p.hackingdc}</div></td><td show.bind="!collapsed" class="actions"><button show.bind=\'!isloaded(p) &signal:"update-program-bar"\' click.trigger="doload(p)">Load</button> <button show.bind=\'isloaded(p) &signal:"update-program-bar"\' click.trigger="dounload(p)">Unload</button></td></tr></table><div class="details"><div style.bind="hpcolor" class="hp">HP: ${hp}%</div><div style.bind="loadcolor" class="load">Load: ${load}/${totalload}</div><div class="bold">Blocks: ${freestorage}</div><button click.trigger="toggle()" id="program-bar-toggle" textcontent.bind=\'collapsed?"Expand":"Collapse"\'></button></div></template>'}),define("text!cyberspace/program-bar.css",["module"],function(e){e.exports="#program-bar{\n  height:100%;\n  z-index:1;\n  opacity:1;\n  position:absolute;\n  background-color:black;\n  border-top:1px solid gray;\n  border-right:1px solid gray;\n  display:flex;\n  flex-direction:column;\n  align-items:stretch;\n  overflow-x:hidden;\n}\n.anchored{width:10%;}\n.expanded{\n  width:auto;\n  min-width:10%;\n}\n#program-bar table{\n  flex:1;\n  display:flex;\n}\n#program-bar.anchored table td{\n  width:10em;\n}\n#program-bar.expanded table td:not(:first-child){\n  border-left:.1em dashed white;\n  padding-left:.2em;\n  padding-right:.2em;\n}\n#program-bar table td{\n  text-align:center;\n}\n#program-bar table .name{\n  min-width:7em;\n}\n#program-bar table .description{\n  min-width:12em;\n}\n#program-bar .actions button:not(:hover){\n  border:.1em solid white;\n}\n#program-bar img{\n  height:4em;\n  cursor:pointer;\n  opacity:.25;\n  transition:opacity 1s ease-in-out;\n  margin:auto;\n}\nimg.loaded{opacity:1!important;}\n#program-bar .details{\n  text-align:center;\n  width:100%;\n}\n#program-bar .details>*{\n  width:100%;\n  white-space:nowrap;\n}\n#program-bar .details .hp{\n  color:rgb(124,252,0);\n  transition:color 1s ease-in-out;\n  font-weight:bold;\n}\n#program-bar .details .load{\n  color:white;\n  transition:color 1s ease-in-out;\n  font-weight:bold;\n}\n"}),define("text!character/character-abilities.html",["module"],function(e){e.exports='<template><require from="./character-abilities.css"></require><table class="abilities-table"><tr><td class="bold">Strength</td><td class="ability-value">${strength}</td><td><button class="ability-upgrade" click.trigger="upgrade(\'strength\')" disabled.bind="!full">Upgrade</button></td><td>Your physical strength outside the Web.</td></tr><tr><td class="bold">Dexterity</td><td class="ability-value">${dexterity}</td><td><button class="ability-upgrade" click.trigger="upgrade(\'dexterity\')" disabled.bind="!full">Upgrade</button></td><td>Agility and coordination outside the Web.</td></tr><tr><td class="bold">Constitution</td><td class="ability-value">${constitution}</td><td><button class="ability-upgrade" click.trigger="upgrade(\'constitution\')" disabled.bind="!full">Upgrade</button></td><td>Your endurance for physical punishment.</td></tr><tr><td class="bold underline yellow">Intelligence</td><td class="ability-value">${intelligence}</td><td><button class="ability-upgrade" click.trigger="upgrade(\'intelligence\')">Upgrade</button></td><td class="yellow">Your reasoning power.<br>(may replace Strength on the web)</td></tr><tr><td class="bold">Wisdom</td><td class="ability-value">${wisdom}</td><td><button class="ability-upgrade" click.trigger="upgrade(\'wisdom\')">Upgrade</button></td><td>Your general awareness and willpower.<br>(may replace Dexterity on the web)</td></tr><tr><td class="bold">Charisma</td><td class="ability-value">${charisma}</td><td><button class="ability-upgrade" click.trigger="upgrade(\'charisma\')">Upgrade</button></td><td>Your presence and social magnetism.<br>(may replace Constitution on the web)</td></tr></table><table id="ability-points"><tr><td class="ability-value">${pointbuy}</td><td>Starting points</td></tr><tr><td class="ability-value">${pointextra}</td><td>Ability points</td></tr></table></template>'}),define("text!character/character-abilities.css",["module"],function(e){e.exports=".stats-table {\n    border-spacing:.75em;\n}\n.abilities-table tr{\n    height:1.75em;\n}\n.abilities-table td{\n    padding:0 .5em 0 .5em;\n}\n.abilities-table button:disabled,.ability-upgrade:disabled{\n    opacity:.5;\n}\n.ability-value{\n    background-color:white;\n    color:black;\n    text-align:center;\n}\n.ability-upgrade{\n    border:.1em solid white;\n}\n.ability-upgrade:hover:not(:disabled){\n    border:.1em solid black!important;\n}\n#ability-points{\n    margin-top:2em;\n    margin-left:1em;\n}\n#ability-points td{\n    margin:0 1em 0 5em;\n    padding-left:.5em;\n}\n#ability-points .ability-value{\n    padding:.25em;\n}\n.yellow{color:khaki;}\n"}),define("text!character/character-deck.html",["module"],function(e){e.exports='<template><require from="./character-deck.css"></require><require from="./character-details.css"></require><require from="./character-abilities.css"></require><div id="deck-screen"><div><span class="detail">Deck program memory <span>${memory}</span></span></div><div><span class="detail">Deck file storage <span>${storage}</span></span></div><div><span class="detail">${name} wealth <span>${wealth}¥</span></span></div><div><span class="detail">${name} electronics <span>${electronics}</span></span></div><table><tr><td>Cyberdeck</td><td class="grade">${grade(deckgrade)}</td><td><button disabled.bind="canupgradedeck" click.trigger="upgradedeck()" class="ability-upgrade">Upgrade</button></td><td>${canupgradedeck}</td><td><tr></tr><tr><td>Memory</td><td class="grade">${grade(memorygrade)}</td><td><button disabled.bind="canupgradememory" click.trigger="upgradememory()" class="ability-upgrade">Upgrade</button></td><td>${canupgradememory}</td><td><tr></tr><tr><td>Storage</td><td class="grade">${grade(storagegrade)}</td><td><button disabled.bind="canupgradestorage" click.trigger="upgradestorage()" class="ability-upgrade">Upgrade</button></td><td>${canupgradestorage}</td><td><tr></tr><tr><td>Stealth</td><td class="grade">${grade(stealthgrade)}</td><td><button disabled.bind="canupgradestealth" click.trigger="upgradestealth()" class="ability-upgrade">Upgrade</button></td><td>${canupgradestealth}</td><td><tr></tr></td></tr></td></tr></td></tr></td></tr></table></div></template>'}),define("text!character/character-deck.css",["module"],function(e){e.exports="#deck-screen div,#programs-screen div{margin-bottom:0.5em;}\n#deck-screen .detail,#programs-screen .detail{\n  font-weight:bold;\n}\n#deck-screen button{\n  margin-left:.5em;\n  margin-right:.5em;\n}\n#deck-screen .grade{\n  text-align:center;\n}\n"}),define("text!character/character-details.html",["module"],function(e){e.exports='<template><require from="./character-details.css"></require><div class="details-title">Level</div><span class="detail">Character level <span>${avatar.level}</span> </span><span class="detail" repeat.for="[name,class] of classes">${name} <span>${avatar.classes[name]}</span></span><div class="details-title">Hit points</div><div><span class="detail">Current HP<span>${hero.hp}</span> </span><span class="detail">Max HP<span>${hero.maxhp}</span> </span><span class="detail">Max HP (Web)<span>${avatar.maxhp}</span></span></div><div class="details-title">Combat (Web)</div><div><span class="detail">Base attack bonus<span>${sign(avatar.bab)}</span> </span><span class="detail">Mêlée attack bonus <span>${sign(avatar.getmelee())}</span> </span><span class="detail">Ranged attack bonus <span>${sign(avatar.getranged())}</span></span><div><span class="detail">Defence <span>${avatar.getdefence()}</span> </span><span class="detail">Initiative <span>${sign(avatar.getinitiative())}</span> </span><span class="detail">Speed <span>${avatar.speed} ft.</span></span><div class="details-title">Saving throws (Web)</div><span repeat.for="save of saves" class="detail">${save} <span>${getsave(save)}</span></span><div class="details-title">Ability modifiers (Web)</div><div><span repeat.for="i of 3" class="detail">${abilities[i]} <span>${getmodifier(abilities[i])}</span></span></div><div><span repeat.for="i of 3" class="detail">${abilities[i+3]} <span>${getmodifier(abilities[i+3])}</span></span></div><div class="details-title">Skill modifiers (Web)</div><span repeat.for="[name,skill] of skills" class="detail">${name} <span>${getskill(skill)}</span></span><div class="details-title">Other</div><span class="detail">Edge<span>${avatar.edge}</span> </span><span class="detail">Edge dice <span>${avatar.edgedice[0]}d${avatar.edgedice[1]}</span> </span><span class="detail">Contacts<span>${avatar.contacts}</span></span></div></div></template>'}),define("text!character/character-details.css",["module"],function(e){e.exports=".detail{\n  display:inline-block;\n  margin-right:.5em;\n}\n.detail span{\n  padding:.1em .5em .1em .5em;\n  background-color:white;\n  color:black;\n  text-align:center;\n  margin-left:.5em;\n} \n.details-title{\n  font-weight:bold;\n  margin-top:.5em;\n  margin-bottom:.5em;\n}\n"}),define("text!character/character-feats.html",["module"],function(e){e.exports='<template><require from="./character-feats.css"></require><require from="./character-abilities.css"></require><div id="currentfeats"><span class="bold">Current ${viewname.toLowerCase()}:</span> <span if.bind=\'getcurrent().length==0  &signal:"update"\'>none.</span> <span repeat.for="feat of getcurrent() &signal:\'update\'">${feat.name.toLowerCase()};&nbsp;</span></div><div id="featsleft" class="bold">${viewname} left: <span class="ability-value">${points}</span></div><table class="abilities-table" id="featstable"><tr repeat.for="[name,feat] of getall()"><td class="bold">${feat.name}</td><td><button class="ability-upgrade" click.trigger="add(feat)" disabled.bind="!validate(feat) &signal:\'update\'">Add</button></td><td>${feat.description}.</td></tr></table></template>'}),define("text!character/character-feats.css",["module"],function(e){e.exports="#currentfeats,#featsleft{\n    padding:.5em;\n} \n\n#featsleft span{\n    padding:.2em;\n    padding-left:.75em;\n    padding-right:.75em;\n    margin-left:.5em;\n}\n\n#featstable{\n    margin-top:.5em;\n}\n"}),define("text!character/character-general.html",["module"],function(e){e.exports='<template><require from="./character-general.css"></require><div id="character-general"><div class="details-title"><div>Name:</div><input type="text" value.bind="hero.name" ref="name"></div><div class="details-title"><div>Avatar:</div><img repeat.for="i of avatars" src.bind=\'"./images/characters/"+i+".png"\' class.bind=\'i==avatar?"selected":""\' onclick.call="select(i)"></div></div></template>'}),define("text!character/character-general.css",["module"],function(e){e.exports="#character-general img{\n  width:3.5em;\n  border:.3em dashed transparent;\n  border-radius:1em;\n  transition:border .5s ease-in-out;\n  transition:background-color .5s ease-in-out;\n  cursor:pointer;\n  background-color:transparent;\n}\n\n#character-general img.selected{\n  border-color:#edc207 !important;\n  border-radius:0em;\n}\n\n#character-general input{\n  width:20em;\n}\n\n#character-general img:hover:not(.selected){\n  background-color:gray;\n}\n\n#character-general .details-title{\n  margin-bottom:1em;\n}\n\n#character-general div{\n  margin-bottom:.75em;\n}\n"}),define("text!character/character-programs.html",["module"],function(e){e.exports='<template><require from="./character-programs.css"></require><require from="./character-abilities.css"></require><div id="programs-screen"><div class="statistics"><span><span class="detail">${name} wealth <span>${wealth}¥</span></span></span> <span><span class="detail">${name} technology <span>${technology}</span></span></span></div><span class="title">Buy and create programs</span> <span class="instructions">(hover mouse over buttons for more information)</span><table id="programs-table"><tr repeat.for="[name,p] of programs"><td class="name">${name}</td><td><button class="ability-upgrade" disabled.bind=\'!canbuy(p) &signal:"update"\' click.trigger="buy(p)" title.bind="getpurchaselabel(p)" textcontent.bind=\'has(p)?"Owned":"Buy" &signal:"update"\'></button></td><td><button class="ability-upgrade" disabled.bind=\'!cancreate(p) &signal:"update"\' click.trigger="create(p)" title.bind="getprogramminglabel(p)" textcontent.bind=\'has(p)?"Owned":"Create" &signal:"update"\'></button></td><td>${p.describe()}.</td></tr></table></div></template>'}),define("text!character/character-programs.css",["module"],function(e){e.exports="#programs-table .name{\n  font-weight:bold;\n  font-variant:small-caps;\n}\n#programs-table{margin-top:1em;}\n#programs-table td{padding-right:.5em;}\n#programs-screen button{width:100%;}\n#programs-screen .instructions{font-size:small;}\n#programs-screen .title{font-weight:bold;}\n#programs-screen .statistics{\n  width:100%;\n  padding-bottom:.5em;\n  border-bottom:.1em groove gray;\n}\n"}),define("text!character/character-screen.html",["module"],function(e){e.exports='<template><require from="./character-general"></require><require from="./character-abilities"></require><require from="./character-skills"></require><require from="./character-feats"></require><require from="./character-talents"></require><require from="./character-details"></require><require from="./character-deck"></require><require from="./character-programs"></require><require from="./character-screen.css"></require><div class="large center panel" if.bind="show" id="characterscreen"><h2>Character screen</h2><span id="charactermenu" ref="charactermenu"><button click.trigger="select($event)" id="character-general" class="highlightbg">General</button> <button click.trigger="select($event)" id="character-abilities">Abilities</button> <button click.trigger="select($event)" id="character-skills">Skills</button> <button click.trigger="select($event)" id="character-feats">Feats</button> <button click.trigger="select($event)" id="character-talents">Talents</button> <button click.trigger="select($event)" id="character-details">Details</button><div class="separator"></div><button click.trigger="select($event)" id="character-deck">Deck</button> <button click.trigger="select($event)" id="character-programs">Programs</button><div class="separator"></div><button id="character-close" click.trigger="close($event)" class="connect">Connect</button> </span><span id="character-content"><character-general if.bind="showgeneral" class="characterview"></character-general><character-abilities if.bind="showabilities" class="characterview"></character-abilities><character-skills if.bind="showskills" class="characterview"></character-skills><character-feats if.bind="showfeats" class="characterview"></character-feats><character-talents if.bind="showtalents" class="characterview"></character-talents><character-details if.bind="showdetails" class="characterview"></character-details><character-deck if.bind="showdeck" class="characterview"></character-deck><character-programs if.bind="showprograms" class="characterview"></character-programs></span></div></template>'}),define("text!character/character-screen.css",["module"],function(e){e.exports="#characterscreen{\n    padding-top:0em;\n}\n#charactermenu{\n    float:left;\n    width:25%;\n}\n#charactermenu button{\n    width:100%;\n    display:block;\n}\n#charactermenu button.connect{\n  border:.1em dotted yellow;\n  color:yellow;\n}\n.characterview{\n    width:75%;\n    right:0em;\n}\ndiv.separator{height:.5em;}\n#character-content{\n\tfloat: left;\n\tdisplay: inline;\n\tmargin-left: 1em;\n\tmargin-right: 1em;\n\tbackground-color: black;\n\tborder: 0.1em outset black;\n\tpadding: 0.5em;\n\twidth: 70%;\n    overflow-y:auto;\n    height:80%;\n}\n"}),define("text!character/character-skills.html",["module"],function(e){e.exports='<template><require from="./character-skills.css"></require><require from="./character-abilities.css"></require><div id="ranksleft">Skill points left: <span class="ability-value">${hero.ranks}</span> <span class="small">(skills in red cost 2 points to upgrade)</span></div><table class="abilities-table" id="skilltable"><tr repeat.for="[name,skill] of skills" class="skill-${name.toLowerCase()}"><td class="bold">${name}</td><td class="ability-value">${ranks[name]}</td><td><button class="ability-upgrade ${iscrossclass(name)?\'crossskill\':\'\'}" click.trigger="upgrade(name)" disabled.bind="!canupgrade(ranks[name],name)">Upgrade</button></td><td>${skill.description} (${getability(skill)}).</td></tr></table></template>'}),define("text!character/character-skills.css",["module"],function(e){e.exports="#ranksleft{\n    font-weight: bold;\n    padding: .5em;\n}\n#ranksleft span{padding:.2em;}\n\n.small{\n    font-size:.75em;\n    font-weight:normal;\n}\n.crossskill{color:#B22222;}\n.skill-hacking{color:khaki;}\n"});